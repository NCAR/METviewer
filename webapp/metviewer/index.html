<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title>METViewer</title>
    <link rel="stylesheet" type="text/css" href="include/metviewer.css" />
    <link rel="shortcut icon" href="include/favicon.ico" type="image/x-icon" />
</head>

<body onLoad="onLoad()" style="padding-left:20px">

<script type="text/javascript"><!--

var _boolIE = false;

var _url;

var _boolDBStatus = false;

var _listFixVarStat = ["MODEL", "FCST_LEAD", "FCST_VALID_BEG", "FCST_INIT_BEG", "FCST_LEV", "OBTYPE", "VX_MASK", "INTERP_MTHD", "INTERP_PNTS", "FCST_THRESH"];
var _listFixVarMode = ["MODEL", "FCST_LEAD", "FCST_VALID", "FCST_INIT", "FCST_ACCUM", "FCST_RAD", "FCST_THR", "FCST_INIT", "FCST_LEV"];
var _listFixVar = _listFixVarStat;

var _intDepSize = 1;
var _intDepIdNext = 1;
var _listDepDiv = new Array();

var _intFixSize = 0;
var _intFixIdNext = 0;
var _listFixDiv = new Array();

var _listIndyVarStat = ["FCST_LEAD", "FCST_LEV", "FCST_THRESH"];
var _listIndyVarMode = ["FCST_LEAD", "FCST_LEV", "FCST_THR"];
var _listIndyVar = _listIndyVarStat;

var _strPlotData = "stat";


/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  
 * 
 *  Administrative Controls
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
 
/**
 * When the page loads, perform the initialization duties including setting pointers to DHTML elements,
 * loading the list of databases and populating the various database field lists.
 */

function onLoad(){
	_url			= window.location + "servlet";

	_boolIE = (-1 != navigator.appName.indexOf("Internet Explorer"));

	var divLoading = document.getElementById("divLoading");
	if( !_boolIE ){
	    divLoading.style.top = (window.innerHeight / 2) - 40;
	    divLoading.style.left = (window.innerWidth / 2) - 60;
	} else {
		divLoading.style.top = (document.body.clientHeight / 2) - 40;
		divLoading.style.left = (document.body.clientWidth / 2) - 60;
		//divLoading.style.setExpression("top", "(document.body.clientHeight / 2) - 30");
		//divLoading.style.setExpression("left", "(document.body.clientWidth / 2) - 60");
	}

	/*
	console("browser codeName: " + navigator.appCodeName + "\n" +
			"browser name: " + navigator.appName + "\n" +
			"browser version: " + navigator.appVersion + "\n" +
			"cookies enabled: " + navigator.cookieEnabled + "\n" +
			"platform: " + navigator.platform + "\n" +
			"user-agent header: " + navigator.userAgent + "\n" +
			"IE: " + (_boolIE? "true" : "false") + "\n\n");
	*/
	console("load() - IE: " + (_boolIE? "true" : "false") + "\n\n");

	//  initialize the database list and controls
	listDBReq();
	selectDBResp("<disconnected>");

	//  initialize the dep list
	_listDepDiv.push( document.getElementById("divDep0") );

	//  initialize the fixed value controls
	_listFixDiv.push( document.getElementById("divFix0") );
	fillSelect("selFix0", _listFixVar);
	fillSelect("selIndyVar", _listIndyVar);
}


/**
 * Wrapper for appending information to the console text box
 */
function console(str){ document.getElementById("txtConsole").value += str; }

/**
 * Dims the screen while the web app is waiting for the servlet
 */
function dimScreen(boolDim){
	document.title = "METViewer" + (boolDim? " - Loading..." : "");
	document.getElementById("divDimScreen").style.display = (boolDim? "block" : "none");
	document.getElementById("divLoading").style.display = (boolDim? "block" : "none");
}

/**
 * Debugging facility which dumps the DHTML for the input element into the console 
 */
function serialize(strId){
	var doc = document.getElementById(strId);
	var strXML = "";
	try     { strXML = XML( (new XMLSerializer()).serializeToString(doc) ).toXMLString(); }
	catch(e){ strXML = doc.outerHTML; } 
	console(strXML + "\n\n");		
}

/**
 * Make a server call to clear the <list_val> cache
 */
function listValClearCacheReq(){ sendRequest("POST", "<list_val_clear_cache/>", listValClearCacheResp); }
function listValClearCacheResp(strResp){ console("listValClearCacheResp() - response: " + strResp + "\n\n"); }

/**
 * Clear and populate a select list with the specified id with the items in the specified list
 */
function fillSelect(strId, listOpt){
	var sel = document.getElementById(strId);
	while( 0 < sel.length ){ sel.remove(sel.length - 1); }
	for(i in listOpt){
		var opt = document.createElement("option");
		opt.text = listOpt[i];
		try{ sel.add(opt, null); }catch(ex){ sel.add(opt); }
	}
}

/**
 * Search the specified div list for the member with the specified id and return its index.  The div id
 *  is determined from the value of the div input with the specified index.  
 */
function findDivId(listDiv, intDivId, intInputIndex){
 	var intIndex = -1;
 	for(i in listDiv){
 		var intIdCur = listDiv[i].getElementsByTagName("input")[intInputIndex].value;
 		if( intDivId == intIdCur ){ intIndex = i; }
 	}
 	return intIndex;	
}

/**
 * Create a request object in a browser-dependent manner
 */
function getRequest(){
	var req;
	if (window.XMLHttpRequest) { req = new XMLHttpRequest(); }
	else if (window.ActiveXObject) {
		try{ req = new ActiveXObject("Microsoft.XMLHTTP"); } 
		catch (e) { try { req = new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) {} }
	}
	return req;
}

/**
 * Send an XML request to the server asynchronously, and call processResponse() when the response arrives
 */
function sendRequest(reqType, reqData, funResp){

	dimScreen(true);
	console("sendRequest() - request: " + reqData + "\n");

	//  set the request to wait until the data is ready
	var strResp = "";
	var req = getRequest();
	req.onreadystatechange =
    function() {
		if (req.readyState == 4) {
			if (req.status == 200) { strResp = req.responseText; }
			else                   { strResp = "ERROR: req.status = " + req.status; }
			funResp(strResp);
			dimScreen(false);
        }
	};

	var reqURL = _url + "?date=" + (new Date()).getMilliseconds();
  
	//  send the request in the manner specified
    if( reqType == "GET" ){
		req.open(reqType, reqURL + "&data=" + encodeURI(reqData), true);
		req.send(null);
	} else {
		var reqPostData = "<request>" + reqData + "</request>";
		req.open(reqType, reqURL, true);
		req.setRequestHeader("Content-Type", "text/xml");
		req.setRequestHeader("Content-length", reqPostData.length);
		req.setRequestHeader("Connection", "close");
		req.send(reqPostData);
	}
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  
 * 
 *  Database Controls
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

/**
 * Test functions related to the GET and POST test controls
 */
function testPostReq()    { sendRequest("POST", document.getElementById("txtPost").value, testResp); }
function testGetReq()     { sendRequest("GET", document.getElementById("txtGet").value, testResp);   }
function testResp(strResp){ console("testResp() - response: " + strResp + "\n\n"); }

/**
 * Request and process the list of databases, populating the database list select control 
 */
function listDBReq(){ sendRequest("POST", "<list_db/>", listDBResp); }
function listDBResp(strResp){
	console("listDBResp() - response: " + strResp + "\n\n");

	//  parse the list of databases and populate the list
	var listDB = strResp.replace(/<list_db><db>/, "").replace(/<\/db><\/list_db>/, "").split( /<\/db><db>/ );
	fillSelect("selDB", listDB);
}

/**
 * Request and process the database connect command, updating the GUI database status control
 */
function selectDBReq(){
	var selDB = document.getElementById("selDB");
	sendRequest("POST", "<connect_db>" + selDB.options[selDB.selectedIndex].text + "</connect_db>", selectDBResp);
}
function selectDBResp(strResp){
	console("selectDBResp() - response: " + strResp + "\n\n");

	//  update the connection status
	_boolDBStatus = (-1 < strResp.indexOf("<connected>") );
	var strDBStatus	= document.getElementById("spanDBStatus");
	var spanPlotControls = document.getElementById("spanPlotControls");	

	//  update the status controls
	strDBStatus.style.color			= _boolDBStatus? "#66cc66"   : "#cc6666";
	strDBStatus.innerHTML			= _boolDBStatus? "Connected" : "Disconnected";
	spanPlotControls.style.display	= _boolDBStatus? "inline"    : "none";

	//  initialize the fcst_var controls if a successful connection is made
	if( _boolDBStatus ){ listFcstVarReq(0); }
}


/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  
 * 
 *  Dependent Variable Controls
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

/**
 * Create a GUI control cluster for specifying a dependent variable fcst_var and stat(s)
 */
function addDep(){

 	//  clone the dependent variable controls
 	var intDepId = _intDepIdNext++;
 	var divDep = _listDepDiv[0].cloneNode(true);

 	//  update the components of the cloned fixed value controls
 	divDep.id = "divDep" + intDepId;
 	divDep.getElementsByTagName("select")[0].id = "selFcstVar" + intDepId;
 	var btnFcstVar = divDep.getElementsByTagName("input")[0];
 	btnFcstVar.setAttribute("onclick", "javascript:selectFcstVarReq(" + intDepId + ")");
 	if( _boolIE ){ btnFcstVar.attachEvent("onclick", new Function("selectFcstVarReq(" + intDepId + ")")); }
 	divDep.getElementsByTagName("input")[1].name = "radAxis" + intDepId;
 	divDep.getElementsByTagName("input")[2].name = "radAxis" + intDepId;
 	var selStat = divDep.getElementsByTagName("select")[1];
 	while( 0 < selStat.length ){ selStat.remove(selStat.length - 1); }
 	selStat.style.display = "none";		
 	selStat.id = "selStat" + intDepId;
 	var lblStat = divDep.getElementsByTagName("span")[0];
 	lblStat.style.display = "none";
 	lblStat.id = "lblStat" + intDepId;
 	var lnkDep = divDep.getElementsByTagName("a")[0];
 	lnkDep.setAttribute("onclick", "javascript:removeDepVar(" + intDepId + ")");
 	if( _boolIE ){ lnkDep.attachEvent("onclick", new Function("removeDepVar(" + intDepId + ")")); }
 	divDep.getElementsByTagName("span")[1].style.display = "inline";
 	divDep.getElementsByTagName("input")[3].value = "" + intDepId;

 	//  add the new fixed variable value section to the page
 	_listDepDiv.push(divDep);
 	_intDepSize++;
 	document.getElementById("divDep").insertBefore(divDep, document.getElementById("imgDep"));

 	//  ensure the first remove link is visible
	_listDepDiv[0].getElementsByTagName("span")[1].style.display = "inline";
}

/**
 * Remove the specified dep div from the list of dependent variable controls
 */
function removeDepVar(intDepId){

 	//  attempt to find the specified dep div, and if the dep div was not found, bail
 	var intDepIndex = findDivId(_listDepDiv, intDepId, 3);
 	if( 0 > intDepIndex ){
 		console("removeDepVar() - WARNING: dep div " + intDepId + " not found\n\n");
 		return;
 	}

 	//  otherwise, remove the specified div from the list and hide it
 	var divDep = _listDepDiv[intDepIndex]; 
 	_listDepDiv.splice(intDepIndex, 1);
 	divDep.style.display = "none";
 	_intDepSize--;	

 	//  if there is only one dep div remaining in the list, hide the remove link and bail
 	if( 1 == _intDepSize ){
 		_listDepDiv[0].getElementsByTagName("span")[1].style.display = "none";
 		return;
 	}
}

/**
 * List the fcst_var database field values, and populate the dependent variable fcst_var select with the results
 */
function listFcstVarReq(intDepId){
	sendRequest("POST", "<list_val><id>" + intDepId + "</id><" + _strPlotData + "_field>FCST_VAR</" + _strPlotData + "_field>" + "</list_val>", listFcstVarResp);
}
function listFcstVarResp(strResp){

	//  parse the response
	var listProc = strResp.match( /<list_val><id>(\d+)<\/id>(.*)<\/list_val>/ );
	if( null == listProc ){
		console("listFcstVarResp() - ERROR: could not parse response: " + strResp + "\n\n");
		return;		
	}
	var intDepId = listProc[1];
	var listVal = listProc[2].replace( /^<val>/, "" ).replace( /<\/val>$/, "" ).split( /<\/val><val>/ );

	//  populate the fcst_var select with the search results
	fillSelect("selFcstVar" + intDepId, listVal);
}

/**
 * List the statistics available for the specified forecast variable and populate the statistics select
 * with the results
 */
function selectFcstVarReq(intId){
	var selFcstVar = document.getElementById("selFcstVar" + intId);
	sendRequest("POST",
				"<list_stat><id>" + intId + "</id><" + _strPlotData + "_fcst_var>" + selFcstVar.options[selFcstVar.selectedIndex].value + 
					"</" + _strPlotData + "_fcst_var></list_stat>", 
				selectFcstVarResp);	
}
function selectFcstVarResp(strResp){

	//  parse the response
	var listProc = strResp.match( /<list_stat><id>(\d+)<\/id>(.*)<\/list_stat>/ );
	if( null == listProc ){
		console("selectFcstVarResp() - ERROR: could not parse response: " + strResp + "\n\n");
		return;		
	}
	var intDepId = listProc[1];
	var listStat = listProc[2].replace( /^<stat>/, "" ).replace( /<\/stat>$/, "" ).split( /<\/stat><stat>/ );

	//  populate and display the stats select control
	var strSelStatId = "selStat" + intDepId;
	fillSelect(strSelStatId, listStat);
	document.getElementById(strSelStatId).style.display = "inline";
	document.getElementById("lblStat" + intDepId).style.display = "inline";
}

/**
 * Build an XML criteria string for a <list_val> command which contains the list of currently selected 
 * dependent variable fcst_var values  
 */
function buildFcstVarCrit(){
	var strFixCrit = "<field name=\"FCST_VAR\">";
	for(i in _listDepDiv){
		var selFcstVar = _listDepDiv[i].getElementsByTagName("select")[0];
		strFixCrit += "<val>" + selFcstVar.options[selFcstVar.selectedIndex].value + "</val>";
	}
	strFixCrit += "</field>";
	return strFixCrit;
}


/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  
 * 
 *  Fixed Variable Controls
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
 
/**
 * Create a GUI control cluster for specifying a fixed plot variable value
 */
function addFixVar(){

	//  if the first fix div is not displayed, show it and bail
	if( 1 > _intFixSize ){
		_listFixDiv[0].style.display = "block";
		_intFixIdNext++;
		_intFixSize++;
		return;
	}

	//  clone the fixed value controls
	var intFixId = _intFixIdNext++;
	var divFix = _listFixDiv[0].cloneNode(true);

	//  update the components of the cloned fixed value controls
	divFix.id = "divFix" + intFixId;
	var selFix = divFix.getElementsByTagName("select")[0];
	selFix.id = "selFix" + intFixId;
	var btnFix = divFix.getElementsByTagName("input")[0];
	btnFix.setAttribute("onclick", "javascript:selectFixVarReq(" + intFixId + ")");
	if( _boolIE ){ btnFix.attachEvent("onclick", new Function("selectFixVarReq(" + intFixId + ")")); }
	var selFixVal = divFix.getElementsByTagName("select")[1];
	while( 0 < selFixVal.length ){ selFixVal.remove(selFixVal.length - 1); }
	selFixVal.style.display = "none";		
	selFixVal.id = "selFixVal" + intFixId;
	var lnkFix = divFix.getElementsByTagName("a")[0];
	lnkFix.setAttribute("onclick", "javascript:removeFixVar(" + intFixId + ")");
	if( _boolIE ){ lnkFix.attachEvent("onclick", new Function("removeFixVar(" + intFixId + ")")); }
	var hidFix = divFix.getElementsByTagName("input")[1];
	hidFix.value = "" + intFixId;
	
	//  add the new fixed variable value section to the page
	_listFixDiv.push(divFix);
	_intFixSize++;
	document.getElementById("divFix").insertBefore(divFix, document.getElementById("imgFix"));
}

/**
 * Remove the specified fix div from the list of fixed variable controls
 */
function removeFixVar(intFixId){

	//  attempt to find the specified fix div, and if the fix div was not found, bail
	var intFixIndex = findDivId(_listFixDiv, intFixId, 1);
	if( 0 > intFixIndex ){
		console("removeFixVar() - WARNING: fix div " + intFixId + " not found\n\n");
		return;
	}

	//  if the requested fix div is the only remaining one in the list, simply hide it and bail
	if( 1 == _intFixSize && 0 == intFixIndex ){
		var selFixVal = _listFixDiv[0].getElementsByTagName("select")[1];
		while( 0 < selFixVal.length ){ selFixVal.remove(selFixVal.length - 1); }
		selFixVal.style.display = "none";		
		_listFixDiv[0].style.display = "none";
		_intFixSize = 0;
		return;
	}

	//  otherwise, remove the specified div from the list and hide it
	var divFix = _listFixDiv[intFixIndex]; 
	_listFixDiv.splice(intFixIndex, 1);
	divFix.style.display = "none";
	_intFixSize--;	
}

/**
 * Construct a string of database field and value criteria that reflects the selected fields and values in
 * the fixed values controls
 */
function buildFixCrit(endIndex){
	var strFixCrit = "";
	for(i=0; i <= endIndex; i++){
		var divFixCrit = _listFixDiv[i];
		var selFixCrit = divFixCrit.getElementsByTagName("select")[0];
		var strFixCritCur = "<field name=\"" + selFixCrit.options[ selFixCrit.selectedIndex ].text + "\">";
		var selFixCritVal = divFixCrit.getElementsByTagName("select")[1];
		var intFixCritNum = 0;
		for(j=0; j < selFixCritVal.length; j++){
			var optFixCritVal = selFixCritVal.options[j];
			if( optFixCritVal.selected ){
				strFixCritCur += "<val>" + optFixCritVal.text + "</val>";
				intFixCritNum++;
			}
		}
		strFixCritCur += "</field>";
		if( 0 < intFixCritNum ){ strFixCrit += strFixCritCur; }
	}
	return strFixCrit;
}

/**
 * Send a request to retrieve the database values for the selected fix field 
 */
function selectFixVarReq(intFixId){

	//  attempt to find the specified fix div, and if the fix div was not found, bail
	var intFixIndex = findDivId(_listFixDiv, intFixId, 1);
	if( 0 > intFixIndex ){
		console("selectFixVarReq() - WARNING: fix div " + intFixId + " not found\n\n");
		return;
	}

	//  build a list_val request for the selected field
	var strFcstVarCrit = buildFcstVarCrit();
	var strFixCrit = buildFixCrit(intFixIndex - 1);
	var divFix = _listFixDiv[intFixIndex];
	var selFix = divFix.getElementsByTagName("select")[0];
	var strField = selFix.options[selFix.selectedIndex].text;
	sendRequest("POST", 
				"<list_val><id>" + intFixId + "</id><" + _strPlotData + "_field>" + strField + "</" + _strPlotData + "_field>" + 
				strFcstVarCrit + strFixCrit + "</list_val>", 
				selectFixVarResp); 	
}

function selectFixVarResp(strResp){

	//  parse the response
	var listProc = strResp.match( /<list_val><id>(\d+)<\/id>(.*)<\/list_val>/ );
	if( null == listProc ){
		console("selectFixVarResp() - ERROR: could not parse response: " + strResp + "\n\n");
		return;		
	}
	var intFixId = listProc[1];
	var listVal = listProc[2].replace( /^<val>/, "" ).replace( /<\/val>$/, "" ).split( /<\/val><val>/ );

	//  retrieve and validate the fix div
	var intFixIndex = findDivId(_listFixDiv, intFixId, 1);
	if( 0 > intFixIndex ){
		console("selectFixVarResp() - ERROR: index for fix id " + intFixId + " not found\n\n");
		return;		
	}
	var divFix = _listFixDiv[intFixIndex];

	//  add the field values to the value select list
	var selFixVal = divFix.getElementsByTagName("select")[1];
	selFixVal.style.display = "inline";
	fillSelect("selFixVal" + intFixId, listVal);	
}


/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  
 * 
 *  Independent Variable Controls
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

function selectIndyVarReq(){
	console("selectIndyVarReq()\n");
	
	//  build a list_val request for the selected independent field
	var strFcstVarCrit = buildFcstVarCrit();
	var strFixCrit = buildFixCrit(_listFixDiv.length - 1);
	var selIndyVar = document.getElementById("selIndyVar");
	var strField = selIndyVar.options[selIndyVar.selectedIndex].text;
	console("  strField: " + strField + "\n  strFixCrit: " + strFixCrit + "\n");
	sendRequest("POST",
				"<list_val><id>0</id><" + _strPlotData + "_field>" + strField + "</" + _strPlotData + "_field>" + 
				strFcstVarCrit + strFixCrit + "</list_val>", 
				selectIndyVarResp); 	
	console("selectIndyVarReq() complete\n\n");
}
function selectIndyVarResp(strResp){
	console("selectIndyVarResp()\n  strResp: " + strResp + "\n");


	console("selectIndyVarResp() complete\n\n");
}

//--></script>

<div id="divDimScreen" class="dimScreen">&nbsp;</div>
<div id="divLoading" class="loading" align="center" onclick="javascript:dimScreen(false)">
	Loading...<br/><img src="include/loading_white.gif" style="padding-top:10px"/></div>

<table width="100%" height="100%" cellspacing="0" cellpadding="5" border="0">
	<tr><td class="title">METViewer</td></tr>
	<tr><td><hr/></td></tr>	
	<tr><td>	
		<!-- 
		<input type="text" id="txtPost"/>
		<input type="button" class="gButton" onclick="javascript:testPostReq()" value="Post"/><br/><br/>	
		<input type="text" id="txtGet"/>
		<input type="button" class="gButton" onclick="javascript:testGetReq()" value="Get"/><br/><br/>
		 -->
		 
		<span class="header">Database:</span>&nbsp;&nbsp;
		<select id="selDB"></select>
		<!-- <input type="button" class="gButton" onclick="javascript:listDBReq()" value="List"/> -->
		<input type="button" class="gButton" onclick="javascript:selectDBReq()" value="Connect"/>
		<span class="bold" style="padding-left:40px">Status:</span>
		<span id="spanDBStatus" class="bold"></span>
		<span style="padding-left:100px" class="bold">Plot Data:</span>
		<select id="selPlotData"><option>Stat</option><option>Mode</option></select><br/><br/><br/>
	</td></tr>
		
	<tr><td height="100%" style="vertical-align:top"><span id="spanPlotControls" style="display:none">
	
		<div id="divDep">
			<span class="header">Dependent Variables</span>
			<a class="stdTiny" style="padding-left:20px" onclick="javascript:serialize('divDep')">Serialize</a><br/><br/>
		
			<div id="divDep0">
				<table><tr>
					<td class="bold" style="padding-left:20px; padding-right: 10px; height: 70px">Forecast Variable:</td>
					<td>
						<table>
							<tr><td style="height:20px">&nbsp;</td></tr>
							<tr><td>
								<select id="selFcstVar0"></select>&nbsp;
								<input type="button" class="gButton" onclick="javascript:selectFcstVarReq(0)" value="Select"/><br/>
							</td></tr>
							<tr><td align="center">
								<input type="radio" name="radAxis0" checked="checked" /> y1-axis&nbsp;&nbsp;
		  						<input type="radio" name="radAxis0" /> y2-axis
							</td></tr>
						</table>						
					</td>
					<td>
						<span id="lblStat0" class="bold" style="padding-left:20px; padding-right: 10px; display:none">Statistic:</span>
						<select id="selStat0" multiple="multiple" style="vertical-align:middle; min-width:100px; display:none" size="5"></select>&nbsp;&nbsp;
						<span style="display:none">
							<img src="include/sub_symbol.gif" style="padding-left:20px"/>&nbsp;&nbsp;
							<a class="link" onclick="javascript:removeDepVar(0)">Remove Dependent Variable</a>
						</span>
						<input type="hidden" value="0"/>
					</td>
				</tr></table>
			</div>
			
			<img id="imgDep" src="include/add_symbol.gif" style="padding-left:20px"/>&nbsp;&nbsp;
			<a class="link" onclick="javascript:addDep()">Add a Dependent Variable</a><br/><br/><br/>
		</div><br/><br/>
	
		<div id="divFix">
			<span class="header">Fixed Values</span>
			<a class="stdTiny" style="padding-left:20px" onclick="javascript:serialize('divFix')">Serialize</a><br/><br/>
		
			<div id="divFix0" style="display:none">				
				<span class="bold" style="padding-left:20px; padding-right:10px">Database Field:</span>
				<select id="selFix0"></select>&nbsp;
				<input type="button" class="gButton" onclick="javascript:selectFixVarReq(0)" value="Select"/>&nbsp;&nbsp;
				<select id="selFixVal0" multiple="multiple" style="vertical-align:middle; min-width:100px; display:none" size="5"></select>&nbsp;&nbsp;
				<img src="include/sub_symbol.gif" style="padding-left:20px"/>&nbsp;&nbsp;
				<a class="link" onclick="javascript:removeFixVar(0)">Remove Fixed Value</a>
				<input type="hidden" value="0"/><br/><br/>
			</div>
		
			<img id="imgFix" src="include/add_symbol.gif" style="padding-left:20px"/>&nbsp;&nbsp;
			<a class="link" onclick="javascript:addFixVar()">Add a Fixed Value</a><br/><br/><br/>
		</div><br/><br/>
		
		<div id="divIndy">
			<span class="header">Independent Variables</span>
			<a class="stdTiny" style="padding-left:20px" onclick="javascript:serialize('divIndy')">Serialize</a><br/><br/>
		
			<span class="bold" style="padding-left:20px; padding-right: 10px">Database Field:</span>
			<select id="selIndyVar"></select>&nbsp;
			<input type="button" class="gButton" onclick="javascript:selectIndyVarReq()" value="Select"/><br/><br/>
			
			<div id="divIndyVal0">
				<input type="checkbox" id="chkIndyVal0" value="test value" style="vertical-align:middle">Include</input>&nbsp;&nbsp;
				label: <input type="text" id="txtIndyLabel0" size="10"/>&nbsp;&nbsp;
				plot val: <input type="text" id="txtIndyPlotVal0" size="10"/><br/>
			</div>
		</div>
	
	</span>&nbsp;</td></tr>
	
	<tr><td>
		<b>Console:</b>
		<input type="button" class="gButton" onclick="javascript:dimScreen(true)" value="Dim"/>&nbsp;&nbsp;
		<input type="button" class="gButton" onclick="javascript:listValClearCacheReq()" value="Clear Val List Cache"/><br/>
		<textarea rows="20" cols="160" id="txtConsole"></textarea>
	</td></tr>

</table>


</body>
</html>
