var value_to_desc_map={BAGSS:"Bias-Corrected Gilbert Skill Score",AFSS:"Asymptotic Fractions Skill Score",UFSS:"Uniform Fractions Skill Score",F_RATE:"Forecast Rate",O_RATE:"Observation Rate",IQR:"Inter-quartile range",MAD:"Median Absolute Deviation",LODDS:"Log Odds Ratio",ORSS:"Odds Ratio Skill Score",EDS:"Extreme Dependency Score",SEDS:"Symmetric Extreme Dependency Score",EDI:"Extreme Dependency Index",SEDI:"Symmetric Extreme Dependency Index",solid:"1",dashed:"2",dotted:"3","dot-dash":"4","long dash":"5",
"long short":"6",normal:"1",bold:"2",italic:"3","bold italic":"4",greek:"5",ACPC_03:"3hr accumulation",ACPC_06:"6hr accumulation",ACPC_24:"24hr accumulation",REFC:"Reflectivity",DPT:"Dew point temperature",HGT:"Height",TMP:"Temperature",PMSL:"Mean sea level pressure",UGRD:"U-Wind",VGRD:"V-Wind",UGRD_VGRD:"U and V-Wind",WIND:"Wind",SPFH:"Specific humidity",PWAT:"Precipital water",ACC:"Accuracy",BASER:"Base rate, aka Observed relative frequency",BCMSE:"Bias-corrected mean squared error",BCRMSE:"Bias-corrected root mean square error",
CSI:"Critical success index, aka Threat score",E10:"10th percentile of the error",E25:"25th percentile of the error",E50:"50th percentile of the error",E75:"75th percentile of the error",E90:"90th percentile of the error",ESTDEV:"Standard deviation of the error",FAR:"False alarm ratio",FBAR:"Forecast mean",FBIAS:"Bias, aka Frequency bias",FMEAN:"Forecast mean",FSTDEV:"Forecast standard deviation",GSS:"Gilbert skill score, aka Equitable threat score",HK:"Hanssen Kuipers Discriminant",HSS:"Heidke skill score",
KT_CORR:"Kendall Tau Rank Correlation Coefficient",MAE:"Mean absolute error",MBIAS:"Multiplicative Bias",ME:"Mean error, aka Additive bias",MSE:"Mean squared error",OBAR:"Observation Mean",ODDS:"Odds Ratio",OSTDEV:"Observation Standard Deviation",PODN:"Probability of Detecting No",PODY:"Probability of Detecting Yes",POFD:"Probability of false detection",PR_CORR:"Pearson's Correlation Coefficient",RMSE:"Root-mean squared error",SP_CORR:"Spearman's Rank Correlation Coefficient",MCTS_ACC:"Multi-category: Accuracy",
MCTS_GER:"Multi-category: Gerrity score",MCTS_HK:"Multi-category: Hanssen Kuipers Discrim",MCTS_HSS:"Multi-category: Heidke skill score",NBR_ACC:"Nbrhd methods: Accuracy",NBR_BASER:"Nbrhd base rate",NBR_CSI:"Nbrhd critical success index",NBR_FAR:"Nbrhd false alarm rate",NBR_FBIAS:"Nbrhd frequesncy bias",NBR_FBS:"Nbrhd methods cont: Fract brier score",NBR_FMEAN:"Nbrhd forecast mean",NBR_FSS:"Nbrhd methods cont: Fract skill score",NBR_GSS:"Nbrhd Gilbert skill score",NBR_HK:"Nbrhd Hanssen Kuipers discrim",
NBR_HSS:"Nbrhd Heidke skill score",NBR_ODDS:"Nbrhd odds ratio",NBR_PODN:"Nbrhd prob of detecting no",NBR_PODY:"Nbrhd prob of detecting yes",NBR_POFD:"Nbrhd prob of false detecting",ACOV:"Sum of area divided by total",CNT:"Count of object_id",CNTSUM:"Count of object_id",CENTX:"Centroid X in grid-units",CENTY:"Centroid Y in grid-units",CENTLAT:"Centroid lat",CENTLON:"Centroid lon",AXAVG:"Axis average",LEN:"Length",WID:"Width",ASPECT:"Aspect",AREA:"Area",AREAFIL:"Area filter",AREATHR:"Area threshold",
CURV:"Curvature",CURVX:"Curvature X",CURVY:"Curvature Y",CPLX:"Complexity",INT10:"Intensity 10th percentile",INT25:"Intensity 25th percentile",INT50:"Intensity 50th percentile",INT75:"Intensity 75th percentile",INT90:"Intensity 90th percentile",INTN:"Intensity designed for use in PERCINTRATIO",INTSUM:"Intensity sum",RATIO_FSA_ASA:"% of simple objects that are forecast",RATIO_OSA_ASA:"% of simple objects that are observation",RATIO_ASM_ASA:"% of simple objects that are matched",RATIO_ASU_ASA:"% of simple objects that are unmatched",
RATIO_FSM_FSA:"% of simple forecast objects that are matched",RATIO_FSU_FSA:"% of simple forecast objects that are unmatched",RATIO_OSM_OSA:"% of simple simple observation objects that are matched",RATIO_OSU_OSA:"% of simple simple observation objects that are unmatched",RATIO_FSM_ASM:"% of simple matched objects that are forecasts",RATIO_OSM_ASM:"% of simple matched objects that are observations",RATIO_FSU_ASU:"% of simple unmatched objects that are forecast",RATIO_OSU_ASU:"% of simple unmatched objects that are observation",
RATIO_ASA_AAA:"% of all objects that are simple",RATIO_ACA_AAA:"% of all objects that are cluster",RATIO_FSA_AAA:"What is",RATIO_OSA_AAA:"What is",RATIO_FSA_FAA:"% of all forecast objects that are simple",RATIO_FCA_FAA:"% of all forecast objects that are cluster",RATIO_OSA_OAA:"% of all observation objects that are simple",RATIO_OCA_OAA:"% of all observation objects that are cluster",RATIO_FCA_ACA:"% of cluster objects that are forecast",RATIO_OCA_ACA:"% of cluster objects that are observation",RATIO_FSA_OSA:"Ratio of simple forecasts to simple observations [frequency bias]",
RATIO_OSA_FSA:"Ratio of simple observations to simple forecasts [1 / frequency bias]",RATIO_ACA_ASA:"Ratio of cluster objects to simple objects",RATIO_ASA_ACA:"Ratio of simple objects to cluster objects",RATIO_FCA_FSA:"Ratio of cluster forecast objects to simple forecast objects",RATIO_FSA_FCA:"Ratio of simple forecast objects to cluster forecast objects",RATIO_OCA_OSA:"Ratio of cluster observation objects to simple observation objects",RATIO_OSA_OCA:"Ratio of simple observation objects to cluster observation objects",
OBJHITS:"Hits =/2",OBJMISSES:"Misses = OSU",OBJFAS:"False Alarms = FSU",OBJCSI:"CSI = hits //2 + OSU + FSU]",OBJPODY:"PODY = hits //2 + OSU]",OBJFAR:"FAR = false alarms //2 + FSU]",OBJFBIAS:"FBIAS = RATIO_FSA_OSA = FSA / OSA",AREARAT_FSA_ASA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_ASA:"Area-weighted % of simple objects forecasted",AREARAT_ASM_ASA:"Area-weighted % of simple objects forecasted",AREARAT_ASU_ASA:"Area-weighted % of simple objects forecasted",AREARAT_FSM_FSA:"Area-weighted % of simple objects forecasted",
AREARAT_FSU_FSA:"Area-weighted % of simple objects forecasted",AREARAT_OSM_OSA:"Area-weighted % of simple objects forecasted",AREARAT_OSU_OSA:"Area-weighted % of simple objects forecasted",AREARAT_FSM_ASM:"Area-weighted % of simple objects forecasted",AREARAT_OSM_ASM:"Area-weighted % of simple objects forecasted",AREARAT_FSU_ASU:"Area-weighted % of simple objects forecasted",AREARAT_OSU_ASU:"Area-weighted % of simple objects forecasted",AREARAT_FSA_AAA:"Area-weighted % of simple objects forecasted",
AREARAT_OSA_AAA:"Area-weighted % of simple objects forecasted",AREARAT_FSA_FAA:"Area-weighted % of simple objects forecasted",AREARAT_FCA_FAA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_OAA:"Area-weighted % of simple objects forecasted",AREARAT_OCA_OAA:"Area-weighted % of simple objects forecasted",AREARAT_FCA_ACA:"Area-weighted % of simple objects forecasted",AREARAT_OCA_ACA:"Area-weighted % of simple objects forecasted",AREARAT_FSA_OSA:"Area-weighted % of simple objects forecasted",
AREARAT_OSA_FSA:"Area-weighted % of simple objects forecasted",AREARAT_ACA_ASA:"Area-weighted % of simple objects forecasted",AREARAT_ASA_ACA:"Area-weighted % of simple objects forecasted",AREARAT_FCA_FSA:"Area-weighted % of simple objects forecasted",AREARAT_FSA_FCA:"Area-weighted % of simple objects forecasted",AREARAT_OCA_OSA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_OCA:"Area-weighted % of simple objects forecasted",CENTDIST:"Centroid distance",BOUNDDIST:"Boundry distance",HULLDIST:"Convex hull distance",
ANGLEDIFF:"Angle difference",AREARATIO:"Area ratio",INTAREA:"Intersection area",UNIONAREA:"Union area",SYMDIFF:"Symmetric difference or non-intersecting area",INTOVERAREA:"Ratio of intersection area to union area",CMPLXRATIO:"Complexity ratio",PERCINTRATIO:"Ratio of intensity at percentile defined by INTNN",INT:"Interest",MAXINT:"Maximun interest",MAXINTF:"Maximun interest for forecast objects",MAXINTO:"Maximun interest for observation objects",PSTD_BSS_SMPL:"Sample Brier skill score",PSTD_BSS:"Brier skill score"},
listStatModelRatio="RATIO_FSA_ASA RATIO_OSA_ASA RATIO_ASM_ASA RATIO_ASU_ASA RATIO_FSM_FSA RATIO_FSU_FSA RATIO_OSM_OSA RATIO_OSU_OSA RATIO_FSM_ASM RATIO_OSM_ASM RATIO_FSU_ASU RATIO_OSU_ASU RATIO_FSA_AAA RATIO_OSA_AAA RATIO_FSA_FAA RATIO_FCA_FAA RATIO_OSA_OAA RATIO_OCA_OAA RATIO_FCA_ACA RATIO_OCA_ACA RATIO_FSA_OSA RATIO_OSA_FSA RATIO_ACA_ASA RATIO_ASA_ACA RATIO_FCA_FSA RATIO_FSA_FCA RATIO_OCA_OSA RATIO_OSA_OCA OBJHITS OBJMISSES OBJFAS OBJCSI OBJPODY OBJFAR AREARAT_FSA_ASA AREARAT_OSA_ASA AREARAT_ASM_ASA AREARAT_ASU_ASA AREARAT_FSM_FSA AREARAT_FSU_FSA AREARAT_OSM_OSA AREARAT_OSU_OSA AREARAT_FSM_ASM AREARAT_OSM_ASM AREARAT_FSU_ASU AREARAT_OSU_ASU AREARAT_FSA_AAA AREARAT_OSA_AAA AREARAT_FSA_FAA AREARAT_FCA_FAA AREARAT_OSA_OAA AREARAT_OCA_OAA AREARAT_FCA_ACA AREARAT_OCA_ACA AREARAT_FSA_OSA AREARAT_OSA_FSA AREARAT_ACA_ASA AREARAT_ASA_ACA AREARAT_FCA_FSA AREARAT_FSA_FCA AREARAT_OCA_OSA AREARAT_OSA_OCA OBJAHITS OBJAMISSES OBJAFAS OBJACSI OBJAPODY OBJAFAR".split(" "),
listStatModeSingle="ACOV CNT CNTSUM CENTX CENTY CENTLAT CENTLON AXAVG LEN WID ASPECT AREA AREAFIL AREATHR CURV CURVX CURVY CPLX INT10 INT25 INT50 INT75 INT90 INTN INTSUM".split(" "),listStatModePair="CENTDIST BOUNDDIST HULLDIST ANGLEDIFF AREARATIO INTAREA UNIONAREA SYMDIFF INTOVERAREA CMPLXRATIO PERCINTRATIO INT MAXINT MAXINTF MAXINTO".split(" "),listStatMode=listStatModeSingle.concat(listStatModePair),series_var_value_to_title_stat_map={model:"MODEL",descr:"DESC",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",
valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH"},fix_var_value_to_title_stat_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",
fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH"},fix_var_value_to_title_mode_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_valid:"FCST_VALID",valid_hour:"VALID_HOUR",fcst_init:"FCST_INIT",init_hour:"INIT_HOUR",fcst_accum:"FCST_ACCUM",fcst_rad:"FCST_RAD",fcst_thr:"FCST_THR",fcst_lev:"FCST_LEV"},indy_var_value_to_title_stat_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_lev:"FCST_LEV",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",
fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",interp_pnts:"INTERP_PNTS",vx_mask:"VX_MASK"},indy_var_value_to_title_mode_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_lev:"FCST_LEV",fcst_thr:"FCST_THR",fcst_valid:"FCST_VALID",valid_hour:"VALID_HOUR",fcst_init:"FCST_INIT",init_hour:"INIT_HOUR",fcst_rad:"FCST_RAD",vx_mask:"VX_MASK"},phist_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",
init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",n_bin:"N_BIN"},rhist_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",
obs_thresh:"OBS_THRESH",n_rank:"N_RANK"},relp_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",n_ens:"N_ENS"},fcst_var_y1_indexes=[1],series_var_y1_indexes=[1],fcst_var_y2_indexes=[],series_var_y2_indexes=[],fixed_var_indexes=
[],date_period_indexes=[1],firstSeriesFormatting={order:"1",hide:"No",plot_ci:"none",color:"",pch:20,type:"b",lty:"1",lwd:"1",show_signif:"No",con_series:"1",legend:"",id:"1"},seriesDiffY1=[],seriesDiffY2=[],previousIndVarValResponse,fixVarValResponse={},seriesY1VarValResponse={},seriesY2VarValResponse={},xml='<?xml version="1.0"?><Request/>',group_name_to_value_map,indy_var_vals_to_attr,fcst_vars=[],fcst_vars_stats=[];
function cleanUp(){fcst_var_y1_indexes=[1];series_var_y1_indexes=[1];fcst_var_y2_indexes=[];series_var_y2_indexes=[];fixed_var_indexes=[];date_period_indexes=[1];seriesDiffY1=[];seriesDiffY2=[];previousIndVarValResponse=null;fixVarValResponse={};seriesY1VarValResponse={};seriesY2VarValResponse={};group_name_to_value_map=null;fcst_vars=[];fcst_vars_stats=[]}
function isModeStat(a){if(0<=$.inArray(a,listStatModelRatio))return!0;a=a.split("_");return 2==a.length?0<=$.inArray(a[0],listStatMode)||"ACOVACOV"==a[0]?!0:!1:!1}
function getForecastVariablesHist(){var a=$("#database").multiselect("getChecked").val();$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,data:"<request><db_con>"+a+"</db_con><list_val><id>0</id><stat_field>FCST_VAR</stat_field></list_val></request>",error:function(a,b,d){},success:function(a){a=$(a).find("val");for(var b=0;b<a.length;b++)fcst_vars.push($(a[b]).text())}});var b="TMP";0<fcst_vars.length&&(b=fcst_vars[0]);$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",
processData:!1,data:"<request><db_con>"+a+"</db_con><list_stat><id>0</id><stat_fcst_var>"+b+"</stat_fcst_var></list_stat></request>",error:function(a,b,d){},success:function(a){a=$(a).find("val");for(var b=0;b<a.length;b++)fcst_vars_stats.push($(a[b]).text())}})}function getSelectedDatabases(){for(var a=$("#database").multiselect("getChecked"),b="",c=0;c<a.length;c++)b=b+a[c].value+",";return b=b.slice(0,-1)}
function updateForecastVariables(){var a;$("#listdt").jqGrid("clearGridData");(selected_mode=$("#plot_data").multiselect("getChecked").val())||(selected_mode="stat");var b=$("#fcst_var_y1_1"),c=$("#fcst_var_y2_1");a=$("#indy_var_val");b.empty();try{b.multiselect("refresh")}catch(d){}c.empty();try{c.multiselect("refresh")}catch(d){}a.empty();try{a.multiselect("refresh")}catch(d){}for(a=1;a<fcst_var_y1_indexes.length;a++)removeFcstVar("fcst_var_y1_"+fcst_var_y1_indexes[a]);for(a=0;a<fcst_var_y2_indexes.length;a++)removeFcstVar("fcst_var_y2_"+
fcst_var_y2_indexes[a]);for(a=1;a<series_var_y1_indexes.length;a++)removeSeriesVar("series_var_y1_"+series_var_y1_indexes[a]);for(a=0;a<series_var_y2_indexes.length;a++)removeSeriesVar("series_var_y2_"+series_var_y2_indexes[a]);var e=fixed_var_indexes.slice();for(a=0;a<e.length;a++)removeFixedVar("fixed_var_"+e[a]);$("#group_series_var_y1_1").prop("checked",!1);a=getSelectedDatabases();$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,data:"<request><db_con>"+a+"</db_con><list_val><id>0</id><"+
selected_mode+"_field>FCST_VAR</"+selected_mode+"_field></list_val></request>",error:function(){},success:function(a){var e=$(a).find("val"),g;if(0<e.length){a=[];for(var h=0;h<e.length;h++)g=$(e[h]),0==h||0!=h&&g.text()!==$(e[h-1]).text()?(g=$("<option />",{value:g.text(),text:g.text(),title:value_to_desc_map[g.text()]}),a.push(g)):0!=h&&g.text()===$(e[h-1]).text()&&a[a.length-1].text(a[a.length-1].text()+"*");g=$("#database").multiselect("getChecked").length-1;for(h=0;h<a.length;h++)a[h].text()!==
a[h][0].value&&(e=a[h].text().substring(a[h][0].value.length,a[h].text().length).length,e===g?a[h].text(a[h][0].value+"*"):a[h].text(a[h][0].value)),a[h].appendTo(b),a[h].clone().appendTo(c)}else g=$("<option />",{value:"N/A",text:"N/A"}),g.appendTo(b),g.clone().appendTo(c);try{b.multiselect("refresh")}catch(l){}try{c.multiselect("refresh")}catch(l){}}})}
function updateMode(a,b,c){var e=$("#fcst_stat_"+a+"_"+b);e.empty();var d,f,g;try{d=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(r){d=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}var h;for(f=0;f<listStatModelRatio.length;f++)g=listStatModelRatio[f],h=$.isArray(c)?0<=$.inArray(g,c):g==c,g=$("<option />",{value:g,text:g,title:value_to_desc_map[g],selected:h}),g.appendTo(e);try{e.multiselect("option","noneSelectedText","Select ratio stat"),e.multiselect("refresh")}catch(r){}var l=
$("#fcst_stat_mode_"+a+"_"+b),k="",n="";0<c.length&&2==c.split("_").length&&(k=c.split("_")[0],n=c.split("_")[1]);"ACOVACOV"==k&&(k="ACOV");c=!1;var t=0==l.find("option").length;if(!t)try{l.multiselect("destroy")}catch(r){}for(f=0;f<listStatMode.length;f++)g=listStatMode[f],(h=g==k)&&(c=!0),t?(g=$("<option />",{value:g,text:g,title:value_to_desc_map[g],selected:h}),g.appendTo(l)):h&&l.val(g);l.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:225,height:300,noneSelectedText:"Select attribute stat",
allUnselected:!c,click:function(a,b){var c=this.id.split("_");$("#fcst_stat_"+c[c.length-2]+"_"+c[c.length-1]+" option").removeAttr("selected");try{$("#fcst_stat_"+c[c.length-2]+"_"+c[c.length-1]).multiselect("refresh")}catch(e){}c=$("#fcst_stat_mode_config_"+c[c.length-2]+"_"+c[c.length-1]);c.css("display","block");"ACOV"==b.value?c.find(".non-acov").attr("disabled",!0):c.find(".non-acov").removeAttr("disabled");-1<listStatModePair.indexOf(b.value)?c.find(".non-pair").attr("disabled",!0):c.find(".non-pair").removeAttr("disabled");
$("input[name=statistics][value=calculations_statistics]").prop("checked",!0);$("#calc_stat").val("none");try{$("#calc_stat").multiselect("refresh")}catch(e){}$("#aggregation_statistics ").hide();$("#calculations_statistics ").show();updateSeries()}});c&&(f=$("#fcst_stat_mode_config_"+a+"_"+b),f.css("display","block"),"ACOV"==k?f.find(".non-acov").attr("disabled",!0):f.find(".non-acov").removeAttr("disabled"),2==n.length&&(n="A"+n),"ACOV"==k?"A"==n[0]?(f.find('[name="mode_stat_fcst"]').prop("checked",
!0),f.find('[name="mode_stat_obs"]').prop("checked",!0)):"F"==n[0]?(f.find('[name="mode_stat_fcst"]').prop("checked",!0),f.find('[name="mode_stat_obs"]').prop("checked",!1)):"O"==n[0]&&(f.find('[name="mode_stat_fcst"]').prop("checked",!1),f.find('[name="mode_stat_obs"]').prop("checked",!0)):("D"==n[0]?f.find('[name="mode_stat_diff"]').prop("checked",!0):"A"==n[0]?(f.find('[name="mode_stat_diff"]').prop("checked",!1),f.find('[name="mode_stat_fcst"]').prop("checked",!0),f.find('[name="mode_stat_obs"]').prop("checked",
!0)):"F"==n[0]?(f.find('[name="mode_stat_diff"]').prop("checked",!1),f.find('[name="mode_stat_fcst"]').prop("checked",!0),f.find('[name="mode_stat_obs"]').prop("checked",!1)):"O"==n[0]&&(f.find('[name="mode_stat_diff"]').prop("checked",!1),f.find('[name="mode_stat_fcst"]').prop("checked",!1),f.find('[name="mode_stat_obs"]').prop("checked",!0)),"A"==n[1]?(f.find('[name="mode_stat_simple"]').prop("checked",!0),f.find('[name="mode_stat_cluster"]').prop("checked",!0)):"S"==n[1]?(f.find('[name="mode_stat_simple"]').prop("checked",
!0),f.find('[name="mode_stat_cluster"]').prop("checked",!1)):"C"==n[1]&&(f.find('[name="mode_stat_simple"]').prop("checked",!1),f.find('[name="mode_stat_cluster"]').prop("checked",!0)),"A"==n[2]?(f.find('[name="mode_stat_matched"]').prop("checked",!0),f.find('[name="mode_stat_unmatched"]').prop("checked",!0)):"M"==n[2]?(f.find('[name="mode_stat_matched"]').prop("checked",!0),f.find('[name="mode_stat_unmatched"]').prop("checked",!1)):"U"==n[2]&&(f.find('[name="mode_stat_matched"]').prop("checked",
!1),f.find('[name="mode_stat_unmatched"]').prop("checked",!0))),-1<listStatModePair.indexOf(k)?f.find(".non-pair").attr("disabled",!0):f.find(".non-pair").removeAttr("disabled"));if("N/A"==d){try{e.multiselect("disable")}catch(r){}try{l.multiselect("disable")}catch(r){}}else{try{e.multiselect("enable")}catch(r){}try{l.multiselect("enable")}catch(r){}}e=$("#series_var_"+a+"_"+b);e.empty();$.each(fix_var_value_to_title_mode_map,function(a,b){e.append('<option value="'+a+'">'+b+"</option>")});try{e.multiselect("refresh")}catch(r){}}
function updateStats(a,b,c){var e=$("#fcst_stat_"+a+"_"+b),d=$("#fcst_stat_mode_"+a+"_"+b),f=$("#plot_data").multiselect("getChecked").val(),g=getSelectedDatabases(),h;try{h=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(k){h=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}if("stat"==f){e.empty();try{d.multiselect("destroy")}catch(k){}d.css("display","none");$("#fcst_stat_mode_config_"+a+"_"+b).css("display","none");try{e.multiselect("option","noneSelectedText","Select attribute stat")}catch(k){e.prop("disabled",
"disabled")}}else{try{d.multiselect("enable")}catch(k){d.prop("disabled","")}try{e.multiselect("option","noneSelectedText","Select ratio stat")}catch(k){e.prop("disabled","disabled")}}if("N/A"==h)try{e.multiselect("disable")}catch(k){e.prop("disabled","disabled")}else{try{e.multiselect("enable")}catch(k){e.prop("disabled","")}$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",data:"<request><db_con>"+g+"</db_con><list_stat><id>0</id><stat_fcst_var>"+h+"</stat_fcst_var></list_stat></request>",
error:function(){},success:function(a){var b=$(a).find("val"),d;a=[];if(0<b.length){for(var f=0;f<b.length;f++){var g=$(b[f]);d=0<=$.inArray(g.text(),c);0==f||0!=f&&g.text()!==$(b[f-1]).text()?(d=$("<option />",{value:g.text(),text:g.text(),title:value_to_desc_map[g.text()],selected:d}),a.push(d)):0!=f&&g.text()===$(b[f-1]).text()&&a[a.length-1].text(a[a.length-1].text()+"*")}d=$("#database").multiselect("getChecked").length-1;for(f=0;f<a.length;f++)a[f].text()!==a[f][0].value&&(b=a[f].text().substring(a[f][0].value.length,
a[f].text().length).length,b===d?a[f].text(a[f][0].value+"*"):a[f].text(a[f][0].value)),a[f].appendTo(e)}else d=$("<option />",{value:"N/A",text:"N/A"}),d.appendTo(e);try{e.multiselect("refresh")}catch(h){}c=[]}})}var l=$("#series_var_"+a+"_"+b);l.empty();$.each(series_var_value_to_title_stat_map,function(a,b){l.append('<option value="'+a+'">'+b+"</option>")});try{l.multiselect("refresh")}catch(k){}}
function updateSeriesVarValEns(a,b){$("#listdt").jqGrid("clearGridData");var c=$("#series_var_val_y1_"+a);c.empty();var e=getSelectedDatabases(),d;try{d=$("#series_var_y1_"+a).multiselect("getChecked").val()}catch(f){d=$("#series_var_y1_"+a+" option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",data:"<request><db_con>"+e+"</db_con><list_val><id>0</id><ensss_field>"+d+'</ensss_field><stat><fcst_var name="TMP"></fcst_var></stat></list_val></request>',error:function(){},success:function(e){seriesY1VarValResponse[a]=
e;var d=$($.parseXML(e)).find("val"),h;e=[];if(0<d.length){for(var l=0;l<d.length;l++){var k=$(d[l]);h=0<=$.inArray(k.text(),b);0==l||0!=l&&k.text()!==$(d[l-1]).text()?(h=$("<option />",{value:k.text(),text:k.text(),selected:h}),e.push(h)):0!=l&&k.text()===$(d[l-1]).text()&&e[e.length-1].text(e[e.length-1].text()+"*")}h=$("#database").multiselect("getChecked").length-1;for(l=0;l<e.length;l++)e[l].text()!==e[l][0].value&&(d=e[l].text().substring(e[l][0].value.length,e[l].text().length).length,d===
h?e[l].text(e[l][0].value+"*"):e[l].text(e[l][0].value)),e[l].appendTo(c)}else h=$("<option />",{value:"N/A",text:"N/A"}),h.appendTo(c);try{c.multiselect("refresh")}catch(n){}b=[]}})}
function updateSeriesVarVal(a,b,c){var e=$("#series_var_val_"+a+"_"+b);e.empty();var d=getSelectedDatabases(),f,g;"Perf"==currentTab?(f="stat",g="<stat></stat>"):(f="Taylor"==currentTab?"taylor":$("#plot_data").multiselect("getChecked").val(),g=convertVarsAndStatsToXml());var h;try{h=$("#series_var_"+a+"_"+b).multiselect("getChecked").val()}catch(l){h=$("#series_var_"+a+"_"+b).find("option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",data:"<request><db_con>"+d+"</db_con><list_val><id>0</id><"+
f+"_field>"+h+"</"+f+"_field>"+g+"</list_val></request>",error:function(){},success:function(d){"y1"===a?seriesY1VarValResponse[b]=d:seriesY2VarValResponse[b]=d;var f=$($.parseXML(d)).find("val"),g;d=[];if(0<f.length){for(var h=0;h<f.length;h++){var r=$(f[h]);g="string"==$.type(c)?r.text()==c:0<=$.inArray(r.text(),c);0==h||0!=h&&r.text()!==$(f[h-1]).text()?(g=$("<option />",{value:r.text(),text:r.text(),selected:g}),d.push(g)):0!=h&&r.text()===$(f[h-1]).text()&&d[d.length-1].text(d[d.length-1].text()+
"*")}g=$("#database").multiselect("getChecked").length-1;for(h=0;h<d.length;h++)d[h].text()!==d[h][0].value&&(f=d[h].text().substring(d[h][0].value.length,d[h].text().length).length,f===g?d[h].text(d[h][0].value+"*"):d[h].text(d[h][0].value)),d[h].appendTo(e)}else g=$("<option />",{value:"N/A",text:"N/A"}),g.appendTo(e);try{e.multiselect("refresh")}catch(w){}1===c.length&&-1!==c[0].indexOf(",")&&$("#group_series_var_"+a+"_"+b).prop("checked",!0);c=[]}})}
function updateFixedVarValHist(a,b){var c=$("#fixed_var_val_"+a);c.empty();var e=getSelectedDatabases(),d;try{d=$("#fixed_var_"+a).multiselect("getChecked").val()}catch(g){d=$("#fixed_var_"+a+" option:first-child").val()}var f;"Hist"===currentTab?f=$("input:radio[name='hist_line_type']:checked").val():"Roc"===currentTab?f="roc":"Eclv"===currentTab?f="eclv":"Rely"===currentTab?f="rely":"Ens_ss"===currentTab?f="ensss":"Perf"===currentTab?f="perf":"Taylor"===currentTab&&(f="taylor");$.ajax({async:!1,
url:"servlet",type:"POST",dataType:"xml",data:"<request><db_con>"+e+"</db_con><list_val><id>0</id><"+f+"_field>"+d+"</"+f+"_field></list_val></request>",error:function(){},success:function(d){fixVarValResponse[a]=d;var e=$(d).find("val"),f;if(0<e.length){d=[];for(var k=0;k<e.length;k++){var n=$(e[k]);f=0<=$.inArray(n.text(),b);0==k||0!=k&&n.text()!==$(e[k-1]).text()?(f=$("<option />",{value:n.text(),text:n.text(),selected:f}),d.push(f)):0!=k&&n.text()===$(e[k-1]).text()&&d[d.length-1].text(d[d.length-
1].text()+"*")}f=$("#database").multiselect("getChecked").length-1;for(k=0;k<d.length;k++)d[k].text()!==d[k][0].value&&(e=d[k].text().substring(d[k][0].value.length,d[k].text().length).length,e===f?d[k].text(d[k][0].value+"*"):d[k].text(d[k][0].value)),d[k].appendTo(c)}else f=$("<option />",{value:"N/A",text:"N/A"}),f.appendTo(c);try{c.multiselect("refresh")}catch(t){}b=[]}})}
function updateFixedVarVal(a,b,c){c&&"false"===c&&$("#fix_var_event_equal_"+a).prop("checked",!1);var e=$("#fixed_var_val_"+a);e.empty();c=getSelectedDatabases();var d,f,g;"Perf"==currentTab?(f="stat",g="<stat><fcst_var><val>FAR</val></fcst_var></stat>"):"Eclv"==currentTab?(f="stat",g="<stat><fcst_var><val>NA</val></fcst_var></stat>"):(f="Taylor"==currentTab?"taylor":$("#plot_data").multiselect("getChecked").val(),g=convertVarsAndStatsToXml());try{d=$("#fixed_var_"+a).multiselect("getChecked").val()}catch(h){d=
$("#fixed_var_"+a+" option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",data:"<request><db_con>"+c+"</db_con><list_val><id>0</id><"+f+"_field>"+d+"</"+f+"_field>"+g+"</list_val></request>",error:function(){try{e.multiselect("refresh")}catch(a){}},success:function(c){fixVarValResponse[a]=c;var d=$(c).find("val"),f;c=[];if(0<d.length){for(var g=0;g<d.length;g++){var t=$(d[g]);f=0<=$.inArray(t.text(),b);0==g||0!=g&&t.text()!==$(d[g-1]).text()?(f=$("<option />",{value:t.text(),
text:t.text(),selected:f}),c.push(f)):0!=g&&t.text()===$(d[g-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}f=$("#database").multiselect("getChecked").length-1;for(g=0;g<c.length;g++)c[g].text()!==c[g][0].value&&(d=c[g].text().substring(c[g][0].value.length,c[g].text().length).length,d===f?c[g].text(c[g][0].value+"*"):c[g].text(c[g][0].value)),c[g].appendTo(e)}else f=$("<option />",{value:"N/A",text:"N/A"}),f.appendTo(e);try{e.multiselect("refresh")}catch(r){}b=[]}})}
function populateIndyVarVal(a){var b=getSelectedDatabases(),c,e,d;"Perf"==currentTab?(e="stat",d="<stat><fcst_var ><val>FAR</val></fcst_var></stat>"):(e=$("#plot_data").multiselect("getChecked").val(),d=convertVarsAndStatsToXml());try{c=$("#indy_var").multiselect("getChecked").val()}catch(f){c=$("#indy_var option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",data:"<request><db_con>"+b+"</db_con><list_val><id>0</id><"+e+"_field>"+c+"</"+e+"_field>"+d+"</list_val></request>",
error:function(){},success:function(b){var c=$(b).find("val");if(b!=previousIndVarValResponse){previousIndVarValResponse=b;b=$("#indy_var_val");var d=$('[name="multiselect_indy_var_val"]');if(d&&0<d.length){indy_var_vals_to_attr={};for(var e=0;e<d.length;e++){var k={},n=$(d[e]).attr("id");k.label=$("#"+n+"_label").val();k.plot_val=$("#"+n+"_plot_val").val();indy_var_vals_to_attr[d[e].value]=k}}$("#indy_var_val").multiselect("option","indy_var_vals_to_attr",indy_var_vals_to_attr);b.empty();k=[];if(0<
c.length){for(e=0;e<c.length;e++){var t=$(c[e]),n=0<=$.inArray(t.text(),a);0==e||0!=e&&t.text()!==$(c[e-1]).text()?(n=$("<option />",{value:t.text(),text:t.text(),selected:n,class:"indy-var-option"}),k.push(n)):0!=e&&t.text()===$(c[e-1]).text()&&k[k.length-1].text(k[k.length-1].text()+"*")}n=$("#database").multiselect("getChecked").length-1;for(e=0;e<k.length;e++)k[e].text()!==k[e][0].value&&(c=k[e].text().substring(k[e][0].value.length,k[e].text().length).length,c===n?k[e].text(k[e][0].value+"*"):
k[e].text(k[e][0].value)),k[e].appendTo(b);try{b.multiselect("refresh"),d&&0<d.length||$("#indy_var_val").multiselect("option","indy_var_vals_to_attr",null)}catch(r){}}else{n=$("<option />",{value:"N/A",text:"N/A"});n.appendTo(b);try{b.multiselect("refresh")}catch(r){}}}}})}
function convertVarsAndStatsToXml(){var a="<stat>",b,c;for(c=0;c<fcst_var_y1_indexes.length;c++)b=convertVarAndStatsForAxisToXml("y1",fcst_var_y1_indexes[c]),a+=b;for(c=0;c<fcst_var_y2_indexes.length;c++)b=convertVarAndStatsForAxisToXml("y2",fcst_var_y2_indexes[c]),a+=b;return a+"</stat>"}
function convertVarAndStatsForAxisToXml(a,b){var c;try{c=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(f){c=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}c='<fcst_var name="'+c+'" >';var e=$("#fcst_stat_"+a+"_"+b).val();if(e)for(var d=0;d<e.length;d++)c=c+"<val>"+e[d]+"</val>";return c+"</fcst_var>"}
function createStatNameForModeArrt(a,b,c){c=$("#fcst_stat_mode_config_"+b+"_"+c);var e=c.find('[name="mode_stat_diff"]').is(":checked"),d=c.find('[name="mode_stat_fcst"]').is(":checked"),f=c.find('[name="mode_stat_obs"]').is(":checked");b="_";-1<listStatModeSingle.indexOf(a)&&(b=e?b+"D":d&&f?b+"A":d?b+"F":f?b+"O":b+"A");a.startsWith("ACOV")?b=a+b+"SA":(e=c.find('[name="mode_stat_simple"]').is(":checked"),d=c.find('[name="mode_stat_cluster"]').is(":checked"),b=e&&d?b+"A":e?b+"S":d?b+"C":b+"A",e=c.find('[name="mode_stat_matched"]').is(":checked"),
c=c.find('[name="mode_stat_unmatched"]').is(":checked"),b=a+(e&&c?b+"A":e?b+"M":c?b+"U":b+"A"));return b}
function createMapForForecastVar(a,b,c){for(var e={},d,f=0;f<b.length;f++){var g=$("#fcst_var_y"+a+"_"+b[f]).val();e.hasOwnProperty(g)||(e[g]=[]);var h=$("#fcst_stat_y"+a+"_"+b[f]).val();if(null!=h)for(var l=0;l<h.length;l++)d="mode"===c&&-1===listStatModelRatio.indexOf(h[l])?createStatNameForModeArrt(h[l],"y"+a,b[f]):h[l],e[g].push(d);else"mode"===c&&(h=$("#fcst_stat_mode_y"+a+"_"+b[f]).val(),null!=h&&(d=createStatNameForModeArrt(h,"y"+a,b[f]),e[g].push(d)))}return e}
function createSeriesMapForPermutation(a,b){for(var c={},e,d,f,g=a.length-1;0<=g;g--){var h=[];d=$("#series_var_"+b+"_"+a[g]).multiselect("getChecked")[0].value;f=$("#group_series_var_"+b+"_"+a[g]).is(":checked");try{e=$("#series_var_val_"+b+"_"+a[g]).multiselect("getChecked")}catch(k){e=[]}for(var l=0;l<e.length;l++)h.push(e[l].value);f&&(f="Group_"+b+"_"+a[g],group_name_to_value_map[f]=h,h=[f]);f=c[d];void 0!==f&&(h=h.concat(f));c[d]=h}return c}
function createSeriesMapForPermutationEns(a,b){for(var c={},e,d,f=0;f<a.length;f++){var g=[];try{d=$("#series_var_"+b+"_"+a[f]).multiselect("getChecked")[0].value}catch(l){d=$("#series_var_"+b+"_"+a[f]).val()}try{e=$("#series_var_val_"+b+"_"+a[f]).multiselect("getChecked")}catch(l){e=[]}for(var h=0;h<e.length;h++)g.push(e[h].value);h=c[d];void 0!=h&&(g=h.concat(g));c[d]=g}return c}
function updateSeriesHist(){var a=$("#listdt");a.saveCell(lastSelRow,lastSelCol);var b=a.jqGrid("getRowData");a.jqGrid("clearGridData");var c,e=0,d={},f=$("#seriesLock").is(":checked"),g=[],h=[],l=[],k=[],n=[],t=[],r=[],w=[],v=[],x=[],y=[],B=[],q;"Hist"===currentTab?(c=$("input:radio[name='hist_line_type']:checked").val(),"rhist"===c?q="Rank Histogram":"phist"===c?q="Probability Histogram":"relp"===c&&(q="Relative Histogram")):"Roc"===currentTab?q="ROC Curve":"Rely"===currentTab?q="Reliability Curve":
"Taylor"===currentTab?q=$("#fcst_var_y1_1").val():"Eclv"===currentTab&&(q="Economic value");if(null!=initXML){for(var h=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),l=initXML.find("plot").find("plot_disp").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),k=initXML.find("plot").find("show_signif").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),m=0;m<l.length;m++)"TRUE"===l[m].trim()?l[m]="No":l[m]="Yes",
"TRUE"===k[m].trim()?k[m]="No":k[m]="Yes";n=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(m=0;m<n.length;m++)n[m]=n[m].replace(/FF$/,"");t=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");r=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");w=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");
v=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");B=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");y=initXML.find("plot").find("legend").text().replace("c(","").replace(/\)$/,"").replace(/"/g,"").split(",");if(y.length!=x.length)for(c=0;c<x.length;c++)y[c]=""}c=permuteSeries(createSeriesMapForPermutationEns(series_var_y1_indexes,
"y1"),0);var u;0==c.length&&(c[0]="");if("Roc"==currentTab||"Rely"==currentTab||"Eclv"==currentTab){try{u=$("#summary_curve").multiselect("getChecked")}catch(z){u=[]}for(m=0;m<u.length;m++)"none"!=u[m].value&&c.push(u[m].value)}for(var A=0;A<c.length;A++){u=c[A]+" "+q;for(var p=!1,m=0;m<b.length;m++)if(b[m].title==u){d={};d.title=u;d.y_axis="Y1";d.order=e+1;d.hide=b[m].hide;d.plot_ci=b[m].plot_ci;d.show_signif=b[m].show_signif;d.color=b[m].color;d.pch=b[m].pch;d.type=b[m].type;d.lty=b[m].lty;d.lwd=
b[m].lwd;d.con_series=b[m].con_series;d.legend=b[m].legend;d.id=e+1;p=!0;break}p||(f&&0<e&&null==initXML?(d=jQuery.extend(!0,{},g[g.length-1]),d.title=u,d.y_axis="Y1",d.id=e+1,d.order=e+1):null!=initXML?(d={},d.title=u,d.y_axis="Y1",d.order=x[e]&&""!=x[e]?parseInt(x[e]):parseInt(m+1),d.hide=l[e],d.plot_ci=h[e].trim(),d.show_signif=k[e],d.pch=t[e].trim(),d.type=B[e].trim(),d.lty=r[e].trim(),d.lwd=w[e].trim(),d.con_series=v[e].trim(),d.legend=y[e].trim(),d.color=n[e].trim(),d.id=e+1):(d=jQuery.extend(!0,
{},firstSeriesFormatting),d.title=u,d.y_axis="Y1",d.id=e+1,d.order=e+1));e++;g.push(d)}if(null==initXML)for(n=rainbow(g.length),m=0;m<g.length;m++)g[m].color=n[m];g.sort(SortByOrder);for(m=0;m<g.length;m++)a.jqGrid("addRowData",m+1,g[m]);outerLayout.sizePane("south",$("#gbox_listdt").height())}
function updateSeriesVarValHist(a,b){$("#listdt").jqGrid("clearGridData");var c=$("#series_var_val_y1_"+a);c.empty();var e=getSelectedDatabases(),d;try{d=$("#series_var_y1_"+a).multiselect("getChecked").val()}catch(g){d=$("#series_var_y1_"+a+" option:first-child").val()}var f;"Roc"===currentTab?f="roc":"Rely"===currentTab?f="rely":"Ens_ss"===currentTab?f="ensss":"Perf"===currentTab?f="perf":"Taylor"===currentTab?f="taylor":"Hist"===currentTab?f=$("input:radio[name='hist_line_type']:checked").val():
"Eclv"===currentTab&&(f="eclv");$.ajax({async:!1,url:"servlet",type:"POST",data:"<request><db_con>"+e+"</db_con><list_val><id>0</id><"+f+"_field>"+d+"</"+f+'_field><stat><fcst_var name="NA"><val>NA</val></fcst_var></stat></list_val></request>',error:function(){},success:function(d){seriesY1VarValResponse[a]=d;var e=$($.parseXML(d)).find("val"),f;d=[];if(0<e.length){for(var k=0;k<e.length;k++){var n=$(e[k]);f=0<=$.inArray(n.text(),b);0==k||0!=k&&n.text()!==$(e[k-1]).text()?(f=$("<option />",{value:n.text(),
text:n.text(),selected:f}),d.push(f)):0!=k&&n.text()===$(e[k-1]).text()&&d[d.length-1].text(d[d.length-1].text()+"*")}f=$("#database").multiselect("getChecked").length-1;for(k=0;k<d.length;k++)d[k].text()!==d[k][0].value&&(e=d[k].text().substring(d[k][0].value.length,d[k].text().length).length,e===f?d[k].text(d[k][0].value+"*"):d[k].text(d[k][0].value)),d[k].appendTo(c)}else f=$("<option />",{value:"N/A",text:"N/A"}),f.appendTo(c);try{c.multiselect("refresh")}catch(t){}b=[]}})}
function updateSeriesRely(){var a=$("input:radio[name='rely_event_hist']:checked").val(),b=$("#listdt");b.jqGrid("clearGridData");var c=jQuery.extend(!0,{},firstSeriesFormatting);c.title="Reliability Curve";c.y_axis="Y1";c.order=1;c.color="#333333";c.id=1;b.jqGrid("addRowData",1,c);"true"==a&&(c=jQuery.extend(!0,{},firstSeriesFormatting),c.title="Event Histogram",c.y_axis="Y1",c.order=2,c.color="#AAAAAA",c.id=2,c.type="h",c.lwd=50,b.jqGrid("addRowData",2,c))}
function updateSeriesEns(){var a=$("#listdt");a.saveCell(lastSelRow,lastSelCol);var b=a.jqGrid("getRowData");a.jqGrid("clearGridData");var c,e=0,d={},f=$("#seriesLock").is(":checked"),g=[],h,l=[],k=[],n=[],t=[],r=[],w=[],v=[],x=[],y=[],B=[],q=[];if(null!=initXML){for(var l=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),k=initXML.find("plot").find("plot_disp").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),n=initXML.find("plot").find("show_signif").text().replace("c(",
"").replace(")","").replace(/"/g,"").split(","),m=0;m<k.length;m++)"TRUE"==k[m].trim()?k[m]="No":k[m]="Yes","TRUE"==n[m].trim()?n[m]="No":n[m]="Yes";t=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(m=0;m<t.length;m++)t[m]=t[m].replace(/FF$/,"");r=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");w=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");
v=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");y=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");q=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");B=initXML.find("plot").find("legend").text().replace("c(","").replace(/\)$/,
"").replace(/"/g,"").split(",");if(B.length!=y.length)for(c=0;c<y.length;c++)B[c]=""}c=permuteSeries(createSeriesMapForPermutationEns(series_var_y1_indexes,"y1"),0);if("true"===$("input:radio[name='ensss_pts_disp']:checked").val()){h=[];for(var u=0,m=0;m<c.length;m++)h[u]=c[m]+" MSE",h[u+1]=c[m]+" #PTS",u+=2;c=h}else for(m=0;m<c.length;m++)c[m]+=" MSE";for(u=0;u<c.length;u++){var A=c[u],p=!1;h=0<A.indexOf("#PTS")?"Y2":"Y1";for(m=0;m<b.length;m++)if(b[m].title==A){d={};d.title=A;d.y_axis=h;d.order=
e+1;d.hide=b[m].hide;d.plot_ci=b[m].plot_ci;d.show_signif=b[m].show_signif;d.color=b[m].color;d.pch=b[m].pch;d.type=b[m].type;d.lty=b[m].lty;d.lwd=b[m].lwd;d.con_series=b[m].con_series;d.legend=b[m].legend;d.id=e+1;p=!0;break}p||(f&&0<e&&null==initXML?(d=jQuery.extend(!0,{},g[g.length-1]),d.title=A,d.y_axis=h,d.id=e+1,d.order=e+1):null!=initXML?(d={},d.title=A,d.y_axis=h,d.order=y[e]&&""!=y[e]?parseInt(y[e]):parseInt(m+1),d.hide=k[e],d.plot_ci=l[e].trim(),d.show_signif=n[e],d.pch=r[e].trim(),d.type=
q[e].trim(),d.lty=w[e].trim(),d.lwd=v[e].trim(),d.con_series=x[e].trim(),d.legend=B[e].trim(),d.color=t[e].trim(),d.id=e+1):(d=jQuery.extend(!0,{},firstSeriesFormatting),d.title=A,d.y_axis=h,d.id=e+1,d.order=e+1));e++;g.push(d)}if(null==initXML)for(t=rainbow(g.length),m=0;m<g.length;m++)g[m].color=t[m];g.sort(SortByOrder);for(m=0;m<g.length;m++)a.jqGrid("addRowData",m+1,g[m]);outerLayout.sizePane("south",$("#gbox_listdt").height())}
function updateSeriesPerf(){var a=$("#listdt");a.saveCell(lastSelRow,lastSelCol);var b=a.jqGrid("getRowData");a.jqGrid("clearGridData");var c,e=0,d={},f=$("#seriesLock").is(":checked"),g=[],h=[],l=[],k=[],n=[],t=[],r=[],w=[],v=[],x=[],y=[],B=[];if(null!=initXML){for(var h=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),l=initXML.find("plot").find("plot_disp").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),k=initXML.find("plot").find("show_signif").text().replace("c(",
"").replace(")","").replace(/"/g,"").split(","),q=0;q<l.length;q++)"TRUE"==l[q].trim()?l[q]="No":l[q]="Yes","TRUE"==k[q].trim()?k[q]="No":k[q]="Yes";n=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(q=0;q<n.length;q++)n[q]=n[q].replace(/FF$/,"");t=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");r=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");
w=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");v=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");B=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");y=initXML.find("plot").find("legend").text().replace("c(","").replace(/\)$/,
"").replace(/"/g,"").split(",");if(y.length!=x.length)for(c=0;c<x.length;c++)y[c]=""}c=permuteSeries(createSeriesMapForPermutationEns(series_var_y1_indexes,"y1"),0);for(var m=0;m<c.length;m++){for(var u=c[m],A=!1,q=0;q<b.length;q++)if(b[q].title==u){d={};d.title=u;d.y_axis="";d.order=e+1;d.hide=b[q].hide;d.plot_ci=b[q].plot_ci;d.show_signif=b[q].show_signif;d.color=b[q].color;d.pch=b[q].pch;d.type=b[q].type;d.lty=b[q].lty;d.lwd=b[q].lwd;d.con_series=b[q].con_series;d.legend=b[q].legend;d.id=e+1;A=
!0;break}A||(f&&0<e&&null==initXML?(d=jQuery.extend(!0,{},g[g.length-1]),d.title=u,d.y_axis=void 0,d.id=e+1,d.order=e+1):null!=initXML?(d={},d.title=u,d.y_axis=void 0,d.order=x[e]&&""!=x[e]?parseInt(x[e]):parseInt(q+1),d.hide=l[e],d.plot_ci=h[e].trim(),d.show_signif=k[e],d.pch=t[e].trim(),d.type=B[e].trim(),d.lty=r[e].trim(),d.lwd=w[e].trim(),d.con_series=v[e].trim(),d.legend=y[e].trim(),d.color=n[e].trim(),d.id=e+1):(d=jQuery.extend(!0,{},firstSeriesFormatting),d.title=u,d.y_axis=void 0,d.id=e+1,
d.order=e+1));e++;g.push(d)}if(null==initXML)for(n=rainbow(g.length),q=0;q<g.length;q++)g[q].color=n[q];g.sort(SortByOrder);for(q=0;q<g.length;q++)a.jqGrid("addRowData",q+1,g[q]);outerLayout.sizePane("south",$("#gbox_listdt").height())}
function updateSeries(a){var b=$("#listdt");b.saveCell(lastSelRow,lastSelCol);var c=b.jqGrid("getRowData");b.jqGrid("clearGridData");group_name_to_value_map={};var e,d=0,f={},g=$("#seriesLock").is(":checked"),h=[],l=$("#plot_data").multiselect("getChecked").val(),k,n,t=[],r=[],w=[],v=[],x=[],y=[],B=[],q=[],m=[],u=[],A=[];if(null!=initXML){for(var t=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),r=initXML.find("plot").find("plot_disp").text().replace("c(",
"").replace(")","").replace(/"/g,"").split(","),w=initXML.find("plot").find("show_signif").text().replace("c(","").replace(")","").replace(/"/g,"").split(","),p=0;p<r.length;p++)"TRUE"==r[p].trim()?r[p]="No":r[p]="Yes","TRUE"==w[p].trim()?w[p]="Yes":w[p]="No";v=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(p=0;p<v.length;p++)v[p]=v[p].replace(/FF$/,"");x=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,
"").split(",");y=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");B=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");q=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");if((m=initXML.find("plot").find("order_series").text())&&0<m.length)m=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");
else for(m=[],p=0;p<v.length;p++)m.push(p+1);A=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");u=initXML.find("plot").find("legend").text().replace("c(","").replace(/\)$/,"").replace(/"/g,"").split(",");if(u.length!=m.length)for(p=0;p<m.length;p++)u[p]=""}for(var z=1;2>=z;z++){k="y"+z;1==z?(n=fcst_var_y1_indexes,e=permuteSeries(createSeriesMapForPermutation(series_var_y1_indexes,k),0)):(n=fcst_var_y2_indexes,e=permuteSeries(createSeriesMapForPermutation(series_var_y2_indexes,
k),0));for(var E=0;E<n.length;E++){var J=$("#fcst_var_"+k+"_"+n[E]).val(),G=[],C;C=$("#fcst_stat_"+k+"_"+n[E]).multiselect("getChecked");0==C.length&&"mode"==l&&(C=$("#fcst_stat_mode_"+k+"_"+n[E]).multiselect("getChecked"));for(p=0;p<C.length;p++)G.push(C[p].value);for(C=0;C<G.length;C++)for(var H=0;H<e.length;H++){p=G[C];"mode"==l&&-1==listStatModelRatio.indexOf(p)&&(p=createStatNameForModeArrt(p,k,n[E]));for(var F=e[H]+" "+J+" "+p,I=!1,p=0;p<c.length;p++)if(c[p].title==F&&c[p].y_axis.match(z+"$")==
z){f={};f.title=F;f.y_axis="Y"+z;f.order=d+1;f.hide=c[p].hide;f.plot_ci=c[p].plot_ci;f.show_signif=c[p].show_signif;f.color=c[p].color;f.pch=c[p].pch;f.type=c[p].type;f.lty=c[p].lty;f.lwd=c[p].lwd;f.con_series=c[p].con_series;f.legend=c[p].legend;f.id=d+1;I=!0;break}I||(g&&0<d&&null==initXML?(f=jQuery.extend(!0,{},h[h.length-1]),f.title=F,f.y_axis="Y"+z,f.id=d+1,f.order=d+1):null!=initXML?(f={},f.title=F,f.y_axis="Y"+z,f.order=parseInt(m[d]),f.hide=r[d],f.plot_ci=t[d].trim(),f.show_signif=w[d],f.pch=
x[d].trim(),f.type=A[d].trim(),f.lty=y[d].trim(),f.lwd=B[d].trim(),f.con_series=q[d].trim(),f.legend=u[d].trim(),f.color=v[d].trim(),f.id=d+1):(f=jQuery.extend(!0,{},firstSeriesFormatting),f.title=F,f.y_axis="Y"+z,f.id=d+1,f.order=d+1));d++;h.push(f)}}}for(var c=[],D,p=0;p<seriesDiffY1.length;p++){l=seriesDiffY1[p].split(",")[0];e=seriesDiffY1[p].split(",")[1];z=seriesDiffY1[p].split(",")[2];n=k=!1;D='"and"';"DIFF"===z?D='"-"':"RATIO"===z&&(D='"/"');for(f=0;f<h.length;f++)l==h[f].title&&(k=!0),e==
h[f].title&&(n=!0);k&&n&&(c.push(seriesDiffY1[p]),l=z+' ("'+l+D+e+'")',g&&null==initXML?(f=jQuery.extend(!0,{},h[h.length-1]),f.title=l,f.y_axis="Y1",f.id=d+1,f.order=d+1):null!=initXML?(f={},f.title=l,f.y_axis="Y1",f.order=parseInt(m[d]),f.hide=r[d],f.plot_ci=t[d].trim(),f.show_signif=w[d].trim(),f.pch=x[d].trim(),f.type=A[d].trim(),f.lty=y[d].trim(),f.lwd=B[d].trim(),f.con_series=q[d].trim(),f.legend=u[d].trim(),f.color=v[d].trim(),f.id=d+1):(f=jQuery.extend(!0,{},firstSeriesFormatting),f.title=
l,f.y_axis="Y1",f.id=d+1,f.order=d+1),d++,h.push(f))}seriesDiffY1=c;c=[];for(p=0;p<seriesDiffY2.length;p++){l=seriesDiffY2[p].split(",")[0];e=seriesDiffY2[p].split(",")[1];z=seriesDiffY1[p].split(",")[2];n=k=!1;"DIFF"===z?D='"-"':"RATIO"===z&&(D='"/"');for(f=0;f<h.length;f++)l==h[f].title&&(k=!0),e==h[f].title&&(n=!0);k&&n&&(c.push(seriesDiffY2[p]),l=z+' ("'+l+D+e+'")',g&&null==initXML?(f=jQuery.extend(!0,{},h[h.length-1]),f.title=l,f.y_axis="Y2",f.id=d+1,f.order=d+1):null!=initXML?(f={},f.title=
l,f.y_axis="Y2",f.order=parseInt(m[d]),f.hide=r[d],f.plot_ci=t[d].trim(),f.show_signif=w[d],f.pch=x[d].trim(),f.type=A[d].trim(),f.lty=y[d].trim(),f.lwd=B[d].trim(),f.con_series=q[d].trim(),f.legend=u[d].trim(),f.color=v[d].trim(),f.id=d+1):(f=jQuery.extend(!0,{},firstSeriesFormatting),f.title=l,f.y_axis="Y2",f.id=d+1,f.order=d+1),d++,h.push(f))}seriesDiffY2=c;if(null==initXML){v=rainbow(h.length);d=[];if(a)d=v;else{for(p=0;p<v.length;p++)for(f=0;f<h.length;f++)h[f].color&&0<h[f].color.length&&h[f].color.substr(h[f].color.length-
6).toUpperCase()===v[p].substr(v[p].length-6).toUpperCase()&&p!=f&&(d[f]=v[p],d[p]=v[f]);for(p=0;p<v.length;p++)d[p]||(d[p]=v[p])}for(p=0;p<h.length;p++)h[p].color&&0!=h[p].color.length||(h[p].color=d[p])}h.sort(SortByOrder);for(p=0;p<h.length;p++)b.jqGrid("addRowData",p+1,h[p]);outerLayout.sizePane("south",$("#gbox_listdt").height())}function SortByOrder(a,b){return a.order-b.order}
function rainbow(a){if(1>a)return[];if(1==a)return["#FF0000"];for(var b=[],c=1/(a-1),e=0,d=0;d<a;d++,e+=c)b.push("#"+interpolateColor(e));return b}
function interpolateColor(a){if(0>a)return"FF0000";if(1<a)return"FF00FF";switch(Math.floor(a/.2)){case 0:return hex(1)+hex(1*(0+a/.2*1))+hex(0);case 1:return hex(0+1*(1-(a-.2)/.2))+hex(1)+hex(0);case 2:return a-=.4,hex(0)+hex(1)+hex(1*(0+a/.2*1));case 3:return a-=.6,hex(0)+hex(1*(1-a/.2))+hex(1);case 4:return a-=.8,hex(.5*(0+a/.2*1))+hex(0)+hex(1);default:return hex(.5)+hex(0)+hex(1)}}function hex(a){for(a=Math.round(255*a).toString(16).toUpperCase();2>a.length;)a="0"+a;return a}
function permuteSeries(a,b){var c=Object.keys(a);if(1>c.length)return[];var e=a[c[b]];if(c.length==b+1)return e;c=permuteSeries(a,b+1);if(1>e.length)return c;for(var d=[],f=0;f<c.length;f++)for(var g=0;g<e.length;g++)d.push(e[g]+" "+c[f]);return d}
function createNewDerivedSeriesName(a){var b=$("#series1Y"+a).val();a=$("#series2Y"+a).val();var c=jQuery("input[name=derive_oper]:checked").val(),e='"and"';"DIFF"===c?e='"-"':"RATIO"===c&&(e='"/"');b&&a?$("#newDiffSeriesName").text(c+' ( "'+b+e+a+'" )'):$("#newDiffSeriesName").text("N/A")}
function changeYAxis(a){2==a?($("#series1Y2").removeAttr("disabled"),$("#series2Y2").removeAttr("disabled"),$("#series1Y1").attr("disabled","disabled"),$("#series2Y1").attr("disabled","disabled"),createNewDerivedSeriesName(2)):($("#series1Y2").attr("disabled","disabled"),$("#series2Y2").attr("disabled","disabled"),$("#series1Y1").removeAttr("disabled"),$("#series2Y1").removeAttr("disabled"),createNewDerivedSeriesName(1))}
function sendXml(){var a,b=$("<request />");b.append($("<db_con />").text(getSelectedDatabases()));var c=$("<plot />");if("Series"===currentTab)a=$("<template>series_plot.R_tmpl</template>"),c.append(a),c=createXMLSeries(c),c=createXMLCommon(c);else if("Box"===currentTab)a=$("<template>box_plot.R_tmpl</template>"),c.append(a),c=createXMLBox(c);else if("Bar"===currentTab)a=$("<template>bar_plot.R_tmpl</template>"),c.append(a),c=createXMLBox(c);else if("Hist"===currentTab){var e=$("input:radio[name='hist_line_type']:checked").val();
"rhist"===e?a=$("<template>rhist.R_tmpl</template>"):"phist"===e?a=$("<template>phist.R_tmpl</template>"):"relp"===e&&(a=$("<template>relp.R_tmpl</template>"));c.append(a);c=createXMLHist(c)}else"Roc"===currentTab?(a=$("<template>roc.R_tmpl</template>"),c.append(a),c=createXMLRoc(c)):"Rely"===currentTab?(a=$("<template>rely.R_tmpl</template>"),c.append(a),c=createXMLRely(c)):"Ens_ss"===currentTab?(a=$("<template>ens_ss.R_tmpl</template>"),c.append(a),c=createXMLEns(c)):"Perf"===currentTab?(a=$("<template>performance.R_tmpl</template>"),
c.append(a),c=createXMLPerf(c),c=createXMLCommon(c)):"Taylor"===currentTab?(a=$("<template>taylor_plot.R_tmpl</template>"),c.append(a),c=createXMLTaylor(c),c=createXMLCommon(c)):"Eclv"===currentTab&&(a=$("<template>eclv.R_tmpl</template>"),c.append(a),c=createXMLEclv(c));b.append(c);a=$("<root />").append(b).html().replace(/label=\"</g,'label="&lt;').replace(/label=\">/g,'label="&gt;');$.ajax({url:"servlet",processData:!1,contentType:"application/json",type:"POST",data:a,success:function(a){var b;
try{b=$.parseXML(a);var c=$(b),e=c.find("plot");if(0==c.find("error").length){updateResult(e.text());var l=c.find("r_error");l&&0<l.length&&(updateResult(e.text()),$("#r_error_message_text").empty().text(l.text()),$("#r_error_message").dialog("open"))}else updateResult(e.text()),$("#error_message_text").empty().text(c.find("error").text()),$("#error_message").dialog("open")}catch(k){$("#error_message_text").empty().text(a),$("#error_message").dialog("open")}},error:function(a){alert("error creating a plot or Proxy timeout: "+
a)}})}function createXMLEns(a){a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<ensss_pts />").text($("#ensss_pts").val()));a.append($("<ensss_pts_disp />").text($("input:radio[name='ensss_pts_disp']:checked").val()));return a=createXMLCommon(a)}
function createXMLRoc(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(d){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);var b=$("<roc_calc />");"pct"==$("input:radio[name='roc_type']:checked").val()?(b.append($("<roc_pct />").text("true")),b.append($("<roc_ctc />").text("false"))):(b.append($("<roc_pct />").text("false")),b.append($("<roc_ctc />").text("true")));a.append(b);var c,b=$("<summary_curve />");try{c=
$("#summary_curve").multiselect("getChecked")}catch(d){c=[]}for(var e=0;e<c.length;e++)"none"!=c[e].value&&b.append($("<val />").text(c[e].value));a.append(b);return a=createXMLCommon(a)}
function createXMLEclv(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(d){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);var b=$("input:radio[name ='statistics']:checked").val(),c=$("#calc_stat").val(),e=$("#agg_stat").val();"aggregation_statistics"===b&&"none"!==e?(c=$("<agg_stat />"),c.append($("<agg_"+e+" />").text("true")),c.append($("<boot_repl />").text($("#boot_repl").val())),c.append($("<boot_random_seed />").text($("#boot_random_seed").val())),
c.append($("<boot_ci />").text($("#boot_ci").val())),c.append($("<eveq_dis />").text($("#eveq_dis").is(":checked"))),c.append($("<cl_step />").text($("#cl_step").val())),a.append(c)):"calculations_statistics"===b&&"none"!==c&&(e=$("<calc_stat />"),e.append($("<calc_"+c+" />").text("true")),a.append(e));a.append($("<plot_stat />").text($("#plot_stat").val()));return a=createXMLCommon(a)}
function createXMLHist(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(b){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<normalized_histogram />").text($("input:radio[name='normalized_histogram']:checked").val()));return a=createXMLCommon(a)}
function createXMLRely(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(d){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<rely_event_hist />").text($("input:radio[name='rely_event_hist']:checked").val()));var b,c=$("<summary_curve />");try{b=$("#summary_curve").multiselect("getChecked")}catch(d){b=[]}for(var e=0;e<b.length;e++)"none"!=b[e].value&&c.append($("<val />").text(b[e].value));a.append(c);
return a=createXMLCommon(a)}function createXMLBox(a){a=createXMLSeries(a);a=createXMLCommon(a);a.append($("<box_pts />").text($("#box_pts").is(":checked")));a.append($("<box_outline />").text($("#box_outline").is(":checked")));a.append($("<box_notch />").text($("#box_notch").is(":checked")));a.append($("<box_avg />").text($("#box_avg").is(":checked")));a.append($("<box_boxwex />").text($("#box_boxwex").val()));return a}
function createXMLPlotFix(a){var b=$("<plot_fix />");if("none"!==$("#fixed_var_table").css("display"))for(var c=0;c<fixed_var_indexes.length;c++){var e=$("<field />").attr("name",$("#fixed_var_"+fixed_var_indexes[c]).val()).attr("equalize",$("#fix_var_event_equal_"+fixed_var_indexes[c]).is(":checked")),d=$("<set />").attr("name",$("#fixed_var_"+fixed_var_indexes[c]).val()+"_"+c),f=$("#fixed_var_val_"+fixed_var_indexes[c]).val();if(f){for(var g=0;g<f.length;g++)d.append($("<val />").text(f[g]));e.append(d);
b.append(e)}}a.append(b);return a}
function createXMLPerf(a){a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<plot_cond />").text($("#txtPlotCond").val()));var b=$("<indep />").attr("name",$("#indy_var").val()),c=$('[name="multiselect_indy_var_val"]');if(0<$("#indy_var_val").multiselect("getChecked").length)for(var e=0;e<c.length;e++){var d=$(c[e]);if(d.prop("checked")){var f=d.attr("id");b.append($("<val />").attr("label",$("#"+f+"_label").val()).attr("plot_val",$("#"+f+"_plot_val").val()).text(d.val()))}}else{var g=
moment($("#date_period_start").val(),"YYYY-MM-DD HH:mm:ss"),c=moment($("#date_period_end").val(),"YYYY-MM-DD HH:mm:ss"),f=$("#date_period_by").val().trim(),e=$("#date_period_by_unit").val(),d=$(previousIndVarValResponse).find("val");if(0==f.length)for(e=0;e<d.length;e++)f=moment($(d[e]).text(),"YYYY-MM-DD HH:mm:ss"),(f.isSame(g)||f.isSame(c)||f.isBetween(g,c))&&b.append($("<val />").attr("label",$(d[e]).text()).attr("plot_val","").text($(d[e]).text()));else for(f=parseInt(f),"days"==e&&(f*=24),g=
g.clone();g<=c;){for(var h=g.format("YYYY-MM-DD HH:mm:ss"),l=!1,e=0;e<d.length;e++)if($(d[e]).text()==h){l=!0;break}l&&b.append($("<val />").attr("label",h).attr("plot_val","").text(h));g.add(f,"hour")}}a.append(b);c=$("input:radio[name ='statistics']:checked").val();b=$("#calc_stat").val();e=$("#agg_stat").val();"aggregation_statistics"===c&&"none"!==e?(b=$("<agg_stat />"),b.append($("<agg_"+e+" />").text("true")),b.append($("<boot_repl />").text($("#boot_repl").val())),b.append($("<boot_random_seed />").text($("#boot_random_seed").val())),
b.append($("<boot_ci />").text($("#boot_ci").val())),b.append($("<eveq_dis />").text($("#eveq_dis").is(":checked"))),b.append($("<cache_agg_stat />").text($("#cacheAggStat").is(":checked"))),a.append(b)):"calculations_statistics"===c&&"none"!==b&&(e=$("<calc_stat />"),e.append($("<calc_"+b+" />").text("true")),a.append(e));a.append($("<plot_stat />").text($("#plot_stat").val()));return a}
function createXMLTaylor(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(c){console.log("Can't save row "+lastSelRow)}var b=$("<dep />");b.append(createDepElementForAxis(1,fcst_var_y1_indexes,selected_mode));a.append(b);a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<plot_cond />").text($("#txtPlotCond").val()));a.append($("<taylor_voc />").text($("input:radio[name='taylor_voc']:checked").val()));a.append($("<taylor_show_gamma />").text($("input:radio[name='show_gamma']:checked").val()));
return a}
function createXMLSeries(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(k){console.log("Can't save row "+lastSelRow)}var b=$("#plot_data").multiselect("getChecked").val(),c=$("<dep />");c.append(createDepElementForAxis(1,fcst_var_y1_indexes,b));c.append(createDepElementForAxis(2,fcst_var_y2_indexes,b));a.append(c);a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a.append(createSeriesElementForAxis(2,series_var_y2_indexes));a=createXMLPlotFix(a);a.append($("<plot_cond />").text($("#txtPlotCond").val()));var b=
$("<indep />").attr("name",$("#indy_var").val()).attr("equalize",$("#indy_var_event_equal").is(":checked")),e=$('[name="multiselect_indy_var_val"]');if(0<$("#indy_var_val").multiselect("getChecked").length)for(c=0;c<e.length;c++){var d=$(e[c]);if(d.prop("checked")){var f=d.attr("id");b.append($("<val />").attr("label",$("#"+f+"_label").val()).attr("plot_val",$("#"+f+"_plot_val").val()).text(d.val()))}}else{var g=moment($("#date_period_start").val(),"YYYY-MM-DD HH:mm:ss"),e=moment($("#date_period_end").val(),
"YYYY-MM-DD HH:mm:ss"),f=$("#date_period_by").val().trim(),c=$("#date_period_by_unit").val(),d=$(previousIndVarValResponse).find("val");if(0==f.length)for(c=0;c<d.length;c++)f=moment($(d[c]).text(),"YYYY-MM-DD HH:mm:ss"),(f.isSame(g)||f.isSame(e)||f.isBetween(g,e))&&b.append($("<val />").attr("label",$(d[c]).text()).attr("plot_val","").text($(d[c]).text()));else for(f=parseInt(f),"days"==c&&(f*=24),g=g.clone();g<=e;){for(var h=g.format("YYYY-MM-DD HH:mm:ss"),l=!1,c=0;c<d.length;c++)if($(d[c]).text()==
h){l=!0;break}l&&b.append($("<val />").attr("label",h).attr("plot_val","").text(h));g.add(f,"hour")}}a.append(b);e=$("input:radio[name ='statistics']:checked").val();b=$("#calc_stat").val();c=$("#agg_stat").val();"aggregation_statistics"===e&&"none"!==c?(b=$("<agg_stat />"),b.append($("<agg_"+c+" />").text("true")),b.append($("<boot_repl />").text($("#boot_repl").val())),b.append($("<boot_random_seed />").text($("#boot_random_seed").val())),b.append($("<boot_ci />").text($("#boot_ci").val())),b.append($("<eveq_dis />").text($("#eveq_dis").is(":checked"))),
b.append($("<cache_agg_stat />").text($("#cacheAggStat").is(":checked"))),a.append(b)):"calculations_statistics"===e&&"none"!==b&&(c=$("<calc_stat />"),c.append($("<calc_"+b+" />").text("true")),a.append(c));a.append($("<plot_stat />").text($("#plot_stat").val()));return a}
function createXMLCommon(a){var b=$("<tmpl />");b.append($("<title />").text($("#plot_title").val()));b.append($("<x_label />").text($("#x_label_title").val()));b.append($("<y1_label />").text($("#y1_label_title").val()));b.append($("<y2_label />").text($("#y2_label_title").val()));b.append($("<caption />").text($("#caption").val()));var c=[];if(0<seriesDiffY1.length)for(var e=0;e<seriesDiffY1.length;e++){var d=seriesDiffY1[e].split(",");c.push('c("'+d[0]+'","'+d[1]+'","'+d[2]+'")')}var f=[];if(0<
seriesDiffY2.length)for(e=0;e<seriesDiffY2.length;e++)d=seriesDiffY2[e].split(","),f.push('c("'+d[0]+'","'+d[1]+'","'+d[2]+'")');b.append($("<listDiffSeries1 />").text("list("+c.join()+")"));b.append($("<listDiffSeries2 />").text("list("+f.join()+")"));a.append(b);a.append($("<event_equal />").text($("#event_equal").is(":checked")));a.append($("<vert_plot />").text($("#vert_plot").is(":checked")));a.append($("<x_reverse />").text($("#x_reverse").is(":checked")));a.append($("<num_stats />").text($("#num_stats").is(":checked")));
a.append($("<indy1_stag />").text($("#indy1_stag").is(":checked")));a.append($("<indy2_stag />").text($("#indy2_stag").is(":checked")));a.append($("<grid_on />").text($("#grid_on").is(":checked")));a.append($("<sync_axes />").text($("#sync_axes").is(":checked")));a.append($("<dump_points1 />").text($("#dump_points1").is(":checked")));a.append($("<dump_points2 />").text($("#dump_points2").is(":checked")));a.append($("<log_y1 />").text($("#log_y1").is(":checked")));a.append($("<log_y2 />").text($("#log_y2").is(":checked")));
a.append($("<varianceInflationFactor />").text($("#varianceInflationFactor").is(":checked")));a.append($("<plot_type />").text($("#plot_type").val()));a.append($("<plot_height />").text($("#plot_height").val()));a.append($("<plot_width />").text($("#plot_width").val()));a.append($("<plot_res />").text($("#plot_res").val()));a.append($("<plot_units />").text($("#plot_units").val()));e=$("#mar_bottom").val().trim();b=$("#mar_left").val().trim();c=$("#mar_top").val().trim();d=$("#mar_right").val().trim();
0==e.length&&(e=0);0==b.length&&(b=0);0==c.length&&(c=0);0==d.length&&(d=0);a.append($("<mar />").text("c("+e+","+b+","+c+","+d+")"));e=$("#mgp_title").val().trim();b=$("#mgp_labels").val().trim();c=$("#mgp_line").val().trim();0==e.length&&(e=0);0==b.length&&(b=0);0==c.length&&(c=0);a.append($("<mgp />").text("c("+e+","+b+","+c+")"));a.append($("<cex />").text($("#cex").val()));a.append($("<title_weight />").text($("#title_weight").val()));a.append($("<title_size />").text($("#title_size").val()));
a.append($("<title_offset />").text($("#title_offset").val()));a.append($("<title_align />").text($("#title_align").val()));a.append($("<xtlab_orient />").text($("#xtlab_orient").val()));a.append($("<xtlab_perp />").text($("#xtlab_perp").val()));a.append($("<xtlab_horiz />").text($("#xtlab_horiz").val()));a.append($("<xtlab_freq />").text($("#xtlab_freq").val()));a.append($("<xtlab_size />").text($("#xtlab_size").val()));a.append($("<xlab_weight />").text($("#xlab_weight").val()));a.append($("<xlab_size />").text($("#xlab_size").val()));
a.append($("<xlab_offset />").text($("#xlab_offset").val()));a.append($("<xlab_align />").text($("#xlab_align").val()));a.append($("<ytlab_orient />").text($("#ytlab_orient").val()));a.append($("<ytlab_perp />").text($("#ytlab_perp").val()));a.append($("<ytlab_horiz />").text($("#ytlab_horiz").val()));a.append($("<ytlab_size />").text($("#ytlab_size").val()));a.append($("<ylab_weight />").text($("#ylab_weight").val()));a.append($("<ylab_size />").text($("#ylab_size").val()));a.append($("<ylab_offset />").text($("#ylab_offset").val()));
a.append($("<ylab_align />").text($("#ylab_align").val()));a.append($("<grid_lty />").text($("#grid_lty").val()));e=$("#grid_col").val();e.startsWith("#")?a.append($("<grid_col />").text(e)):a.append($("<grid_col />").text("#"+e));a.append($("<grid_lwd />").text($("#grid_lwd").val()));a.append($("<grid_x />").text($("#grid_x").val()));a.append($("<x2tlab_orient />").text($("#x2tlab_orient").val()));a.append($("<x2tlab_perp />").text($("#x2tlab_perp").val()));a.append($("<x2tlab_horiz />").text($("#x2tlab_horiz").val()));
a.append($("<x2tlab_size />").text($("#x2tlab_size").val()));a.append($("<x2lab_size />").text($("#x2lab_size").val()));a.append($("<x2lab_offset />").text($("#x2lab_offset").val()));a.append($("<x2lab_align />").text($("#x2lab_align").val()));a.append($("<y2tlab_orient />").text($("#y2tlab_orient").val()));a.append($("<y2tlab_perp />").text($("#y2tlab_perp").val()));a.append($("<y2tlab_horiz />").text($("#y2tlab_horiz").val()));a.append($("<y2tlab_size />").text($("#y2tlab_size").val()));a.append($("<y2lab_size />").text($("#y2lab_size").val()));
a.append($("<y2lab_offset />").text($("#y2lab_offset").val()));a.append($("<y2lab_align />").text($("#y2lab_align").val()));a.append($("<legend_box />").text($("#legend_box").val()));0==$("#legend_inset_min").val().trim().length||0==$("#legend_inset_max").val().trim().length?a.append($("<legend_inset />").text("c()")):a.append($("<legend_inset />").text("c("+$("#legend_inset_min").val()+","+$("#legend_inset_max").val()+")"));a.append($("<legend_ncol />").text($("#legend_ncol").val()));a.append($("<legend_size />").text($("#legend_size").val()));
a.append($("<caption_weight />").text($("#caption_weight").val()));e=$("#caption_col").val();e.startsWith("#")?a.append($("<caption_col />").text(e)):a.append($("<caption_col />").text("#"+e));a.append($("<caption_size />").text($("#caption_size").val()));a.append($("<caption_offset />").text($("#caption_offset").val()));a.append($("<caption_align />").text($("#caption_align").val()));a.append($("<ci_alpha />").text($("#ci_alpha").val()));for(var b=sortSeries(),c=[],d=[],f=[],g=[],h=[],l=[],k=[],
n=[],t=[],r=[],w=[],e=0;e<b.length;e++)c.push('"'+b[e].plot_ci+'"'),"No"==b[e].hide?d.push("TRUE"):d.push("FALSE"),"No"==b[e].show_signif?w.push("FALSE"):w.push("TRUE"),f.push('"'+b[e].color+'FF"'),g.push(b[e].pch),h.push('"'+b[e].type+'"'),l.push(b[e].lty),k.push(b[e].lwd),n.push(b[e].con_series),t.push(b[e].order),r.push('"'+b[e].legend+'"');a.append($("<plot_ci />").text("c("+c.join()+")"));a.append($("<show_signif />").text("c("+w.join()+")"));a.append($("<plot_disp />").text("c("+d.join()+")"));
a.append($("<colors />").text("c("+f.join()+")"));a.append($("<pch />").text("c("+g.join()+")"));a.append($("<type />").text("c("+h.join()+")"));a.append($("<lty />").text("c("+l.join()+")"));a.append($("<lwd />").text("c("+k.join()+")"));a.append($("<con_series />").text("c("+n.join()+")"));a.append($("<order_series />").text("c("+t.join()+")"));a.append($("<plot_cmd />").text($("#plot_cmd").val()));a.append($("<legend />").text("c("+r.join()+")"));0==$("#y1_lim_min").val().trim().length||0==$("#y1_lim_max").val().trim().length?
a.append($("<y1_lim />").text("c()")):a.append($("<y1_lim />").text("c("+$("#y1_lim_min").val()+","+$("#y1_lim_max").val()+")"));a.append($("<y1_bufr />").text($("#y1_bufr").val()));0==$("#y2_lim_min").val().trim().length||0==$("#y2_lim_max").val().trim().length?a.append($("<y2_lim />").text("c()")):a.append($("<y2_lim />").text("c("+$("#y2_lim_min").val()+","+$("#y2_lim_max").val()+")"));a.append($("<y2_bufr />").text($("#y2_bufr").val()));return a}
function sortSeries(){$("#listdt").saveCell(lastSelRow,lastSelCol);var a=$("#listdt").jqGrid("getRowData");return a=a.sort(function(a,c){return parseInt(a.id)>parseInt(c.id)?1:parseInt(a.id)<parseInt(c.id)?-1:0})}
function createSeriesElementForAxis(a,b){for(var c=$("<series"+a+" />"),e=0;e<b.length;e++){var d=$("<field />").attr("name",$("#series_var_y"+a+"_"+b[e]).val()),f=$("#group_series_var_y"+a+"_"+b[e]).is(":checked"),g=$("#series_var_val_y"+a+"_"+b[e]).val();g&&null!=g||(g=[]);f&&(g=[g.join()]);for(f=0;f<g.length;f++)d.append($("<val />").text(g[f]));c.append(d)}return c}
function createDepElementForAxis(a,b,c){var e=$("<dep"+a+" />");a=createMapForForecastVar(a,b,c);for(var d in a){b=$("<fcst_var />").attr("name",d);for(c=0;c<a[d].length;c++)b.append($("<stat />").text(a[d][c]));e.append(b)}return e}
function refreshHistory(){$("#history_content").empty();var a=$("<request />"),b=$("<history />"),c=!1;"show_history_all"==$("input:radio[name='show_history_choice']:checked").val()&&(c=!0);b.append($("<show_all>"+c+"</show_all>"));a.append(b);$.ajax({url:"servlet",processData:!1,type:"POST",dataType:"xml",data:$("<root />").append(a).html(),success:function(a){a=$(a);a=$(a.find("results")[0]).find("file");for(var b=0;b<a.length;b++){var c=$(a[b]).attr("name"),g;g="true"==$(a[b]).attr("success")?
"#000000":"#B39A9A";$("#history_content").append($("<tr/>").append($("<td/>").css("color",g).text(c)).append($("<td/>").append($("<button />").attr("id",c).addClass("view-image").text("Image"))).append($("<td/>").append($("<button />").attr("id",c).addClass("load-image").text("XML"))))}$(".view-image").button({icons:{primary:"ui-icon-image"},text:!1}).click(function(){viewImage($(this).attr("id"))});$(".load-image").button({icons:{primary:"ui-icon-document"},text:!1}).click(function(){$("#uploadLocalId").val($(this).attr("id"));
loadImage($(this).attr("id"))})},error:function(a){alert(a)}})}
function loadImage(a){boxID+=1;window_center+=20;window_top+=20;$("<div>").attr("id",boxID+"dialog").dialog({height:400,width:600,resizable:!0,closeOnEscape:!0,autoOpen:!1,focus:!0,dialogClass:"dialog-box-"+boxID,title:a,position:{my:"center+"+window_center+" top+"+window_top,at:"center top",of:window},close:function(a){$(this).empty();$(this).dialog("destroy");window_center-=20;window_top-=20},buttons:{"Load to Page":function(){$("#formUploadLocal").submit();$(this).dialog("close")},"Download to Disk":function(){var b;
b=""+('<input type="hidden" name="plot" value="plot_'+a+'" />');$('<form action="download" method="get">'+(b+'<input type="hidden" name="type" value="plot_xml_url" />')+"</form>").appendTo("body").submit().remove();$(this).dialog("close")}},create:function(b,c){$.ajax({async:!1,type:"GET",url:urlOutput+"xml/plot_"+a+".xml",dataType:"xml",success:function(a){a="msie"==jQuery.browser?a.xml:(new XMLSerializer).serializeToString(a);try{$("#"+boxID+"dialog").append(formatXml(a).replace(/&/g,"&amp;").replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />"))}catch(b){console.log(b+" can't append xml")}}})}}).dialog("open")}function formatXml(a){var b="";a=a.replace(/(>)(<)(\/*)/g,"$1\r\n$2$3");var c=0;jQuery.each(a.split("\r\n"),function(a,d){var f=0;d.match(/.+<\/\w[^>]*>$/)?f=0:d.match(/^<\/\w/)?0!=c&&--c:f=d.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var g="",h=0;h<c;h++)g+=" ";b+=g+d+"\r\n";c+=f});return b}
function resetFormatting(){$("#plot_title").val("test title");$("#x_label_title").val("test x_label");$("#y1_label_title").val("test y_label");$("#y2_label_title").val("");$("#caption").val("");$("#vert_plot").prop("checked",!1);$("#x_reverse").prop("checked",!1);$("#num_stats").prop("checked",!1);$("#grid_on").prop("checked",!0);$("#sync_axes").prop("checked",!1);$("#dump_points1").prop("checked",!1);$("#dump_points2").prop("checked",!1);$("#indy1_stag").prop("checked",!1);$("#indy2_stag").prop("checked",
!1);$("#varianceInflationFactor").prop("checked",!0);$("#ci_alpha").val("0.05");$("#plot_type").val("png16m");$("#plot_height").val("8.5");$("#plot_width").val("11");$("#plot_units").val("in");$("#cex").val("1");$("#plot_res").val("72");$("#mar_bottom").val("8");$("#mar_left").val("4");$("#mar_top").val("5");$("#mar_right").val("4");$("#mgp_title").val("1");$("#mgp_labels").val("1");$("#mgp_line").val("0");$("#title_align").val("0.5");$("#title_offset").val("-2");$("#title_size").val("1.4");$("#title_weight").val("2");
$("#grid_lty").val("3");$("#grid_lwd").val("1");$("#grid_x").val("listX");$("#plot_cmd").val("");$("#xlab_align").val("0.5");$("#xlab_offset").val("2");$("#xlab_size").val("1");$("#xlab_weight").val("1");$("#xtlab_horiz").val("0.5");$("#xtlab_perp").val("-0.75");$("#xtlab_size").val("1");$("#xtlab_freq").val("0");$("#xtlab_orient").val("1");$("#x2lab_align").val("0.5");$("#x2lab_offset").val("-0.5");$("#x2lab_size").val("0.8");$("#x2lab_weight").val("1");$("#x2tlab_horiz").val("0.5");$("#x2tlab_perp").val("1");
$("#x2tlab_size").val("0.8");$("#x2tlab_orient").val("1");$("#ylab_align").val("0.5");$("#ylab_offset").val("-2");$("#ylab_size").val("1");$("#ylab_weight").val("1");$("#ytlab_horiz").val("0.5");$("#ytlab_perp").val("0.5");$("#ytlab_size").val("1");$("#ytlab_orient").val("1");$("#y1_lim_min").val("");$("#y1_lim_max").val("");$("#y1_bufr").val("0.04");$("#y2lab_align").val("0.5");$("#y2lab_offset").val("1");$("#y2lab_size").val("1");$("#y2lab_weight").val("1");$("#y2tlab_horiz").val("0.5");$("#y2tlab_perp").val("0.5");
$("#y2tlab_size").val("1");$("#y2tlab_orient").val("1");$("#y2_lim_min").val("0");$("#y2_lim_max").val("1");$("#y2_bufr").val("0");$("#legend_size").val("0.8");$("#legend_inset_min").val("0");$("#legend_inset_max").val(" -.25");$("#legend_box").val("o");$("#legend_ncol").val("3");$("#caption_align").val("0");$("#caption_offset").val("3");$("#caption_size").val("0.8");$("#caption_weight").val("1")}
function removeFixedVarHist(a){a=a.split("_");a=a[a.length-1];var b=$("#fixed_var_"+a);b.multiselect("destroy");$("#fixed_var_val_"+a).multiselect("destroy");var c=jQuery.inArray(parseInt(a),fixed_var_indexes);-1<c&&(fixed_var_indexes.splice(c,1),fixVarValResponse[parseInt(a)]=null);1==fixed_var_indexes.length&&$("#remove_fixed_var_"+fixed_var_indexes[0]).button({disabled:!0});b.parent().parent().remove()}
function removeFixedVar(a){a=a.split("_");a=a[a.length-1];try{$("#fixed_var_"+a).multiselect("destroy"),$("#fixed_var_val_"+a).multiselect("destroy"),$("#fixed_var_val_date_period_"+a).dialog("destroy"),$("#fixed_var_val_date_period_"+a).remove(),$("#fixed_var_val_date_period_button_"+a).button("destroy")}catch(c){}var b=jQuery.inArray(parseInt(a),fixed_var_indexes);-1<b&&fixed_var_indexes.splice(b,1);0<fixed_var_indexes.length?$("#fixed_var_"+a).parent().parent().remove():$("#fixed_var_table").css("display",
"none")}
function addFixedVarHist(){var a,b=a=0<fixed_var_indexes.length?parseInt(fixed_var_indexes[fixed_var_indexes.length-1]):1,c="none"===$("#fixed_var_table").css("display"),e,d,f,g;c?(0===fixed_var_indexes.length&&fixed_var_indexes.push(b),$("#fixed_var_table").css("display",""),e=$("#fixed_var_"+b),$("#remove_fixed_var_"+b).button({icons:{primary:"ui-icon-trash"},text:!1}),d=$("#fixed_var_val_"+b),f=$("#fixed_var_val_date_period_button_"+b),g=$("#fixed_var_val_date_period_"+b)):(b=parseInt(a)+1,fixed_var_indexes.push(b),
e=$("#fixed_var_"+a).clone(!1),e.prop("id","fixed_var_"+b),e.css("display",""),e.val(e.find(" option:first").val()));c||(c=$(' <button id="remove_fixed_var_"'+b+'" class="remove_fixed_var">Remove</button>').button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeFixedVarHist("remove_fixed_var_"+b)}),d=$("#fixed_var_val_"+a).clone(!1),d.prop("id","fixed_var_val_"+b),d.css("display",""),e.val(e.find(" option:first").val()),f=$("<button>",{text:"Select multiple options",id:"fixed_var_val_date_period_button_"+
b}).css("display","none"),g=$("#fixed_var_val_date_period_"+a).clone(!1).appendTo("body"),g.prop("id","fixed_var_val_date_period_"+b),g.find("#fixed_var_val_date_period_start_"+a).prop("id","fixed_var_val_date_period_start_"+b),g.find("#fixed_var_val_date_period_end_"+a).prop("id","fixed_var_val_date_period_end_"+b),g.find("#fixed_var_val_date_period_by_"+a).prop("id","fixed_var_val_date_period_by_"+b),g.find("#fixed_var_val_date_period_by_unit_"+a).prop("id","fixed_var_val_date_period_by_unit_"+
b),$("#fixed_var_table").append($("<tr>").append($("<td>").append(c)).append($("<td>").append(e)).append($("<td>").append(d)).append($("<td>").append(f))));createValDatePeriodDialog("fixed_var_val",b);d.multiselect({selectedList:100,noneSelectedText:"Select value",position:{my:"center center",at:"right center"}});e.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",height:"auto",click:function(a,c){$("#fixed_var_val_date_period_start_"+b).empty();$("#fixed_var_val_date_period_end_"+
b).empty();"fcst_init_beg"===c.value||"fcst_valid_beg"===c.value||"fcst_valid"===c.value||"fcst_init"===c.value?$("#fixed_var_val_date_period_button_"+b).css("display","block"):$("#fixed_var_val_date_period_button_"+b).css("display","none");var d=this.id.split("_");updateFixedVarValHist(d[d.length-1],[])}});f.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#fixed_var_val_date_period_"+b).dialog("open")});updateFixedVarValHist(b,[])}
function addFixedVar(){var a;a=0<fixed_var_indexes.length?parseInt(fixed_var_indexes[fixed_var_indexes.length-1]):(a=$("#fixed_var_table select:first-child"))?parseInt(a.prop("id").split("fixed_var_")[1]):1;var b=a,c,e,d,f,g,h,l;e="none"===$("#fixed_var_table").css("display");h=$("#event_equal").prop("checked");e?(0===fixed_var_indexes.length&&fixed_var_indexes.push(b),$("#fixed_var_table").css("display",""),c=$("#fixed_var_"+b),$("#remove_fixed_var_"+b).button({icons:{primary:"ui-icon-trash"},text:!1}),
d=$("#fixed_var_val_"+b),f=$("#fixed_var_val_date_period_button_"+b),g=$("#fixed_var_val_date_period_"+b),$("#fix_var_event_equal_"+b).prop("checked",h).prop("disabled",!h)):(b=parseInt(a)+1,fixed_var_indexes.push(b),c=$("#fixed_var_"+a).clone(!1),c.prop("id","fixed_var_"+b),c.css("display",""),c.val(c.find(" option:first").val()));e||(e=$('<button id="remove_fixed_var_'+b+'" class="remove_fixed_var">Remove</button>'),d=$("#fixed_var_val_"+a).clone(!1),d.prop("id","fixed_var_val_"+b),d.css("display",
""),c.val(c.find(" option:first").val()),f=$("<button>",{text:"Select multiple options",id:"fixed_var_val_date_period_button_"+b}).css("display","none"),g=$("#fixed_var_val_date_period_"+a).clone(!1).appendTo("body"),g.prop("id","fixed_var_val_date_period_"+b),g.find("#fixed_var_val_date_period_start_"+a).prop("id","fixed_var_val_date_period_start_"+b),g.find("#fixed_var_val_date_period_end_"+a).prop("id","fixed_var_val_date_period_end_"+b),g.find("#fixed_var_val_date_period_by_"+a).prop("id","fixed_var_val_date_period_by_"+
b),g.find("#fixed_var_val_date_period_by_unit_"+a).prop("id","fixed_var_val_date_period_by_unit_"+b),h=$("#fix_var_event_equal_"+a).clone(!0).prop("id","fix_var_event_equal_"+b).prop("checked",h).prop("disabled",!h),0<$("#fix_var_event_equal_"+a).find("label").size()&&(l=$('<label for="fix_var_event_equal_'+b+'">Equalize</label>')),$("body").append(g),$("#fixed_var_table").append($("<tr>").append($("<td>").append(e)).append($("<td>").append(c)).append($("<td>").append(d)).append($("<td>").append(f)).append($("<td>").append(h).append(l))),
e.button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeFixedVar($(this).attr("id"))}));createValDatePeriodDialog("fixed_var_val",b);d.multiselect({selectedList:100,noneSelectedText:"Select value",position:{my:"center center",at:"right center"}});c.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",height:"auto",click:function(a,c){$("#fixed_var_val_date_period_start_"+b).empty();$("#fixed_var_val_date_period_end_"+b).empty();"fcst_init_beg"===c.value||"fcst_valid_beg"===
c.value||"fcst_valid"===c.value||"fcst_init"===c.value?$("#fixed_var_val_date_period_button_"+b).css("display","block"):$("#fixed_var_val_date_period_button_"+b).css("display","none");var d=this.id.split("_");updateFixedVarVal(d[d.length-1],[])}});f.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#fixed_var_val_date_period_"+b).dialog("open")});updateFixedVarVal(b,[])}
function removeSeriesVarCommon(a){var b=a.split("_");a=b[b.length-1];var b=b[b.length-2],c;try{$("#series_var_"+b+"_"+a).multiselect("destroy")}catch(e){}try{$("#series_var_val_"+b+"_"+a).multiselect("destroy")}catch(e){}"y1"==b?(c=jQuery.inArray(parseInt(a),series_var_y1_indexes),-1<c&&(series_var_y1_indexes.splice(c,1),seriesY1VarValResponse[parseInt(a)]=null),0<series_var_y1_indexes.length?$("#series_var_"+b+"_"+a).parent().parent().remove():$("#series_var_table_"+b).css("display","none")):(c=
jQuery.inArray(parseInt(a),series_var_y2_indexes),-1<c&&(series_var_y2_indexes.splice(c,1),seriesY1VarValResponse[parseInt(a)]=null),0<series_var_y2_indexes.length?$("#series_var_"+b+"_"+a).parent().parent().remove():$("#series_var_table_"+b).css("display","none"))}function removeSeriesVar(a){removeSeriesVarCommon(a);1==series_var_y1_indexes.length&&$("#remove_series_var_y1_"+series_var_y1_indexes[0]).button("disable");updateSeries()}
function addSeriesVarEns(){var a;a=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(a+1);var b,c,e;0==a?($("#series_var_table_y1").css("display",""),b=$("#series_var_y1_"+(a+1)),$("#remove_series_var_y1_"+(a+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVar($(this).attr("id"))}),e=$("#series_var_val_y1_"+(a+1))):(b=$("#series_var_y1_"+a).clone(!1),b.attr("id","series_var_y1_"+(a+1)),b.css("display",
""));0<a&&(c=$("#remove_series_var_y1_"+a).button("enable").clone(!0).attr("id","remove_series_var_y1_"+(a+1)),e=$("#series_var_val_y1_"+a).clone(!1),e.attr("id","series_var_val_y1_"+(a+1)),e.css("display",""),$("#series_var_table_y1").append($("<tr>").append($("<td>").append(c)).append($("<td>").append(b)).append($("<td>").append(e))));e.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeriesEns()},checkAll:function(){updateSeries(!0)},uncheckAll:function(){updateSeries()}});
try{e.multiselect("uncheckAll")}catch(d){}b.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(){var a=this.id.split("_");updateSeriesVarValEns(a[a.length-1],[])}})}
function addSeriesVarPerf(){var a;a=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(a+1);var b,c,e;0==a?($("#series_var_table_y1").css("display",""),b=$("#series_var_y1_"+(a+1)),$("#remove_series_var_y1_"+(a+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVar($(this).attr("id"))}),e=$("#series_var_val_y1_"+(a+1))):(b=$("#series_var_y1_"+a).clone(!1),b.attr("id","series_var_y1_"+(a+1)),b.css("display",
""));0<a&&(c=$("#remove_series_var_y1_"+a).button("enable").clone(!0).attr("id","remove_series_var_y1_"+(a+1)),e=$("#series_var_val_y1_"+a).clone(!1),e.attr("id","series_var_val_y1_"+(a+1)),e.css("display",""),$("#series_var_table_y1").append($("<tr>").append($("<td>").append(c)).append($("<td>").append(b)).append($("<td>").append(e))));e.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeriesPerf()},checkAll:function(){updateSeriesPerf(!0)},uncheckAll:function(){updateSeriesPerf()}});
try{e.multiselect("uncheckAll")}catch(d){}b.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(){var a=this.id.split("_");updateSeriesVarValHist(a[a.length-1],[])}})}
function addSeriesVarHist(){var a;a=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(a+1);var b,c,e,d,f;0===a?($("#series_var_table_y1").css("display",""),b=$("#series_var_y1_"+(a+1)),$("#remove_series_var_y1_"+(a+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVarCommon($(this).attr("id"));updateSeriesHist()}),e=$("#series_var_val_y1_"+(a+1)),d=$("#series_var_val_y1_date_period_button_"+(a+1)),f=$("#series_var_val_y1_date_period_"+
(a+1))):(b=$("#series_var_y1_"+a).clone(!1),b.attr("id","series_var_y1_"+(a+1)),b.css("display",""));0<a&&(c=$("#remove_series_var_y1_"+a).button("enable").clone(!0).attr("id","remove_series_var_y1_"+(a+1)),e=$("#series_var_val_y1_"+a).clone(!1),e.attr("id","series_var_val_y1_"+(a+1)),e.css("display",""),d=$("<button>",{text:"Select multiple options",id:"series_var_val_y1_date_period_button_"+(a+1)}).css("display","none"),f=$("#series_var_val_y1_date_period_"+a).clone(!1).appendTo("body"),f.prop("id",
"series_var_val_y1_date_period_"+(a+1)),f.find("#series_var_val_y1_date_period_start_"+a).prop("id","series_var_val_y1_date_period_start_"+(a+1)),f.find("#series_var_val_y1_date_period_end_"+a).prop("id","series_var_val_y1_date_period_end_"+(a+1)),f.find("#series_var_val_y1_date_period_by_"+a).prop("id","series_var_val_y1_date_period_by_"+(a+1)),f.find("#series_var_val_y1_date_period_by_unit_"+a).prop("id","series_var_val_y1_date_period_by_unit_"+(a+1)),$("body").append(f),$("#series_var_table_y1").append($("<tr>").append($("<td>").append(c)).append($("<td>").append(b)).append($("<td>").append(e)).append($("<td>").append(d))));
createValDatePeriodDialog("series_var_val_y1",a+1);e.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeriesHist()},checkAll:function(){updateSeriesHist()},uncheckAll:function(){updateSeriesHist()}});try{e.multiselect("uncheckAll")}catch(g){}b.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(b,c){$("#series_var_val_y1_date_period_start_"+(a+1)).empty();$("#series_var_val_y1_date_period_end_"+(a+1)).empty();"fcst_init_beg"==c.value||
"fcst_valid_beg"==c.value||"fcst_valid"==c.value||"fcst_init"==c.value?$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","none");var d=this.id.split("_");updateSeriesVarValHist(d[d.length-1],[])}});d.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#series_var_val_y1_date_period_"+(a+1)).dialog("open")})}
function addSeriesVar(a){var b;"y1"==a?(b=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0,series_var_y1_indexes.push(b+1)):(b=0<series_var_y2_indexes.length?series_var_y2_indexes[series_var_y2_indexes.length-1]:0,series_var_y2_indexes.push(b+1));var c,e,d,f,g,h,l;0==b?($("#series_var_table_"+a).css("display",""),c=$("#series_var_"+a+"_"+(b+1)),$("#remove_series_var_"+a+"_"+(b+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVar($(this).attr("id"))}),
d=$("#series_var_val_"+a+"_"+(b+1)),h=$("#series_var_val_"+a+"_date_period_button_"+(b+1)),l=$("#series_var_val_"+a+"_date_period_"+(b+1))):(c=$("#series_var_"+a+"_"+b).clone(!1),c.attr("id","series_var_"+a+"_"+(b+1)),c.css("display",""));0<b&&(e=$("#remove_series_var_"+a+"_"+b).button("enable").clone(!0).attr("id","remove_series_var_"+a+"_"+(b+1)),d=$("#series_var_val_"+a+"_"+b).clone(!1),d.attr("id","series_var_val_"+a+"_"+(b+1)),d.css("display",""),f=$("#group_series_var_"+a+"_"+b).clone(!1),f.attr("id",
"group_series_var_"+a+"_"+(b+1)).prop("checked",!1),f.click(function(){updateSeries()}),g=$('<label for="group_series_var_'+a+"_"+(b+1)+'">Group_'+a+"_"+(b+1)+"</label>"),h=$("<button>",{text:"Select multiple options",id:"series_var_val_"+a+"_date_period_button_"+(b+1)}).css("display","none"),l=$("#series_var_val_"+a+"_date_period_"+b).clone(!1).appendTo("body"),l.prop("id","series_var_val_"+a+"_date_period_"+(b+1)),l.find("#series_var_val_"+a+"_date_period_start_"+b).prop("id","series_var_val_"+
a+"_date_period_start_"+(b+1)),l.find("#series_var_val_"+a+"_date_period_end_"+b).prop("id","series_var_val_"+a+"_date_period_end_"+(b+1)),l.find("#series_var_val_"+a+"_date_period_by_"+b).prop("id","series_var_val_"+a+"_date_period_by_"+(b+1)),l.find("#series_var_val_"+a+"_date_period_by_unit_"+b).prop("id","series_var_val_"+a+"_date_period_by_unit_"+(b+1)),$("body").append(l),$("#series_var_table_"+a).append($("<tr>").append($("<td>").append(e)).append($("<td>").append(c)).append($("<td>").append(d)).append($("<td>").append(h)).append($("<td>").append(f).append(g))));
createValDatePeriodDialog("series_var_val_"+a,b+1);d.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeries()},checkAll:function(){updateSeries(!0)},uncheckAll:function(){updateSeries()}});try{d.multiselect("uncheckAll")}catch(k){}c.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(c,d){$("#series_var_val_"+a+"_date_period_start_"+(b+1)).empty();$("#series_var_val_"+a+"_date_period_end_"+(b+1)).empty();"fcst_init_beg"==d.value||"fcst_valid_beg"==
d.value||"fcst_valid"==d.value||"fcst_init"==d.value?$("#series_var_val_"+a+"_date_period_button_"+(b+1)).css("display","block"):$("#series_var_val_"+a+"_date_period_button_"+(b+1)).css("display","none");var e=this.id.split("_");updateSeriesVarVal(e[e.length-2],e[e.length-1],[])}});h.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#series_var_val_"+a+"_date_period_"+(b+1)).dialog("open")})}
function removeFcstVar(a){var b=a.split("_");a=b[b.length-1];var b=b[b.length-2],c;$("#fcst_var_"+b+"_"+a).multiselect("destroy");$("#fcst_stat_"+b+"_"+a).multiselect("destroy");"y1"==b?(c=jQuery.inArray(parseInt(a),fcst_var_y1_indexes),-1<c&&fcst_var_y1_indexes.splice(c,1),1==fcst_var_y1_indexes.length&&$("#remove_fcst_var_"+b+"_"+fcst_var_y1_indexes[0]).button("disable"),0<fcst_var_y1_indexes.length?$("#fcst_var_"+b+"_"+a).parent().parent().remove():$("#dependent_var_table_"+b).css("display","none")):
(c=jQuery.inArray(parseInt(a),fcst_var_y2_indexes),-1<c&&fcst_var_y2_indexes.splice(c,1),0<fcst_var_y2_indexes.length?$("#fcst_var_"+b+"_"+a).parent().parent().remove():$("#dependent_var_table_"+b).css("display","none"));updateSeries()}
function addFcstVar(a){var b,c=$("#plot_data").multiselect("getChecked").val();"y1"==a?(b=0<fcst_var_y1_indexes.length?fcst_var_y1_indexes[fcst_var_y1_indexes.length-1]:0,fcst_var_y1_indexes.push(b+1)):(b=0<fcst_var_y2_indexes.length?fcst_var_y2_indexes[fcst_var_y2_indexes.length-1]:0,fcst_var_y2_indexes.push(b+1));var e,d,f,g,h;0==b?($("#dependent_var_table_"+a).css("display",""),e=$("#fcst_var_"+a+"_"+(b+1)),$("#remove_fcst_var_"+a+"_"+(b+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeFcstVar($(this).attr("id"))}),
f=$("#fcst_stat_"+a+"_"+(b+1)),g=$("#fcst_stat_mode_"+a+"_"+b)):(e=$("#fcst_var_"+a+"_"+b).clone(!1),e.attr("id","fcst_var_"+a+"_"+(b+1)),e.css("display",""));0<b&&(d=$("#remove_fcst_var_"+a+"_"+b).button("enable").clone(!0).attr("id","remove_fcst_var_"+a+"_"+(b+1)),f=$("#fcst_stat_"+a+"_"+b).clone(!1),f.attr("id","fcst_stat_"+a+"_"+(b+1)),f.css("display",""),g=$("#fcst_stat_mode_"+a+"_"+b).clone(!1),g.attr("id","fcst_stat_mode_"+a+"_"+(b+1)),h=$("#fcst_stat_mode_config_"+a+"_"+b).clone(!0),h.attr("id",
"fcst_stat_mode_config_"+a+"_"+(b+1)),h.css("display","none"),$("#dependent_var_table_"+a).append($("<tr>").append($("<td>").append(d)).append($("<td>").append(e)).append($("<td>").append(f).append("<br/>").append(g)).append($("<td>").append(h))));e.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",height:200,click:function(){var a=this.id.split("_");updateStats(a[a.length-2],a[a.length-1],[]);var b;try{b=$("#series_var_val_"+a[a.length-2]+"_"+a[a.length-1]).multiselect("getChecked").val()}catch(c){b=
$("#series_var_val_"+a[a.length-2]+"_"+a[a.length-1]+" option:first-child").val()}null==b&&(b=[]);updateSeriesVarVal(a[a.length-2],a[a.length-1],b)}});"stat"==c?f.multiselect({selectedList:100,noneSelectedText:"Select attribute stat",click:function(a,b){updateSeries()},position:{my:"right center",at:"right center"},checkAll:function(){updateSeries()},uncheckAll:function(){updateSeries()}}):(f.multiselect({selectedList:100,noneSelectedText:"Select ratio stat",position:{my:"right center",at:"right center"},
click:function(a,b){var c=this.id.split("_");$("#fcst_stat_mode_config_"+c[c.length-2]+"_"+c[c.length-1]).css("display","none");try{$("#fcst_stat_mode_"+c[c.length-2]+"_"+c[c.length-1]).multiselect("uncheckAll")}catch(d){console.log("Error "+d)}$("input[name=statistics][value=aggregation_statistics]").prop("checked",!0);$("#agg_stat").val("mode");try{$("#agg_stat").multiselect("refresh")}catch(d){}$("#aggregation_statistics ").show();$("#calculations_statistics ").hide();updateSeries()},checkAll:function(){updateSeries()},
uncheckAll:function(){updateSeries()}}),"N/A"==$("#fcst_var_"+a+"_"+(b+1)).multiselect("getChecked").val()?f.multiselect("disable"):f.multiselect("enable"),g.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:225,height:300,noneSelectedText:"Select attribute stat",allUnselected:!0,position:{my:"right center",at:"right center"},click:function(a,b){var c=this.id.split("_");try{$("#fcst_stat_"+c[c.length-2]+"_"+c[c.length-1]).multiselect("uncheckAll")}catch(d){}c=$("#fcst_stat_mode_config_"+
c[c.length-2]+"_"+c[c.length-1]);c.css("display","block");"ACOV"==b.value?c.find(".non-acov").attr("disabled",!0):c.find(".non-acov").removeAttr("disabled");-1<listStatModePair.indexOf(b.value)?c.find(".non-pair").attr("disabled",!0):c.find(".non-pair").removeAttr("disabled");$("input[name=statistics][value=calculations_statistics]").prop("checked",!0);$("#calc_stat").val("none");try{$("#calc_stat").multiselect("refresh")}catch(d){}$("#aggregation_statistics ").hide();$("#calculations_statistics ").show();
updateSeries()}}))}
function loadXMLStatistics(){if(0<initXML.find("plot").find("agg_stat").length){$("input[name=statistics][value=aggregation_statistics]").prop("checked",!0);$("#calculations_statistics").hide();$("#aggregation_statistics").show();"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_ctc")).text()?$("#agg_stat").val("ctc"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_sl1l2")).text()?$("#agg_stat").val("sl1l2"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_sal1l2")).text()?$("#agg_stat").val("sal1l2"):
"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_pct")).text()?$("#agg_stat").val("pct"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_nbrcnt")).text()?$("#agg_stat").val("nbrcnt"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_ssvar")).text()?$("#agg_stat").val("ssvar"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_vl1l2")).text()?$("#agg_stat").val("vl1l2"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_val1l2")).text()?$("#agg_stat").val("val1l2"):
"mode"===selected_mode&&-1!==listStatModelRatio.indexOf(fcst_stat[0])&&$("#agg_stat").val("mode");try{$("#agg_stat").multiselect("refresh")}catch(b){}$("#boot_repl").val($(initXML.find("plot").find("agg_stat").find("boot_repl")).text());var a=$(initXML.find("plot").find("agg_stat").find("boot_random_seed")).text();Number.isInteger(a)?$("#boot_random_seed").val(a):$("#boot_random_seed").val("");$("#boot_ci").val($(initXML.find("plot").find("agg_stat").find("boot_ci")).text());$("#cacheAggStat").prop("checked",
"TRUE"==$(initXML.find("plot").find("agg_stat").find("cache_agg_stat")).text())}else if(0<initXML.find("plot").find("calc_stat").length){$("input[name=statistics][value=calculations_statistics]").prop("checked",!0);$("#calculations_statistics").show();"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_ctc")).text()?$("#calc_stat").val("ctc"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_sl1l2")).text()?$("#calc_stat").val("sl1l2"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_sal1l2")).text()?
$("#calc_stat").val("sal1l2"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_vl1l2")).text()&&$("#calc_stat").val("vl1l2");try{$("#calc_stat").multiselect("refresh")}catch(b){}}else if("stat"===selected_mode)$("input[name=statistics][value=calculations_statistics]").prop("checked",!0),$("#aggregation_statistics ").hide(),$("#none").show();else if(-1!==listStatModelRatio.indexOf(fcst_stat[0])){$("input[name=statistics][value=aggregation_statistics]").prop("checked",!0);$("#agg_stat").val("mode");
try{$("#agg_stat").multiselect("refresh")}catch(b){}$("#aggregation_statistics ").show();$("#calculations_statistics ").hide()}else $("input[name=statistics][value=calculations_statistics]").prop("checked",!0),$("#aggregation_statistics ").hide(),$("#none").show()}
function loadXMLEclv(){var a;if(0<initXML.find("plot").find("series1").children().length)for(var b=initXML.find("plot").find("series1").children(),c=0;c<b.length;c++){a=[];addSeriesVarHist();var e=$(b[c]).attr("name");try{$("#series_var_y1_"+(c+1)).val(e).multiselect("refresh")}catch(d){}$(b[c]).find("val").each(function(){a.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(c+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+
(c+1)).css("display","none");updateSeriesVarValHist(c+1,a)}else a=$("#series_var_y1_1").first().val(),updateSeriesVarValHist(1,a);try{$("#plot_stat").val(initXML.find("plot").find("plot_stat").text()).multiselect("refresh")}catch(d){}loadXMLStatistics();updatePlotFix()}
function loadXMLRoc(){var a;if(0<initXML.find("plot").find("series1").children().length)for(var b=initXML.find("plot").find("series1").children(),c=0;c<b.length;c++){a=[];addSeriesVarHist();var e=$(b[c]).attr("name");try{$("#series_var_y1_"+(c+1)).val(e).multiselect("refresh")}catch(d){}$(b[c]).find("val").each(function(){a.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(c+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+
(c+1)).css("display","none");updateSeriesVarValHist(c+1,a)}else a=$("#series_var_y1_1").first().val(),updateSeriesVarValHist(1,a);updatePlotFix();c=$(initXML.find("plot").find("roc_calc").find("roc_pct")).text();b=$(initXML.find("plot").find("roc_calc").find("roc_ctc")).text();$("input[name=roc_type][value=pct]").prop("checked","TRUE"==c);$("input[name=roc_type][value=ctc]").prop("checked","TRUE"==b);if(initXML.find("plot").find("summary_curve")&&0<initXML.find("plot").find("summary_curve").children().length){b=
initXML.find("plot").find("summary_curve").children();for(c=0;c<b.length;c++)$("#summary_curve option[value='"+b[c]+"']").prop("selected",!0);try{$("#summary_curve").multiselect("refresh")}catch(d){}}}
function loadXMLHist(){var a,b=$(initXML.find("plot").find("template")).text();"rhist.R_tmpl"===b?($("input[name=hist_line_type][value=rhist]").prop("checked",!0),changeFixedVarHist("rhist")):"phist.R_tmpl"===b?($("input[name=hist_line_type][value=phist]").prop("checked",!0),changeFixedVarHist("phist")):"relp.R_tmpl"===b&&($("input[name=hist_line_type][value=relp]").prop("checked",!0),changeFixedVarHist("relp"));if(0<initXML.find("plot").find("series1").children().length)for(var b=initXML.find("plot").find("series1").children(),
c=0;c<b.length;c++){a=[];addSeriesVarHist();var e=$(b[c]).attr("name");try{$("#series_var_y1_"+(c+1)).val(e).multiselect("refresh")}catch(d){}$(b[c]).find("val").each(function(){for(var b=$(this).text().split(","),c=0;c<b.length;c++)a.push(b[c])});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(c+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(c+1)).css("display","none");updateSeriesVarValHist(c+1,a)}else a=
$("#series_var_1_1").first().val(),updateSeriesVarValHist(1,a);updatePlotFix();$("input[name=normalized_histogram][value="+$(initXML.find("plot").find("normalized_histogram")).text()+"]").prop("checked",!0)}
function loadXMLRely(){var a;if(0<initXML.find("plot").find("series1").children().length)for(var b=initXML.find("plot").find("series1").children(),c=0;c<b.length;c++){a=[];addSeriesVarHist();var e=$(b[c]).attr("name");try{$("#series_var_y1_"+(c+1)).val(e).multiselect("refresh")}catch(d){}$(b[c]).find("val").each(function(){a.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(c+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+
(c+1)).css("display","none");updateSeriesVarValHist(c+1,a)}else a=$("#series_var_y1_1").first().val(),updateSeriesVarValHist(1,a);updatePlotFix();c=$(initXML.find("plot").find("rely_event_hist")).text();$("input[name=rely_event_hist][value=true]").prop("checked","TRUE"==c||"true"==c);$("input[name=rely_event_hist][value=false]").prop("checked","FALSE"==c||"false"==c);$("#is_hist").buttonset("refresh");if(initXML.find("plot").find("summary_curve")&&0<initXML.find("plot").find("summary_curve").children().length){b=
initXML.find("plot").find("summary_curve").children();for(c=0;c<b.length;c++)$("#summary_curve option[value='"+b[c]+"']").prop("selected",!0);try{$("#summary_curve").multiselect("refresh")}catch(d){}}}
function loadXMLEns(){var a;if(0<initXML.find("plot").find("series1").children().length)for(var b=initXML.find("plot").find("series1").children(),c=0;c<b.length;c++){a=[];0!=c&&addSeriesVarEns();var e=$(b[c]).attr("name");try{$("#series_var_y1_"+(c+1)).val(e).multiselect("refresh")}catch(d){}$(b[c]).find("val").each(function(){a.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(c+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+
(c+1)).css("display","none");updateSeriesVarValEns(c+1,a)}else a=$("#series_var_y1_1").first().val(),updateSeriesVarValEns(1,a);updatePlotFix();b=$(initXML.find("plot").find("ensss_pts")).text();$("#ensss_pts").val(b);b=$(initXML.find("plot").find("ensss_pts_disp")).text();$("input[name=ensss_pts_disp][value=true]").prop("checked","TRUE"==b||"true"==b);$("input[name=ensss_pts_disp][value=false]").prop("checked","FALSE"==b||"false"==b);updateSeriesEns()}
function updatePlotFix(){if(0<$(initXML.find("plot").find("plot_fix")).children().length)for(var a=$(initXML.find("plot").find("plot_fix")).children(),b=0;b<a.length;b++){var c=[];0<b&&addFixedVarHist();var e=$(a[b]).attr("name");try{$("#fixed_var_"+(b+1)).val(e).multiselect("refresh")}catch(d){}$(a[b]).find("set").find("val").each(function(){c.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#fixed_var_val_date_period_button_"+(b+1)).css("display",
"block"):$("#fixed_var_val_date_period_button_"+(b+1)).css("display","none");updateFixedVarValHist(b+1,c)}}
function updatePlotFixSeries(){if(0<$(initXML.find("plot").find("plot_fix")).children().length)for(var a=$(initXML.find("plot").find("plot_fix")).children(),b=0;b<a.length;b++){var c=[],e=$(a[b]).attr("equalize");addFixedVar();var d=$(a[b]).attr("name");try{$("#fixed_var_"+(b+1)).val(d).multiselect("refresh")}catch(f){}$(a[b]).find("set").find("val").each(function(){c.push($(this).text())});"fcst_init_beg"==d||"fcst_valid_beg"==d||"fcst_valid"==d||"fcst_init"==d?$("#fixed_var_val_date_period_button_"+
(b+1)).css("display","block"):$("#fixed_var_val_date_period_button_"+(b+1)).css("display","none");updateFixedVarVal(b+1,c,e)}}
function loadXMLSeries(){$("#event_equal").prop("checked","true"==$(initXML.find("plot").find("event_equal")).text());var a=$(initXML.find("plot").find("dep").find("dep1").find("stat")[0]).text(),b=isModeStat(a)?"mode":"stat";try{$("#plot_data").val(b).multiselect("refresh")}catch(r){}updateForecastVariables();try{$("#plot_stat").val(initXML.find("plot").find("plot_stat").text()).multiselect("refresh")}catch(r){}"stat"===b?$.each(fix_var_value_to_title_stat_map,function(a,b){$("#fixed_var_1").append('<option value="'+
a+'">'+b+"</option>")}):$.each(fix_var_value_to_title_mode_map,function(a,b){$("#fixed_var_1").append('<option value="'+a+'">'+b+"</option>")});var c,e;e="Perf"===currentTab||"Taylor"===currentTab?1:2;for(var d,f=1;f<=e;f++){var g="y"+f,h=0;if(0<initXML.find("plot").find("dep").find("dep"+f).children().length)for(var l=initXML.find("plot").find("dep").find("dep"+f).children(),a=0;a<l.length;a++){d=[];c=$(l[a]).attr("name");0===h&&1===f||addFcstVar(g);try{$("#fcst_var_"+g+"_"+(h+1)).val(c).multiselect("refresh")}catch(r){}$(l[a]).find("stat").each(function(){d.push($(this).text())});
if("stat"===b)updateStats(g,h+1,d),h++;else if($.isArray(d))for(c=0;c<d.length;c++){if(0<c){addFcstVar(g);try{$("#fcst_var_"+g+"_"+(h+1)).val($(l[a]).attr("name")).multiselect("refresh")}catch(r){}}updateMode(g,h+1,d[c]);h++}else updateMode(g,h+1,d),h++}else"stat"===b?updateStats(g,1,""):updateMode(g,1,"");var k,n;if(0<initXML.find("plot").find("series"+f).children().length)for(h=initXML.find("plot").find("series"+f).children(),a=0;a<h.length;a++){k=[];n=!1;c=$(h[a]).attr("name");if(0!==a||1!==f)"Taylor"===
currentTab?addSeriesVarHist():addSeriesVar(g);try{$("#series_var_"+g+"_"+(a+1)).val(c).multiselect("refresh")}catch(r){}$(h[a]).find("val").each(function(){var a=$(this).text().split(",");1<a.length&&(n=!0);for(var b=0;b<a.length;b++)k.push(a[b])});"fcst_init_beg"==c||"fcst_valid_beg"==c||"fcst_valid"==c||"fcst_init"==c?$("#series_var_val_"+g+"_date_period_button_"+(a+1)).css("display","block"):$("#series_var_val_"+g+"_date_period_button_"+(a+1)).css("display","none");updateSeriesVarVal(g,a+1,k);
n&&$("#group_series_var_"+g+"_"+(a+1)).prop("checked",!0)}else k=$("#series_var_"+g+"_1").first().val(),updateSeriesVarVal(g,1,k)}updatePlotFixSeries();$("#txtPlotCond").val(initXML.find("plot").find("plot_cond").text());"mode"===b&&updateIndyVar(b);c=$(initXML.find("plot").find("indep")[0]).attr("name");try{$("#indy_var").val(c).multiselect("refresh")}catch(r){}"fcst_init_beg"==c||"fcst_valid_beg"==c||"fcst_valid"==c||"fcst_init"==c?$("#date_period_button").css("display","block"):$("#date_period_button").css("display",
"none");var t=[];indy_var_vals_to_attr={};$(initXML.find("plot").find("indep")[0]).find("val").each(function(){t.push($(this).text());var a={};a.label=$(this)[0].attributes.label.nodeValue;a.plot_val=$(this)[0].attributes.plot_val.nodeValue;indy_var_vals_to_attr[$(this).text()]=a});0<t.length&&($("#indy_var_val").multiselect("option","indy_var_vals_to_attr",indy_var_vals_to_attr),populateIndyVarVal(t));loadXMLStatistics();a=$(initXML.find("plot").find("tmpl").find("listDiffSeries1")).text();0===a.length&&
(a="list()");b=$(initXML.find("plot").find("tmpl").find("listDiffSeries2")).text();0===b.length&&(b="list()");if("list()"!==a)for(e=a.split("c("),a=1;a<e.length;a++)e[a]=e[a].replace(/\(/g,"").replace(/\)/g,"").replace(/"/g,""),seriesDiffY1.push(e[a]);if("list()"!==b)for(b=b.split("c("),a=1;a<b.length;a++)b[a]=b[a].replace(")","").replace(")","").replace('"',""),seriesDiffY2.push(b[a]);"Perf"===currentTab?updateSeriesPerf():"Taylor"===currentTab?(updateSeriesHist(),a=$(initXML.find("plot").find("taylor_voc")).text().toLowerCase(),
$("input[name=taylor_voc][value="+a+"]").prop("checked",!0),b=$(initXML.find("plot").find("taylor_show_gamma")).text().toLowerCase(),$("input[name=taylor_show_gamma][value="+b+"]").prop("checked",!0),"true"===a?$("#is_show_gamma").buttonset("enable"):$("#is_show_gamma").buttonset("disable")):updateSeries()}
function requestDBUpdate(){$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",data:"<request><list_db_update></list_db_update></request>",error:function(a,b,c){},success:function(a){a=$(a).find("val");var b=$("#database");b.empty();var c,e=[];null!=initXML&&(e=initXML.find("database").text().split(","));for(var d=0;d<a.length;d++){var f=$(a[d]);c=0<e.length?-1<e.indexOf(f.text()):0==d;$("<option />",{value:f.text(),text:f.text(),selected:c}).appendTo(b)}b.multiselect("refresh");$("#listdt").jqGrid("GridUnload");
initPage()}})}
function updateFixVar(a){for(var b=fixed_var_indexes.slice(),c=0;c<b.length;c++)removeFixedVar("fixed_var_"+b[c]);var e=$(".remove_fixed_var").prop("id").split("remove_fixed_var_")[1];try{$("#fixed_var_val_"+e).multiselect("uncheckAll"),$("#fixed_var_val_"+e).multiselect("refresh")}catch(d){}fixed_var_indexes.push(parseInt(e));$("#fixed_var_"+e).empty();"stat"==a?$.each(fix_var_value_to_title_stat_map,function(a,b){$("#fixed_var_"+e).append('<option value="'+a+'">'+b+"</option>")}):$.each(fix_var_value_to_title_mode_map,
function(a,b){$("#fixed_var_"+e).append('<option value="'+a+'">'+b+"</option>")});try{$("#fixed_var_"+e).multiselect("uncheckAll"),$("#fixed_var_"+e).multiselect("refresh")}catch(d){}}
function updateIndyVar(a){$("#indy_var").empty();"stat"==a?$.each(indy_var_value_to_title_stat_map,function(a,c){$("#indy_var").append('<option value="'+a+'">'+c+"</option>")}):$.each(indy_var_value_to_title_mode_map,function(a,c){$("#indy_var").append('<option value="'+a+'">'+c+"</option>")});try{$("#indy_var").multiselect("refresh")}catch(b){}$("#date_period").css("display","none")}String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)};
function createValDatePeriodDialog(a,b){var c=$("#"+a+"_date_period_start_"+b),e=$("#"+a+"_date_period_end_"+b);$("#"+a+"_date_period_"+b).dialog({width:295,autoOpen:!1,position:{my:"left bottom",at:"left top",of:"#"+a+"_date_period_button_"+b},resizable:!1,draggable:!1,buttons:{"Select values":function(){if(c.val()&&e.val()){var d=moment(c.val(),"YYYY-MM-DD HH:mm:ss"),f=moment(e.val(),"YYYY-MM-DD HH:mm:ss"),g=$("#"+a+"_date_period_by_"+b).val().trim(),h=$("#"+a+"_date_period_by_unit_"+b).val();0==
g.length&&(g=3600);g=parseFloat(g);"min"==h?g*=60:"hours"==h?g*=3600:"days"==h&&(g*=86400);var l;"fixed_var_val"==a?l=$(fixVarValResponse[b]).find("val"):"series_var_val_y1"==a?l=$(seriesY1VarValResponse[b]).find("val"):"series_var_val_y2"==a&&(l=$(seriesY2VarValResponse[b]).find("val"));for(d=d.clone();d<=f;){for(var h=d.format("YYYY-MM-DD HH:mm:ss"),k=!1,n=0;n<l.length;n++)if($(l[n]).text()==h){k=!0;break}k&&$("#"+a+"_"+b).find('option[value="'+h+'"]').prop("selected",!0);d.add(g,"seconds")}try{$("#"+
a+"_"+b).multiselect("refresh")}catch(t){console.log(t)}"fixed_var_val"!==a&&("Series"===currentTab||"Box"===currentTab||"Bar"===currentTab?updateSeries():"Roc"===currentTab||"Rely"===currentTab||"Hist"===currentTab||"Eclv"===currentTab?updateSeriesHist():(currentTab="Ens_ss",updateSeriesEns()))}$(this).dialog("close")}},open:function(d,f){var g;"fixed_var_val"==a?g=$(fixVarValResponse[b]).find("val"):"series_var_val_y1"==a?g=$(seriesY1VarValResponse[b]).find("val"):"series_var_val_y2"==a&&(g=$(seriesY2VarValResponse[b]).find("val"));
c.empty();e.empty();for(var h=0;h<g.length;h++){var l=$(g[h]),k=$("<option/>").attr("value",l.text()).text(l.text());l.text()==c.val()&&k.prop("selected",!0);c.append(k);l.text()==e.val()?k.prop("selected",!0):k.prop("selected",!1);e.append(k.clone())}e.find("option").last().prop("selected",!0);1<g.length&&(h=moment($(g[0]).text(),"YYYY-MM-DD HH:mm:ss"),g=moment($(g[1]).text(),"YYYY-MM-DD HH:mm:ss"),g=moment.duration({from:h,to:g}),$("#"+a+"_date_period_by_"+b).val(g.as("hours")))}})}
function createDatePeriodDialog(){var a=$("#date_period_start"),b=$("#date_period_end"),c=$("#indy_var_val");$("#date_period_dialog").dialog({width:295,autoOpen:!1,position:{my:"left bottom",at:"left top",of:"#date_period_button"},resizable:!1,draggable:!1,buttons:{"Select values":function(){if(a.val()&&b.val()){var e=moment(a.val(),"YYYY-MM-DD HH:mm:ss"),d=moment(b.val(),"YYYY-MM-DD HH:mm:ss"),f=$("#date_period_by").val().trim(),g=$("#date_period_by_unit").val();0==f.length&&(f=3600);f=parseInt(f);
"min"==g?f*=60:"hours"==g?f*=3600:"days"==g&&(f*=86400);g=$(previousIndVarValResponse).find("val");for(e=e.clone();e<=d;){for(var h=e.format("YYYY-MM-DD HH:mm:ss"),l=!1,k=0;k<g.length;k++)if($(g[k]).text()==h){l=!0;break}l&&c.find('option[value="'+h+'"]').prop("selected",!0);e.add(f,"seconds")}try{c.multiselect("refresh")}catch(n){}}$(this).dialog("close")}},open:function(e,d){var f=c.val();null==f&&(f=[]);populateIndyVarVal(f);var f=$(previousIndVarValResponse).find("val"),g=a.val(),h=b.val();a.empty();
b.empty();for(var l=0;l<f.length;l++){var k=$(f[l]),n=$("<option/>").attr("value",k.text()).text(k.text());k.text()==g&&n.prop("selected",!0);a.append(n);k.text()==h?n.prop("selected",!0):n.prop("selected",!1);b.append(n.clone())}b.find("option").last().prop("selected",!0);1<f.length&&(g=moment($(f[0]).text(),"YYYY-MM-DD HH:mm:ss"),f=moment($(f[1]).text(),"YYYY-MM-DD HH:mm:ss"),f=moment.duration({from:g,to:f}),$("#date_period_by").val(f.as("hours")))}})}
function myelem(a,b){var c=document.createElement("input");c.type="text";c.value=a;c.className="cp-basic";c.style.width="60px";$(c).colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),showOn:"both",buttonColorize:!0,buttonImageOnly:!0});return c}function myvalue(a,b,c){if("get"===b)return $(a).val();"set"===b&&$("input",a).val(c)}"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0==this.indexOf(a)});
function colorDisplayFmatter(a,b,c){return'<input id="color_'+c.id+'" type="text" value="'+c.color+'" size="8" style="background-color:'+c.color+';">'}function colorDisplayUnmatter(a,b,c){a=jQuery("input",c).css("background-color").match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);a[0]="#";for(b=1;3>=b;++b)a[b]=parseInt(a[b]).toString(16),1==a[b].length&&(a[b]="0"+a[b]);return a.join("")}
function querySt(a){for(var b=window.location.href.split(/[\?&]+/),c=0;c<b.length;c++){var e=b[c].split("=");if(e[0]==a)return e[1]}}function downloadPlot(a){a=""+('<input type="hidden" name="plot" value="'+resultName+'" />');a+='<input type="hidden" name="type" value="'+currentPlotTab+'" />';$('<form action="download" method="get">'+a+"</form>").appendTo("body").submit().remove()}
function viewImage(a){boxID+=1;window_center+=20;window_top+=20;$("<div>").dialog({height:"655",width:"815",autoOpen:!1,resizable:!0,closeOnEscape:!0,focus:!0,dialogClass:"dialog-box-"+boxID,title:a,position:{my:"center+"+window_center+" top+"+window_top,at:"center top",of:window},close:function(a){$(this).empty();$(this).dialog("destroy");window_center-=20;window_top-=20},open:function(b){$(this).html('<img src="'+urlOutput+"plots/plot_"+a+'.png" onError="this.src=\'images/no_image.png\';"/>')}}).dialog("open")}
function updateResult(a){resultName=a;$("#plot_display_inner_header").text(resultName.replace("plot_",""));$("#plot_image").error(function(){$(this).attr("src","images/no_image.png")}).attr("src",urlOutput+"plots/"+resultName+".png");$.ajax({type:"GET",url:urlOutput+"xml/"+resultName+".xml",dataType:"xml",success:function(a){a="msie"==jQuery.browser?a.xml:(new XMLSerializer).serializeToString(a);document.getElementById("plot_xml").innerHTML=formatXml(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />")},error:function(){document.getElementById("plot_xml").innerHTML=""}});$.ajax({type:"GET",url:urlOutput+"xml/"+resultName+".sql",dataType:"text",success:function(a){document.getElementById("plot_sql").innerHTML=a.replace(/\n/g,"<br />")},error:function(){document.getElementById("plot_sql").innerHTML=""}});$.ajax({type:"GET",url:urlOutput+"scripts/"+resultName+".R",dataType:"text",success:function(a){document.getElementById("r_script").innerHTML=
a.replace(/\n/g,"<br />")},error:function(){document.getElementById("r_script").innerHTML=""}});$.ajax({type:"GET",url:urlOutput+"xml/"+resultName+".log",dataType:"text",success:function(a){document.getElementById("plot_log").innerHTML=a.replace(/\n/g,"<br />")},error:function(){document.getElementById("plot_log").innerHTML=""}});$("#ui-tabs-1").empty();$("#r_data_url").prop("href",urlOutput+"data/"+resultName+".data");$("#y1_points_url").prop("href",urlOutput+"data/"+resultName+".points1");$("#y2_points_url").prop("href",
urlOutput+"data/"+resultName+".points2");$("#plot_display_inner").tabs({active:0})}
function initPage(){outerLayout=$("body").layout({name:"outer",north__paneSelector:"#header",south__paneSelector:"#series_formatting",north__closable:!1,north__resizable:!1,north__spacing_open:0,north__size:55,east__paneSelector:"#plot_display",center__paneSelector:"#plot_config",south__minSize:112,east__size:"50%",east__minSize:100,east__maxSize:800,east__onresize:"innerLayout.resizeAll",resizeWhileDragging:!0,east__closable:!1,west__resizable:!0,west__spacing_closed:15,west__togglerLength_closed:20,
west__togglerAlign_closed:"top",west__paneSelector:"#history",west__initClosed:!0,west__togglerLength_open:0,west__initClose:!0,west__togglerTip_open:"Close History",west__togglerTip_closed:"Open History",west__togglerClass:"history-toggler",west__fxName:"slide",autoBindCustomButtons:!0,south__togglerLength_open:0,west__onopen_start:function(){refreshHistory()},useStateCookie:!1});$("#plot_display_inner").tabs({heightStyle:"content",beforeActivate:function(a,b){currentPlotTab=b.newPanel.attr("aria-labelledby")},
load:function(a,b){var c=$("<pre/>").text(b.panel.text());b.panel.empty();b.panel.append(c)}});$("#tab-south").tabs({collapsible:!1});innerLayout=$("#plot_display").layout({name:"inner",closable:!1,center__paneSelector:"#plot_display_inner",south__spacing_closed:0,south__size:"30%",south__paneSelector:"#tab-south",south__resizable:!0,south__minSize:30});$("body").on("resize",function(){$("#plot_display_inner").tabs("refresh")});$("<span></span>").attr("id","west-closer").prependTo("body > .ui-layout-west");
outerLayout.addCloseBtn("#west-closer","west");$("#listdt").jqGrid({datatype:"local",autowidth:!0,shrinkToFit:!0,colNames:"ID;#;Y axis;Hide;Title;Conf Interval;Line Color;Point Symbol;Series Line Type;Line Type;Line Width;Show Significant;Connect Across NA;Legend Text".split(";"),colModel:[{name:"id",index:"id",hidden:!0},{name:"order",width:10,index:"order",sortable:!1},{name:"y_axis",width:30,index:"y_axis",align:"center"},{name:"hide",index:"hide",width:30,align:"center",editable:!0,edittype:"checkbox",
editoptions:{value:"Yes:No"}},{name:"title",index:"title",width:300},{name:"plot_ci",index:"plot_ci",width:70,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"none:none;boot:boot;norm:norm;brier:brier;std:std"},align:"center"},{name:"color",index:"color",width:40,editable:!0,edittype:"custom",editoptions:{custom_element:myelem,custom_value:myvalue},formatter:colorDisplayFmatter,unformat:colorDisplayUnmatter,align:"center"},{name:"pch",index:"pch",editable:!0,width:70,align:"center",
edittype:"select",formatter:"select",editoptions:{value:"20:Small circle;19:Circle;15:Square;17:Triangle;18:Rhombus;1:Ring"}},{name:"type",index:"type",sortable:!1,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"p:points;l:lines;o:overplotted;b:joined lines;s:stair steps;h:histogram-like;n:nothing"},width:50,align:"center"},{name:"lty",index:"lty",sortable:!1,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"1:solid;2:dashed;3:dotted;4:dot-dash;5:long dash;6:long short"},
width:70,align:"center"},{name:"lwd",index:"lwd",sortable:!1,editable:!0,sorttype:"int",width:40,align:"center"},{name:"show_signif",index:"hide",width:30,align:"center",editable:!0,edittype:"checkbox",editoptions:{value:"Yes:No"}},{name:"con_series",index:"con_series",sortable:!1,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"0:No;1:Yes"},width:30,align:"center"},{name:"legend",index:"legend",sortable:!1,width:150,align:"left",editable:!0}],rowNum:-1,height:"auto",pager:"#pagerdt",
pginput:!1,pgtext:!1,pgbuttons:!1,viewrecords:!0,caption:"Series Formatting",cmTemplate:{title:!1},cellEdit:!0,hoverrows:!1,url:"clientArray",cellsubmit:"clientArray",afterInsertRow:function(a,b){$("#color_"+b.id).colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" ")})},beforeEditCell:function(a,b,c,g,h){lastSelRow=g;lastSelCol=h}});$("#listdt").jqGrid("navGrid","#pagerdt",{edit:!1,add:!1,del:!1,search:!1,refresh:!1});$("#listdt").jqGrid("navButtonAdd","#pagerdt",{caption:"Add Derived Curve",
title:"Add Derived Curve",buttonicon:"ui-icon-plus",onClickButton:function(){"Roc"==currentTab||"Rely"==currentTab||"Ens_ss"==currentTab||"Perf"==currentTab||"Hist"===currentTab||"Eclv"===currentTab?$("#unavailableDiffCurveDialogForm").dialog("open"):1<$("#listdt").jqGrid("getRowData").length?$("#addDiffCurveDialogForm").dialog("open"):$("#incorrectDiffCurveDialogForm").dialog("open")}}).jqGrid("navButtonAdd","#pagerdt",{caption:"Remove Derived Curve",title:"Remove Derived Curve",buttonicon:"ui-icon-trash",
onClickButton:function(){var a=$(this).jqGrid("getGridParam","selrow");if(a){var b=$(this).getRowData(a);if(b.title.startsWith("DIFF")||b.title.startsWith("RATIO")||b.title.startsWith("SS")){$(this).jqGrid("delRowData",a);var c;if(b.title.startsWith("DIFF")){c=b.title.replace("DIFF (","").replace(")","").split('"-"');for(a=0;a<c.length;a++)c[a]=c[a].replace('"',"");a=c.join()+",DIFF"}else if(b.title.startsWith("RATIO")){c=b.title.replace("RATIO (","").replace(")","").split('"/"');for(a=0;a<c.length;a++)c[a]=
c[a].replace('"',"");a=c.join()+",RATIO"}else{c=b.title.replace("SS (","").replace(")","").split('"and"');for(a=0;a<c.length;a++)c[a]=c[a].replace('"',"");a=c.join()+",SS"}"Y1"==b.y_axis?(b=seriesDiffY1.indexOf(a),-1<b&&seriesDiffY1.splice(b,1)):(b=seriesDiffY2.indexOf(a),-1<b&&seriesDiffY2.splice(b,1));b=$("#listdt").jqGrid("getRowData");for(a=0;a<b.length;a++)$("#listdt").jqGrid("setCell",b[a].id,"order",a+1),$("#listdt").jqGrid("getLocalRow",b[a].id).order=a+1}else b="#alertmod_"+this.p.id,$.jgrid.viewModal(b,
{gbox:"#gbox_"+$.jgrid.jqID(this.p.id),jqm:!0}),$(b).find("#alertcnt_listdt").empty().append("<div>This is not a dirived curve</div>"),$(b).find(".ui-jqdialog-titlebar-close").focus()}else b="#alertmod_"+this.p.id,$.jgrid.viewModal(b,{gbox:"#gbox_"+$.jgrid.jqID(this.p.id),jqm:!0}),$(b).find(".ui-jqdialog-titlebar-close").focus()}}).jqGrid("navButtonAdd","#pagerdt",{caption:"Apply defaults",title:"Apply defaults",buttonicon:"ui-icon-transferthick-e-w",onClickButton:function(){alert("defaults..")}});
$("#listdt").setGridWidth($(window).width()-20);$("#unavailableDiffCurveDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}});$("#incorrectDiffCurveDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}});$("#addDiffCurveDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{"Create Derived Curve":function(){var a=!1,b=$("input:radio[name=yAxisDiff]:checked").val(),
c=jQuery("input[name=derive_oper]:checked").val();-1!==b.indexOf("1")?$("#series1Y1").val()&&$("#series2Y1").val()&&(seriesDiffY1.push($("#series1Y1").val()+","+$("#series2Y1").val()+","+c),a=!0):$("#series1Y2").val()&&$("#series2Y2").val()&&(seriesDiffY2.push($("#series1Y2").val()+","+$("#series2Y2").val()+","+c),a=!0);$(this).dialog("close");a&&(updateSeries(),$("#event_equal").prop("checked",!0))},Cancel:function(){$(this).dialog("close")}},open:function(){$("input[name=derive_oper][value=DIFF]").prop("checked",
!0);for(var a=$("#listdt").jqGrid("getRowData"),b=0;b<a.length;b++)$("#listdt").jqGrid("setCell",a[b].id,"order",b+1),$("#listdt").jqGrid("getLocalRow",a[b].id).order=b+1;var c=$("#plot_data").multiselect("getChecked").val();$("#series1Y2").empty();$("#series1Y1").empty();$("#series2Y2").empty();$("#series2Y1").empty();$("#y1AxisDiff").prop("checked",!0);$("#y2AxisDiff").removeAttr("checked");$("#series1Y2").prop("disabled",!0);$("#series2Y2").prop("disabled",!0);$("#series1Y1").removeProp("disabled");
$("#series2Y1").removeProp("disabled");$("#y2AxisDiff").removeProp("disabled");$("#y1AxisDiff").removeProp("disabled");series1Names=[];series2Names=[];for(b=0;b<a.length;b++){var g=!1;if(0!=a[b].title.indexOf("DIFF")&&0!=a[b].title.indexOf("RATIO")&&0!=a[b].title.indexOf("SS"))if("mode"==c){var h=a[b].title.split(" ");-1<listStatModelRatio.indexOf(h[h.length-1])&&(g=!0)}else g=!0;g&&(-1!==a[b].y_axis.indexOf("2")?($("#series1Y2").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),
$("#series1Y2").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),series2Names.push(a[b].title)):($("#series1Y1").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),$("#series2Y1").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),series1Names.push(a[b].title)))}0<$("#series1Y2 option").length&&0<$("#series1Y1 option").length?createNewDerivedSeriesName(1):(0==$("#series1Y2 option").length&&($("#y2AxisDiff").attr("disabled",!0),createNewDerivedSeriesName(1)),
0==$("#series1Y1 option").length&&($("#y1AxisDiff").attr("disabled",!0),$("#y1AxisDiff").removeAttr("checked"),$("#y2AxisDiff").prop("checked",!0),$("#series1Y2").removeAttr("disabled"),$("#series2Y2").removeAttr("disabled"),$("#series1Y1").attr("disabled",!0),$("#series2Y1").attr("disabled",!0),createNewDerivedSeriesName(2)))},close:function(){}});$(window).bind("resize",function(){$("#listdt").setGridWidth($(window).width()-20)}).trigger("resize");$("#listdt").jqGrid("sortableRows",{update:function(a,
b){for(var c=$("#listdt").jqGrid("getRowData"),g=0;g<c.length;g++)$("#listdt").jqGrid("setCell",c[g].id,"order",g+1),$("#listdt").jqGrid("getLocalRow",c[g].id).order=g+1}});$("#pagerdt_left table.navtable tbody tr").append('<td><div ><input type="checkbox"  style="margin:0 4px;" id="seriesLock"/><label for="seriesLock">Lock Formatting</label></div></td>');$("#seriesLock").change(function(){$(this).is(":checked")?$(this).attr("checked","checked"):$(this).removeAttr("checked")});$("#generate_plot").button({}).click(function(){sendXml()});
$("#load_xml").button({}).click(function(){$("#upload_file_dialog").dialog("open")});$("#reload_databases").button({}).click(function(){requestDBUpdate()});$("input[name=show_history_choice][value=show_history_success]").prop("checked",!0);$("#show_history_choice").buttonset();$("#grid_col").colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),showOn:"focus alt click",buttonColorize:!0,buttonImageOnly:!0});$("#grid_col").colorpicker("setColor","#CCCCCC");$("#caption_col").colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),
showOn:"focus alt click",buttonColorize:!0,buttonImageOnly:!0});$("#caption_col").colorpicker("setColor","#333333");$("#error_message").dialog({modal:!0,autoOpen:!1,buttons:{Ok:function(){$(this).dialog("close")}}});$("#r_error_message").dialog({modal:!1,autoOpen:!1,height:360,buttons:{Ok:function(){$(this).dialog("close")}}});$("#upload_file_dialog").dialog({modal:!0,autoOpen:!1,buttons:{OK:function(){$("#formUpload").submit()},Cancel:function(){$(this).dialog("close")}}});$("#refresh_history").button({icons:{primary:"ui-icon-refresh"},
text:!1}).click(function(){refreshHistory()});$.ajaxSetup({beforeSend:function(){$("#modal").css("display","block");$("#fade").css("display","block")},complete:function(){$("#modal").css("display","none");$("#fade").css("display","none")}});$("#download_plot").button({icons:{primary:"ui-icon-disk"},text:!1}).click(function(){downloadPlot()});$("#reset_formatting").button({icons:{primary:"ui-icon-arrowrefresh-1-w"},text:!1}).click(function(){resetFormatting()});$("#plot_image").click(function(){resultName&&
0<resultName.length&&viewImage(resultName.replace("plot_",""))});var a=0;if(null!=initXML){var b=initXML.find("plot").find("template")[0].innerHTML;"series_plot.R_tmpl"===b?currentTab="Series":"box_plot.R_tmpl"===b?currentTab="Box":"bar_plot.R_tmpl"===b?currentTab="Bar":"rhist.R_tmpl"===b||"phist.R_tmpl"===b||"relp.R_tmpl"===b?currentTab="Hist":"roc.R_tmpl"===b?currentTab="Roc":"eclv.R_tmpl"===b?currentTab="Eclv":"rely.R_tmpl"===b?currentTab="Rely":"ens_ss.R_tmpl"===b?currentTab="Ens_ss":"performance.R_tmpl"===
b?currentTab="Perf":"taylor_plot.R_tmpl"===b&&(currentTab="Taylor");for(var b=$("#plot_config").find("a"),c=0;c<b.length;c++)if(b[c].text===currentTab){a=c;break}}$("#plot_config").tabs({active:a,beforeActivate:function(a,b){var c=b.oldTab.attr("aria-controls");$("#"+c).empty();cleanUp();currentTab=b.newTab.text()},beforeLoad:function(a,b){b.jqXHR.error(function(){b.panel.html("Couldn't load this tab. We'll try to fix this as soon as possible. If this wouldn't be a demo.")})}});null!=initXML?($("#plot_title").val($(initXML.find("plot").find("tmpl").find("title")).text()),
$("#x_label_title").val($(initXML.find("plot").find("tmpl").find("x_label")).text()),$("#y1_label_title").val($(initXML.find("plot").find("tmpl").find("y1_label")).text()),$("#y2_label_title").val($(initXML.find("plot").find("tmpl").find("y2_label")).text()),$("#caption").val($(initXML.find("plot").find("tmpl").find("caption")).text()),$("#vert_plot").prop("checked","true"==$(initXML.find("plot").find("vert_plot")).text()),$("#x_reverse").prop("checked","true"==$(initXML.find("plot").find("x_reverse")).text()),
$("#num_stats").prop("checked","true"==$(initXML.find("plot").find("num_stats")).text()),$("#grid_on").prop("checked","true"==$(initXML.find("plot").find("grid_on")).text()),$("#sync_axes").prop("checked","true"==$(initXML.find("plot").find("sync_axes")).text()),$("#dump_points1").prop("checked","true"==$(initXML.find("plot").find("dump_points1")).text()),$("#dump_points2").prop("checked","true"==$(initXML.find("plot").find("dump_points2")).text()),$("#indy1_stag").prop("checked","true"==$(initXML.find("plot").find("indy1_stag")).text()),
$("#indy2_stag").prop("checked","true"==$(initXML.find("plot").find("indy2_stag")).text()),$("#varianceInflationFactor").prop("checked","true"==$(initXML.find("plot").find("varianceinflationfactor")).text()),$("#ci_alpha").val($(initXML.find("plot").find("ci_alpha")).text()),$("#plot_type").val($(initXML.find("plot").find("plot_type")).text()),$("#plot_height").val($(initXML.find("plot").find("plot_height")).text()),$("#plot_width").val($(initXML.find("plot").find("plot_width")).text()),$("#plot_units").val($(initXML.find("plot").find("plot_units")).text()),
$("#cex").val($(initXML.find("plot").find("cex")).text()),$("#plot_res").val($(initXML.find("plot").find("plot_res")).text()),a=$(initXML.find("plot").find("mar")).text().replace("c(","").replace(")","").split(","),$("#mar_bottom").val(a[0]),$("#mar_left").val(a[1]),$("#mar_top").val(a[2]),$("#mar_right").val(a[3]),a=$(initXML.find("plot").find("mgp")).text().replace("c(","").replace(")","").split(","),$("#mgp_title").val(a[0]),$("#mgp_labels").val(a[1]),$("#mgp_line").val(a[2]),$("#title_align").val($(initXML.find("plot").find("title_align")).text()),
$("#title_offset").val($(initXML.find("plot").find("title_offset")).text()),$("#title_size").val($(initXML.find("plot").find("title_size")).text()),$("#title_weight").val($(initXML.find("plot").find("title_weight")).text()),$("#grid_lty").val($(initXML.find("plot").find("grid_lty")).text()),$("#grid_lwd").val($(initXML.find("plot").find("grid_lwd")).text()),$("#grid_col").colorpicker("setColor",$(initXML.find("plot").find("grid_col")).text()),$("#grid_x").val($(initXML.find("plot").find("grid_x")).text()),
$("#plot_cmd").val($(initXML.find("plot").find("plot_cmd")).text()),$("#xlab_align").val($(initXML.find("plot").find("xlab_align")).text()),$("#xlab_offset").val($(initXML.find("plot").find("xlab_offset")).text()),$("#xlab_size").val($(initXML.find("plot").find("xlab_size")).text()),$("#xlab_weight").val($(initXML.find("plot").find("xlab_weight")).text()),$("#xtlab_horiz").val($(initXML.find("plot").find("xtlab_horiz")).text()),$("#xtlab_perp").val($(initXML.find("plot").find("xtlab_perp")).text()),
$("#xtlab_size").val($(initXML.find("plot").find("xtlab_size")).text()),$("#xtlab_freq").val($(initXML.find("plot").find("xtlab_freq")).text()),$("#xtlab_orient").val($(initXML.find("plot").find("xtlab_orient")).text()),$("#x2lab_align").val($(initXML.find("plot").find("x2lab_align")).text()),$("#x2lab_offset").val($(initXML.find("plot").find("x2lab_offset")).text()),$("#x2lab_size").val($(initXML.find("plot").find("x2lab_size")).text()),$("#x2lab_weight").val($(initXML.find("plot").find("x2lab_weight")).text()),
$("#x2tlab_horiz").val($(initXML.find("plot").find("x2tlab_horiz")).text()),$("#x2tlab_perp").val($(initXML.find("plot").find("x2tlab_perp")).text()),$("#x2tlab_size").val($(initXML.find("plot").find("x2tlab_size")).text()),$("#x2tlab_orient").val($(initXML.find("plot").find("x2tlab_orient")).text()),$("#ylab_align").val($(initXML.find("plot").find("ylab_align")).text()),$("#ylab_offset").val($(initXML.find("plot").find("ylab_offset")).text()),$("#ylab_size").val($(initXML.find("plot").find("ylab_size")).text()),
$("#ylab_weight").val($(initXML.find("plot").find("ylab_weight")).text()),$("#ytlab_horiz").val($(initXML.find("plot").find("ytlab_horiz")).text()),$("#ytlab_perp").val($(initXML.find("plot").find("ytlab_perp")).text()),$("#ytlab_size").val($(initXML.find("plot").find("ytlab_size")).text()),$("#ytlab_orient").val($(initXML.find("plot").find("ytlab_orient")).text()),a=$(initXML.find("plot").find("y1_lim")).text().replace("c(","").replace(")","").split(","),$("#y1_lim_min").val(a[0]),$("#y1_lim_max").val(a[1]),
$("#y1_bufr").val($(initXML.find("plot").find("y1_bufr")).text()),$("#y2lab_align").val($(initXML.find("plot").find("y2lab_align")).text()),$("#y2lab_offset").val($(initXML.find("plot").find("y2lab_offset")).text()),$("#y2lab_size").val($(initXML.find("plot").find("y2lab_size")).text()),$("#y2lab_weight").val($(initXML.find("plot").find("y2lab_weight")).text()),$("#y2tlab_horiz").val($(initXML.find("plot").find("y2tlab_horiz")).text()),$("#y2tlab_perp").val($(initXML.find("plot").find("y2tlab_perp")).text()),
$("#y2tlab_size").val($(initXML.find("plot").find("y2tlab_size")).text()),$("#y2tlab_orient").val($(initXML.find("plot").find("y2tlab_orient")).text()),a=$(initXML.find("plot").find("y2_lim")).text().replace("c(","").replace(")","").split(","),$("#y2_lim_min").val(a[0]),$("#y2_lim_max").val(a[1]),$("#y2_bufr").val($(initXML.find("plot").find("y1_bufr")).text()),$("#legend_size").val($(initXML.find("plot").find("legend_size")).text()),a=$(initXML.find("plot").find("legend_inset")).text().replace("c(",
"").replace(")","").split(","),$("#legend_inset_min").val(a[0]),$("#legend_inset_max").val(a[1]),$("#legend_box").val($(initXML.find("plot").find("legend_box")).text()),$("#legend_ncol").val($(initXML.find("plot").find("legend_ncol")).text()),$("#caption_align").val($(initXML.find("plot").find("caption_align")).text()),$("#caption_offset").val($(initXML.find("plot").find("caption_offset")).text()),$("#caption_size").val($(initXML.find("plot").find("caption_size")).text()),$("#caption_weight").val($(initXML.find("plot").find("caption_weight")).text()),
a=$(initXML.find("plot").find("caption_col")).text(),7<a.length&&(a=a.substring(0,7)),$("#caption_col").colorpicker("setColor",a)):resetFormatting();$("#release").on("click",function(){var a=window.open("doc/versions.html");a?a.focus():alert("Please allow popups for this site")})}function addThemeSwitcher(a,b){$('<div id="themeContainer" style="position: absolute; overflow-x: hidden;"></div>').css($.extend({top:"15px",zIndex:10},b)).appendTo(a||"body").themeswitcher()}
function changeFixedVarHist(a){var b={};"rhist"===a?b=rhist_fixed_var_map:"phist"===a?b=phist_fixed_var_map:"relp"===a&&(b=relp_fixed_var_map);for(var c=0;c<fixed_var_indexes.length;c++){var e=$("#fixed_var_"+fixed_var_indexes[c]).val();$("#fixed_var_"+fixed_var_indexes[c]).empty();$.each(b,function(a,b){a===e?$("#fixed_var_"+fixed_var_indexes[c]).append($('<option value="'+a+'" selected>'+b+"</option>")):$("#fixed_var_"+fixed_var_indexes[c]).append($('<option value="'+a+'">'+b+"</option>"))});$("#fixed_var_"+
fixed_var_indexes[c]).multiselect("refresh")}};
