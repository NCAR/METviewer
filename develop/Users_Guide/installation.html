

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. METviewer Installation Guide &mdash; METviewer develop documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://dtcenter.github.io/METviewer/latest/Users_Guide/installation.html"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="METviewer develop documentation" href="../index.html"/>
        <link rel="up" title="User’s Guide" href="index.html"/>
        <link rel="next" title="3. Common XML Structures" href="common.html"/>
        <link rel="prev" title="1. Overview of METviewer" href="overview.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> METviewer
          

          
            
            <img src="../_static/met_viewer_logo_2019_09.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>develop</option>
                      
                        
                          <option value="../latest">latest</option>
                        
                      
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METviewer</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">1. Overview of METviewer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. METviewer Installation Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-metviewer">2.2. Installing METviewer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configure-and-build-metviewer">2.2.1. Configure and build METviewer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#making-a-database-accessible-in-the-metviewer-web-application">2.3. Making a Database Accessible in the METviewer Web Application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="common.html">3. Common XML Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="database_loading.html">4. Database Loading Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="database_scrubbing.html">5. Database Scrubbing Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">6. Testing Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_service.html">7. METviewer Web Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html">8. Batch Plotting Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="seriesplots.html">9. Series Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="barplots.html">10. Bar Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="boxplot.html">11. Box Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="rocplot.html">12. Receiver Operating Characteristic (ROC) Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="reliabilityplots.html">13. Reliability Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="perfdiag.html">14. Performance Diagrams</a></li>
<li class="toctree-l2"><a class="reference internal" href="taylordiag.html">15. Taylor Diagrams</a></li>
<li class="toctree-l2"><a class="reference internal" href="contourplot.html">16. Contour Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="spreadskillplot.html">17. Spread vs. Skill Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="eclvplots.html">18. Economic Cost/Loss Value Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="scorecard.html">19. Scorecards</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">METviewer</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">User’s Guide</a> &raquo;</li>
        
      <li><span class="section-number">2. </span>METviewer Installation Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Users_Guide/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metviewer-installation-guide">
<span id="install"></span><h1><span class="section-number">2. </span>METviewer Installation Guide<a class="headerlink" href="#metviewer-installation-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2><span class="section-number">2.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This chapter describes how to install METviewer. METviewer has been
developed and tested on Linux operating systems. Support for additional
platforms and compilers may be added in future releases.</p>
</div>
<div class="section" id="installing-metviewer">
<h2><span class="section-number">2.2. </span>Installing METviewer<a class="headerlink" href="#installing-metviewer" title="Permalink to this headline">¶</a></h2>
<p>METviewer relies on the following tools. These must be installed and tested
prior to installing METviewer:</p>
<p><strong>Java JDK 1.8+</strong></p>
<p><strong>Ant</strong> - <a class="reference external" href="http://ant.apache.org/bindownload.cgi">download ant</a> and
install the latest version.</p>
<p><strong>Database</strong> - METviewer works with MySQL and MariaDB.
<a class="reference external" href="https://dev.mysql.com/downloads/mysql/">Download MySQL</a>
or <a class="reference external" href="https://mariadb.org/download/">download MariaDB</a> and install the
latest version. Use “SET GLOBAL max_allowed_packet=110000000;” by typing
the command in MySQL and/or make the corresponding edit to <em>/etc/my.cnf</em>,
so that the change persists after the next reboot.</p>
<p><strong>Apache Tomcat</strong> -
<a class="reference external" href="https://tomcat.apache.org/download-80.cgi">download Apache Tomcat 8</a>
and install the latest version; test the sample JSP web apps.</p>
<p>Create an output directory under <em>&lt;Tomcat&gt;/webapps</em> for METviewer output
files. Under this directory create 4 subdirectories: <em>xml, plots, data,
scripts</em></p>
<p><strong>R and R packages</strong> - <a class="reference external" href="https://www.r-project.org/">download R</a> and
install the latest version. Install required R packages:</p>
<blockquote>
<div><ul class="simple">
<li><p>boot</p></li>
<li><p>plotrix</p></li>
<li><p>data.table</p></li>
<li><p>verification</p></li>
<li><p>gsl</p></li>
</ul>
</div></blockquote>
<p><strong>Python</strong>: install Python 3.6 or higher. Create an environment
(METviewer_py3.6.3) and install required packages:</p>
<blockquote>
<div><ul class="simple">
<li><p>kiwisolver==1.0.1</p></li>
<li><p>bootstrapped</p></li>
<li><p>plotly==4.9.0</p></li>
<li><p>kaleido</p></li>
<li><p>pandas</p></li>
<li><p>numpy</p></li>
<li><p>scipy</p></li>
<li><p>PyYAML</p></li>
<li><p>psutil</p></li>
<li><p>requests</p></li>
<li><p>matplotlib</p></li>
<li><p>lxml</p></li>
<li><p>pymysql</p></li>
<li><p>retrying</p></li>
</ul>
</div></blockquote>
<p><strong>METviewer</strong> -
clone   <a class="reference external" href="https://github.com/dtcenter/METviewer">METviewer repository</a></p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/dtcenter/METviewer.git
</pre></div>
</div>
</div></blockquote>
<p><strong>METcalcpy</strong> -
clone   <a class="reference external" href="https://github.com/dtcenter/METcalcpy">METcalcpy repository</a></p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/dtcenter/METcalcpy.git
</pre></div>
</div>
</div></blockquote>
<p><strong>METplotpy</strong> -
clone   <a class="reference external" href="https://github.com/dtcenter/METplotpy">METplotpy repository</a></p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/dtcenter/METplotpy.git
</pre></div>
</div>
</div></blockquote>
<div class="section" id="configure-and-build-metviewer">
<h3><span class="section-number">2.2.1. </span>Configure and build METviewer<a class="headerlink" href="#configure-and-build-metviewer" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Configure the batch and loading tools:</p>
<ul>
<li><p>Edit <em>METviewer/bin/mv_batch.sh</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the variable <strong>JAVA</strong> to point at the desired jvm instance to run</p></li>
<li><p>Set the variable <strong>MV_HOME</strong> to point at <em>[install]/METviewer</em></p></li>
<li><p>Set the variable <strong>PYTHON_ENV</strong> to point at the Python environment</p></li>
<li><p>Set the variable <strong>METCALCPY_HOME</strong> to point to <em>METcalcpy</em> directory</p></li>
<li><p>Set the variable <strong>METPLOTPY_HOME</strong> to point to <em>METplotpy</em> directory</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Edit <em>METviewer/bin/mv_load.sh</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the variable <strong>JAVA</strong> to point at the desired jvm instance to run</p></li>
<li><p>Set the variable <strong>MV_HOME</strong> to point at <em>METviewer</em></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Edit <em>METviewer/bin/mv_prune.sh</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the variable <strong>JAVA</strong> to point at the desired jvm instance to run</p></li>
<li><p>Set the variable <strong>MV_HOME</strong> to point at <em>METviewer</em></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Edit <em>METviewer/bin/mv_scorecard.sh</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the variable <strong>JAVA</strong> to point at the desired jvm instance to run</p></li>
<li><p>Set the variable <strong>MV_HOME</strong> to point at METviewer</p></li>
<li><p>Set the variable <strong>PYTHON_ENV</strong> to point at the Python environment</p></li>
<li><p>Set the variable <strong>METPLOTPY_HOME</strong> to point to METplotpy directory</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Create a custom property file by copying
<em>METviewer/webapp/metviewer/WEB-INF/classes/build.properties</em>
to <em>METviewer</em> and providing custom values for the parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set <strong>db.host</strong> to the database server host and port,
e.g. db.ncep.gov:3306</p></li>
<li><p>Set <strong>db.user</strong> and <strong>db.password</strong> to the database username
and password</p></li>
<li><p>Set <strong>db.management.system</strong> to the database type - mysql or mariadb</p></li>
<li><p>Set redirect to the application name in url (ex. if the
application URL is “<a class="reference external" href="http://www.dtcenter.org/met/metviewer/">http://www.dtcenter.org/met/metviewer/</a>”
redirect is “metviewer”)</p></li>
<li><p>Set <strong>output.dir</strong> to the absolute path of the output directory</p></li>
<li><p>Set <strong>webapps.dir</strong> to the absolute path of the Tomcat’s webapps
directory</p></li>
<li><p>Set <strong>url.output</strong> to the url to the output folder</p></li>
<li><p>Set <strong>python.env</strong> to the absolute path of the Python environment
directory</p></li>
<li><p>Set <strong>metcalcpy.home</strong> to the absolute path of the METcalcpy
directory</p></li>
<li><p>Set <strong>metplotpy.home</strong> to the absolute path of the METplotpy
directory</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Edit <em>METviewer/webapp/metviewer/WEB-INF/classes/log4j.properties</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set <strong>log4j.appender.logfile.File</strong> setting to the absolute
path of a log file</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p>Build and deploy the application:</p>
<ul class="simple">
<li><p>Build METviewer and the web application. <code class="docutils literal notranslate"><span class="pre">Replace</span> <span class="pre">the</span> <span class="pre">parameters</span>
<span class="pre">values</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">Ant</span> <span class="pre">command</span> <span class="pre">to</span> <span class="pre">what</span> <span class="pre">is</span> <span class="pre">appropriate</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">user's</span>
<span class="pre">setup</span></code>:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> cd MRTviewer
 ant -Dbuild.properties.file=METViewer/build.properties \
 -Ddb.management.system=mariadb -Dmetcalcpy.path=METcalcpy/ -Dmetplotpy.path=METplotpy/\
-Dpython.env.path=METviewer_py3.6.3/  clean all
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Deploy the web app to tomcat</p></li>
</ul>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cp METviewer/dist/metviewer.war Tomcat/webapps
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>Create a METviewer database:</p>
<ul class="simple">
<li><p>Create a database to store MET data, which has the prefix
‘mv_’, e.g. mv_met_data:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd METviewer
mysql -u[db_username] -p[db_password] -e&#39;create database [db_name];&#39;
mysql -u[db_username] -p[db_password] [db_name] &lt; sql/mv_mysql.sql
</pre></div>
</div>
</li>
<li><p>Install test directory (for development, optional):</p>
<ul class="simple">
<li><p>Check out test_data (<em>../apps/verif/metviewer_test_data/test_data/</em>)
from CVS and move test_data directory to <em>/d3/projects/METViewer/</em>:</p></li>
<li><p>Create links to R script and sql files</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /d3/projects/METViewer/test_data
ln -s /d3/projects/METViewer/src_dev/apps/verif/metviewer/R_tmpl R_tmpl
mkdir R_work
cd R_work
mkdir data
mkdir plots
mkdir scripts
ln -s /d3/projects/METViewer/src_dev/apps/verif/metviewer/R_work/include/ include
cd /d3/projects/METViewer/test_data/load_data/load
ln -s /d3/projects/METViewer/src_dev/apps/verif/metviewer/sql/mv_mysql.sql mv_mysql.sql
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="making-a-database-accessible-in-the-metviewer-web-application">
<h2><span class="section-number">2.3. </span>Making a Database Accessible in the METviewer Web Application<a class="headerlink" href="#making-a-database-accessible-in-the-metviewer-web-application" title="Permalink to this headline">¶</a></h2>
<p>To make a new database accessible in the METviewer Web Application click
on “Reload list of databases” button in the upper right corner of the
main JSP page. The list of available databases should be updated and a
new database should be in it.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="common.html" class="btn btn-neutral float-right" title="3. Common XML Structures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="1. Overview of METviewer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, UCAR/NCAR.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/pop_ver.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>