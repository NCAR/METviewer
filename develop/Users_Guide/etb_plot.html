

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Equivalence Testing Bounds Plots &mdash; METviewer develop documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://dtcenter.github.io/METviewer/latest/Users_Guide/etb_plot.html"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="METviewer develop documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> METviewer
          

          
            
            <img src="../_static/met_viewer_logo_2019_09.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>develop</option>
                      
                        
                          <option value="../latest">latest</option>
                        
                      
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METviewer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">METviewer</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Equivalence Testing Bounds Plots</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Users_Guide/etb_plot.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="equivalence-testing-bounds-plots">
<h1>Equivalence Testing Bounds Plots<a class="headerlink" href="#equivalence-testing-bounds-plots" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A statistical hypothesis is an assertion about the distribution function for one or more random variables.
Generally, two hypotheses are considered, a null hypothesis denoted by H0, and an alternative denoted by
either H1 or sometimes Ha. Most often H0 is a statement about the absence of an effect, e.g.,
no difference between two means.  However, it is not required to specify the absence of an effect,
and some hypothesis tests are constructed such that the null hypothesis is that there is an effect.
Two types of errors can occur in this setting: a type I error happens when H0 is rejected but it
is actually true, and a type II error occurs when it is not rejected even though it is false.
Most often, a type I error is considered the more serious error, so tests are constructed a priori
to control for this type of error. Power is the probability of rejecting the null hypothesis when
it is false (i.e., the probability of not making a type II error). If the power is close to 1,
the hypothesis test is good at detecting a false null hypothesis. Power is increased when a researcher
increases sample size, as well as when a researcher selects stronger effect sizes and significance levels.
An equivalence test is where H0 specifies that there is a difference, or that there is an effect.
For example, that the difference between two means is not zero. In model validation, equivalence
tests can help address the question of “Does the same code produce equivalent output using different
computers, compilers, and/or input data?” In the equivalence testing framework, two one-sided tests
are often used (Mara and Cribbie 2012). Two one-sided tests for paired data require a user-defined margin,
or equivalence interval, within which the samples are considered equivalent.
The choice of the equivalence interval is based on practical considerations and the research
questions being addressed; in addition, the equivalence interval need not be symmetric.
For a conclusive result, both one-sided tests must be rejected, concluding the difference of the
means falls within the upper and lower equivalence bounds.</p>
<p>MET employs CI’s along with the user-defined tolerance bounds, which can be used to employ an equivalence test.
In this case, H0 is accepted if the CI bounds fall completely between the tolerance bounds,
and H0 is rejected otherwise.</p>
</div>
<div class="section" id="how-to">
<h2>How-To<a class="headerlink" href="#how-to" title="Permalink to this headline">¶</a></h2>
<p>Selection of options to produce the plot proceeds approximately
counter-clockwise around the METviewer window. The steps to create a
series plot are:</p>
<ol class="arabic simple">
<li><p>Select the desired database from the “Select databases” pulldown menu
at the top margin of the METviewer window.</p></li>
<li><p>There are a number of tabs just under the database pulldown menu.
Select the ‘Series’ tab, which is the leftmost tab.</p></li>
<li><p>Select the type of MET statistics that will be used to create the
series plot. Click on the “Plot Data” pulldown menu which is located
under the tabs. The list contains “Stat”, “MODE”, or “MODE-TD”.
Select “Stat”.</p></li>
<li><p>Select the desired variable to calculate statistics for in the
“Y1 Axis Variables” tab. The first pulldown menu in the
“Y Dependent (Forecast) Variables” section lists the variables
available in the selected database.</p></li>
<li><p>Select the desired statistic to calculate in the second pulldown menu
which is to the right of the variable menu. This lists the available
attribute statistics in the selected dataset. Multiple statistics
can be selected and they will each be plotted as a separate line on
the plot.</p></li>
<li><p>Select the Y1 Series Variable from the first pulldown menu in that
section. There are many options. “MODEL” is used in the included
example. In the second pulldown menu to the right of the first are
the series variable options, for example, different models.
For this plot at least two values of the Series Variable is needed.</p></li>
<li><p>Groups are nor supported for this plot type.</p></li>
<li><p>“Independent Variable” is optional and will be used as “Fixed Variable”.</p></li>
<li><p>Select the type of statistics summary by selecting either “Summary”
or “Aggregation Statistics” button in the “Statistics” section.
Aggregated statistics may be selected for certain varieties of
statistics. The selection can be made from the leftmost dropdown
menu in the “Statistics” section. By default, the median value of
all statistics will be plotted. Using the dropdown menu, the mean or
sum may be selected instead. Choosing this option will cause a
single statistic to be calculated from the individual database lines.</p></li>
<li><p>Select Lower and Upper equivalence bounds in the Common section.
The default values are -0.001 and 0.001</p></li>
<li><p>Create ETB derived curve by opening a pop-up menu with ‘Add Derived Curve”
button in the bottom of the ‘Series Formatting” table. Select curves of interest
and check ‘Equivalence Testing Bounds” radio button. Since the data for both
curves should be similar, the event equalisation is enforced.</p></li>
<li><p>Now enough information has been entered to produce a graph. To do this,
click the “Generate Plot” button at the top of the METviewer window
(this is in red text). Typically, if a plot is not produced, it is
because the database selected does not contain the correct type of
data or the data is not similar. Also, it is imperative to check the
data used for the plot by
selecting the “R data” tab on the right hand side, above the plot
area. The data from the database that is being used to calculate the
statistics is listed in this tab. This tab should be checked to avoid
the accidental accumulation of inappropriate database lines. For
example, it does not make sense to accumulate statistics over
different domains, thresholds, models, etc.</p></li>
</ol>
<p>There are many other options for plots, but these are the basics.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The image below shows an example of the plot and set-up options for a
series plot in METviewer. This example uses the database
“mv_hrrr_sppmp_test” to plot “Stat” output for seven ensemble members.
The Frequency bias over the East domain is plotted for 3-hour
precipitation accumulation exceeding 0.254 cm. Appropriate titles and
labels have been entered in the titles and labels tab shown below
the plot. Colors and line formatting are shown across the bottom menu
of the plot. The values here are the defaults.</p>
<div class="figure align-default" id="id1">
<img alt="../_images/ETB_plot.png" src="../_images/ETB_plot.png" />
<p class="caption"><span class="caption-text">Screen capture of METviewer configured to produce
a ETB plot.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Here is the associated xml for this example. It can be copied into an
empty file and saved to the desktop then uploaded into the system by
clicking on the “Load XML” button in the upper-right corner of the GUI.
This XML can be downloaded from this link:
<a class="reference external" href="https://dtcenter.github.io/METviewer/latest/_static/xml/etb_plot_xml.xml">etb_plot_xml.xml</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
&lt;plot_spec&gt;
    &lt;connection&gt;
        &lt;host&gt;dakota.rap.ucar.edu:3306&lt;/host&gt;
        &lt;database&gt;mv_hrrr_sppmp_test&lt;/database&gt;
        &lt;user&gt;******&lt;/user&gt;
        &lt;password&gt;******&lt;/password&gt;
        &lt;management_system&gt;mariadb&lt;/management_system&gt;
    &lt;/connection&gt;
    &lt;rscript&gt;/usr/local/bin/Rscript&lt;/rscript&gt;
    &lt;folders&gt;
        &lt;r_tmpl&gt;/opt/vxwww/tomcat/webapps/metviewer_dev//R_tmpl&lt;/r_tmpl&gt;
        &lt;r_work&gt;/opt/vxwww/tomcat/webapps/metviewer_dev//R_work&lt;/r_work&gt;
        &lt;plots&gt;/opt/vxwww/tomcat/webapps/metviewer_output_dev//plots&lt;/plots&gt;
        &lt;data&gt;/opt/vxwww/tomcat/webapps/metviewer_output_dev//data&lt;/data&gt;
        &lt;scripts&gt;/opt/vxwww/tomcat/webapps/metviewer_output_dev//scripts&lt;/scripts&gt;
    &lt;/folders&gt;
    &lt;plot&gt;
        &lt;template&gt;series_plot.R_tmpl&lt;/template&gt;
        &lt;dep&gt;
            &lt;dep1&gt;
                &lt;fcst_var name=&quot;APCP_03&quot;&gt;
                    &lt;stat&gt;FAR&lt;/stat&gt;
                &lt;/fcst_var&gt;
            &lt;/dep1&gt;
            &lt;dep2/&gt;
        &lt;/dep&gt;
        &lt;series1&gt;
            &lt;field name=&quot;model&quot;&gt;
                &lt;val&gt;HRRR_sppmp_mem1_ctrlvx_hrconus&lt;/val&gt;
                &lt;val&gt;HRRR_sppmp_mem2_ctrlvx_hrconus&lt;/val&gt;
                &lt;val&gt;HRRR_sppmp_mem3_ctrlvx_hrconus&lt;/val&gt;
                &lt;val&gt;HRRR_sppmp_mem4_ctrlvx_hrconus&lt;/val&gt;
            &lt;/field&gt;
        &lt;/series1&gt;
        &lt;series2/&gt;
        &lt;plot_fix&gt;
            &lt;field equalize=&quot;true&quot; name=&quot;vx_mask&quot;&gt;
                &lt;set name=&quot;vx_mask_0&quot;&gt;
                    &lt;val&gt;EAST&lt;/val&gt;
                &lt;/set&gt;
            &lt;/field&gt;
            &lt;field equalize=&quot;true&quot; name=&quot;fcst_thresh&quot;&gt;
                &lt;set name=&quot;fcst_thresh_1&quot;&gt;
                    &lt;val&gt;&amp;gt;=0.254&lt;/val&gt;
                &lt;/set&gt;
            &lt;/field&gt;
        &lt;/plot_fix&gt;
        &lt;plot_cond/&gt;
        &lt;indep equalize=&quot;true&quot; name=&quot;fcst_lead&quot;/&gt;
        &lt;plot_stat&gt;median&lt;/plot_stat&gt;
        &lt;tmpl&gt;
            &lt;data_file&gt;plot_20210115_095414.data&lt;/data_file&gt;
            &lt;plot_file&gt;plot_20210115_095414.png&lt;/plot_file&gt;
            &lt;r_file&gt;plot_20210115_095414.R&lt;/r_file&gt;
            &lt;title&gt;ETB&lt;/title&gt;
            &lt;x_label&gt;Difference between models&lt;/x_label&gt;
            &lt;y1_label/&gt;
            &lt;y2_label/&gt;
            &lt;caption/&gt;
            &lt;job_title/&gt;
            &lt;keep_revisions&gt;false&lt;/keep_revisions&gt;
            &lt;listdiffseries1&gt;list(c(&quot;HRRR_sppmp_mem1_ctrlvx_hrconus APCP_03 FAR&quot;,&quot;HRRR_sppmp_mem2_ctrlvx_hrconus APCP_03 FAR&quot;,&quot;ETB&quot;),c(&quot;HRRR_sppmp_mem3_ctrlvx_hrconus APCP_03 FAR&quot;,&quot;HRRR_sppmp_mem4_ctrlvx_hrconus APCP_03 FAR&quot;,&quot;ETB&quot;))&lt;/listdiffseries1&gt;
            &lt;listdiffseries2&gt;list()&lt;/listdiffseries2&gt;
        &lt;/tmpl&gt;
        &lt;execution_type&gt;Python&lt;/execution_type&gt;
        &lt;event_equal&gt;true&lt;/event_equal&gt;
        &lt;vert_plot&gt;false&lt;/vert_plot&gt;
        &lt;x_reverse&gt;false&lt;/x_reverse&gt;
        &lt;num_stats&gt;false&lt;/num_stats&gt;
        &lt;indy1_stag&gt;false&lt;/indy1_stag&gt;
        &lt;indy2_stag&gt;false&lt;/indy2_stag&gt;
        &lt;grid_on&gt;true&lt;/grid_on&gt;
        &lt;sync_axes&gt;false&lt;/sync_axes&gt;
        &lt;dump_points1&gt;false&lt;/dump_points1&gt;
        &lt;dump_points2&gt;false&lt;/dump_points2&gt;
        &lt;log_y1&gt;false&lt;/log_y1&gt;
        &lt;log_y2&gt;false&lt;/log_y2&gt;
        &lt;varianceinflationfactor&gt;false&lt;/varianceinflationfactor&gt;
        &lt;plot_type&gt;png16m&lt;/plot_type&gt;
        &lt;plot_height&gt;8.5&lt;/plot_height&gt;
        &lt;plot_width&gt;11&lt;/plot_width&gt;
        &lt;plot_res&gt;72&lt;/plot_res&gt;
        &lt;plot_units&gt;in&lt;/plot_units&gt;
        &lt;mar&gt;c(8,4,5,4)&lt;/mar&gt;
        &lt;mgp&gt;c(1,1,0)&lt;/mgp&gt;
        &lt;cex&gt;1&lt;/cex&gt;
        &lt;title_weight&gt;2&lt;/title_weight&gt;
        &lt;title_size&gt;1.4&lt;/title_size&gt;
        &lt;title_offset&gt;-2&lt;/title_offset&gt;
        &lt;title_align&gt;0.5&lt;/title_align&gt;
        &lt;xtlab_orient&gt;1&lt;/xtlab_orient&gt;
        &lt;xtlab_perp&gt;-0.75&lt;/xtlab_perp&gt;
        &lt;xtlab_horiz&gt;0.5&lt;/xtlab_horiz&gt;
        &lt;xtlab_freq&gt;0&lt;/xtlab_freq&gt;
        &lt;xtlab_size&gt;1&lt;/xtlab_size&gt;
        &lt;xlab_weight&gt;1&lt;/xlab_weight&gt;
        &lt;xlab_size&gt;1&lt;/xlab_size&gt;
        &lt;xlab_offset&gt;2&lt;/xlab_offset&gt;
        &lt;xlab_align&gt;0.5&lt;/xlab_align&gt;
        &lt;ytlab_orient&gt;1&lt;/ytlab_orient&gt;
        &lt;ytlab_perp&gt;0.5&lt;/ytlab_perp&gt;
        &lt;ytlab_horiz&gt;0.5&lt;/ytlab_horiz&gt;
        &lt;ytlab_size&gt;1&lt;/ytlab_size&gt;
        &lt;ylab_weight&gt;1&lt;/ylab_weight&gt;
        &lt;ylab_size&gt;1&lt;/ylab_size&gt;
        &lt;ylab_offset&gt;-2&lt;/ylab_offset&gt;
        &lt;ylab_align&gt;0.5&lt;/ylab_align&gt;
        &lt;grid_lty&gt;3&lt;/grid_lty&gt;
        &lt;grid_col&gt;#cccccc&lt;/grid_col&gt;
        &lt;grid_lwd&gt;1&lt;/grid_lwd&gt;
        &lt;grid_x&gt;listX&lt;/grid_x&gt;
        &lt;x2tlab_orient&gt;1&lt;/x2tlab_orient&gt;
        &lt;x2tlab_perp&gt;1&lt;/x2tlab_perp&gt;
        &lt;x2tlab_horiz&gt;0.5&lt;/x2tlab_horiz&gt;
        &lt;x2tlab_size&gt;0.8&lt;/x2tlab_size&gt;
        &lt;x2lab_size&gt;0.8&lt;/x2lab_size&gt;
        &lt;x2lab_offset&gt;-0.5&lt;/x2lab_offset&gt;
        &lt;x2lab_align&gt;0.5&lt;/x2lab_align&gt;
        &lt;y2tlab_orient&gt;1&lt;/y2tlab_orient&gt;
        &lt;y2tlab_perp&gt;0.5&lt;/y2tlab_perp&gt;
        &lt;y2tlab_horiz&gt;0.5&lt;/y2tlab_horiz&gt;
        &lt;y2tlab_size&gt;1&lt;/y2tlab_size&gt;
        &lt;y2lab_size&gt;1&lt;/y2lab_size&gt;
        &lt;y2lab_offset&gt;1&lt;/y2lab_offset&gt;
        &lt;y2lab_align&gt;0.5&lt;/y2lab_align&gt;
        &lt;legend_box&gt;o&lt;/legend_box&gt;
        &lt;legend_inset&gt;c(0, -.25)&lt;/legend_inset&gt;
        &lt;legend_ncol&gt;3&lt;/legend_ncol&gt;
        &lt;legend_size&gt;0.8&lt;/legend_size&gt;
        &lt;caption_weight&gt;1&lt;/caption_weight&gt;
        &lt;caption_col&gt;#333333&lt;/caption_col&gt;
        &lt;caption_size&gt;0.8&lt;/caption_size&gt;
        &lt;caption_offset&gt;3&lt;/caption_offset&gt;
        &lt;caption_align&gt;0&lt;/caption_align&gt;
        &lt;ci_alpha&gt;0.05&lt;/ci_alpha&gt;
        &lt;eqbound_low&gt;-0.5&lt;/eqbound_low&gt;
        &lt;eqbound_high&gt;-0.5&lt;/eqbound_high&gt;
        &lt;plot_ci&gt;c(&quot;none&quot;,&quot;none&quot;,&quot;none&quot;,&quot;none&quot;,&quot;none&quot;,&quot;none&quot;)&lt;/plot_ci&gt;
        &lt;show_signif&gt;c(FALSE,FALSE,FALSE,FALSE,FALSE,FALSE)&lt;/show_signif&gt;
        &lt;plot_disp&gt;c(TRUE,TRUE,TRUE,TRUE,TRUE,TRUE)&lt;/plot_disp&gt;
        &lt;colors&gt;c(&quot;#ff0000FF&quot;,&quot;#8000ffFF&quot;,&quot;#00aaffFF&quot;,&quot;#0040ffFF&quot;,&quot;#000000FF&quot;,&quot;#0000ffFF&quot;)&lt;/colors&gt;
        &lt;pch&gt;c(20,20,20,20,20,20)&lt;/pch&gt;
        &lt;type&gt;c(&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;)&lt;/type&gt;
        &lt;lty&gt;c(1,1,1,1,1,1)&lt;/lty&gt;
        &lt;lwd&gt;c(1,1,1,1,1,1)&lt;/lwd&gt;
        &lt;con_series&gt;c(1,1,1,1,1,1)&lt;/con_series&gt;
        &lt;order_series&gt;c(1,2,3,4,5,6)&lt;/order_series&gt;
        &lt;plot_cmd/&gt;
        &lt;legend&gt;c(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;)&lt;/legend&gt;
        &lt;create_html&gt;TRUE&lt;/create_html&gt;
        &lt;y1_lim&gt;c()&lt;/y1_lim&gt;
        &lt;x1_lim&gt;c()&lt;/x1_lim&gt;
        &lt;y1_bufr&gt;0.04&lt;/y1_bufr&gt;
        &lt;y2_lim&gt;c()&lt;/y2_lim&gt;
    &lt;/plot&gt;
&lt;/plot_spec&gt;
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, UCAR/NCAR.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/pop_ver.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>