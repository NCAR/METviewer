
<plot_spec>
	
	<!-- database connection -->
	<connection>
		<host>kemosabe:3306</host>
		<database>metvdb3_hmt</database>
		<user>pgoldenb</user>
		<password>pgoldenb</password>		
	</connection>
	
	<!-- file sytem -->
	<folders>
		<r_tmpl>/home/pgoldenb/apps/verif/metviewer/R_tmpl</r_tmpl>
		<r_work>/d1/pgoldenb/var/hmt/R_work</r_work>
		<plots>/d1/pgoldenb/var/hmt/plots</plots>
	</folders>
	
	<plot name="hmt_mode_base" run="false">
	 	
		<!-- plot type -->
		<template>series_plot.R_tmpl</template>
		
		<!-- independent variable -->
		<indep name="fcst_lead">
			<val label="24">240000</val>
			<val label="48">480000</val>
			<val label="72">720000</val>
			<val label="96">960000</val>
		</indep>
		
		<!-- series1 variables and values -->
		<series1>
			<field name="model">
				<val>arw-tom-gep0</val>			
				<val>arw-fer-gep1</val>			
				<val>arw-sch-gep2</val>			
				<val>arw-tom-gep3</val>			
				<val>nmm-fer-gep4</val>			
				<val>arw-fer-gep5</val>			
				<val>arw-sch-gep6</val>			
				<val>arw-tom-gep7</val>			
				<val>nmm-fer-gep8</val>			
				<val>gfs</val>			
				<val>ens-mean</val>			
			</field>		
		</series1>
		
		<!-- series2 variables and values -->
		<series2>
			<field name="model">
				<val>ens-mean</val>			
			</field>		
		</series2>
		
		<!-- aggregate fields and values -->		
		<agg>
			<field name="fcst_thr">
				<val>>=6.350</val>
				<val>>=25.400</val>
			</field>
		</agg>
		
		<!-- dependent variables -->
		<dep>
			<mode_group>
				<dep1><fcst_var name="APCP_24"><stat>MMI</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>MMIF</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>MMIO</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>MIA</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>MAR</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>MCD</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>MAD</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>P50</stat></fcst_var></dep1>
				<dep1><fcst_var name="APCP_24"><stat>P90</stat></fcst_var></dep1>
			</mode_group>
			<dep2><fcst_var name="APCP_24"><stat>ACOV</stat></fcst_var></dep2>			
			<fix>
				<fcst_var name="APCP_24">
					<var name="fcst_lev">SFC</var>
				</fcst_var>
			</fix>		
		</dep>		
		
		<!-- plot formatting and options -->
		<grid_on>true</grid_on>
		<event_equal>false</event_equal>
		<plot1_diff>false</plot1_diff>
		<indy1_stag>false</indy1_stag>
		<num_stats>false</num_stats>

		<title_offset>-.4</title_offset>
		<title_size>1.4</title_size>
		<mar>c(7, 4, 4, 4)</mar>
		<plot_type>png16m</plot_type>
		<xlab_offset>1</xlab_offset>
		<y2lab_offset>2.5</y2lab_offset>
		<y2tlab_perp>.25</y2tlab_perp>
		<y2tlab_horiz>.5</y2tlab_horiz>
		<legend_inset>c(0, -.20)</legend_inset>
		<legend_ncol>3</legend_ncol>
		
		<colors>c("#33FF00FF", "#00FF19FF", "#00FF66FF", "#00FFB2FF", "#FF0000FF", "#00FFFFFF", "#00B3FFFF", "#0066FFFF", "#FF4C00FF", "#A6A600FF", "#000000FF", "#EEEEEEFF")</colors>
		<pch>c(19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19)</pch>
		<type>c("b", "b", "b", "b", "b", "b", "b", "b", "b", "b", "b", "h")</type>
		<lty>c(1, 2, 3, 4, 1, 5, 6, 1, 2, 1, 1, 1)</lty>
		<lwd>c(2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 40)</lwd>

		<y2_lim>c(0,.5)</y2_lim>
		<y2_bufr>0</y2_bufr>
		
		<tmpl>
			<val_map name="dep1_1_stat1">
				<pair><key>ACOV</key>  <val>Aerial Coverage</val></pair>
				<pair><key>MMI</key>   <val>Median of Maximum Interest</val></pair>
				<pair><key>MMIF</key>  <val>Median of Maximum Interest (Fcst)</val></pair>
				<pair><key>MMIO</key>  <val>Median of Maximum Interest (Obs)</val></pair>
				<pair><key>MIA</key>   <val>Median Intesection Area</val></pair>
				<pair><key>MAR</key>   <val>Median Area Ratio</val></pair>
				<pair><key>MCD</key>   <val>Median Centroid Distance</val></pair>
				<pair><key>MAD</key>   <val>Median Angle Difference</val></pair>
				<pair><key>P50</key>   <val>Median 50% Intensity Difference (fcst vs obs)</val></pair>
				<pair><key>P90</key>   <val>Median 90% Intensity Difference (fcst vs obs)</val></pair>
			</val_map>		
		</tmpl>
		
		<plot_cmd>
			par(usr=listY1Usr);
			if( listDep1Plot$APCP_24 == "P50" | listDep1Plot$APCP_24 == "P90" ){ abline(h=0, lty=1, col="#999999FF"); }
		</plot_cmd>		
	</plot>
	
	<!-- 
	    APCP_24 lead_series aggregations
	 -->
	 	
	<!-- date ranges -->
	<date_range name="20100110"><start>2009-12-11</start><end>2010-01-09</end></date_range>	
	<date_range name="20100117"><start>2009-12-18</start><end>2010-01-16</end></date_range>
	<date_range name="20100124"><start>2009-12-25</start><end>2010-01-23</end></date_range>
	<date_range name="20100131"><start>2010-01-01</start><end>2010-01-30</end></date_range>
	<date_range name="20100207"><start>2010-01-08</start><end>2010-02-06</end></date_range>
	<date_range name="20100214"><start>2010-01-15</start><end>2010-02-13</end></date_range>
	<date_range name="20100221"><start>2010-01-22</start><end>2010-02-20</end></date_range>
	<date_range name="20100228"><start>2010-01-29</start><end>2010-02-27</end></date_range>
	<date_range name="20100307"><start>2010-02-05</start><end>2010-03-06</end></date_range>
	<date_range name="20100314"><start>2010-02-12</start><end>2010-03-13</end></date_range>
	<date_range name="20100321"><start>2010-02-19</start><end>2010-03-20</end></date_range>
	<date_range name="20100328"><start>2010-02-26</start><end>2010-03-27</end></date_range>
	<date_range name="20100404"><start>2010-03-05</start><end>2010-04-03</end></date_range>
	
	<!-- base plot object for the aggregation plots -->
	<plot name="hmt_mode_24_agg" inherits="hmt_mode_base" run="false">

		<!-- templates -->
		<tmpl>
			<data_file>mode/lead_series_agg/{initdate?map=true}b/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.data</data_file>
			<plot_file>mode/lead_series_agg/{initdate?map=true}b/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.png</plot_file>
			<r_file>mode/lead_series_agg/{initdate?map=true}b/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.R</r_file>
			<title>MODE {dep1_1} {dep1_1_stat1} {fcst_thr?units=in}\" - 30 DAY AGGREGATION ENDING {initdate?map=true}</title>
			<x_label>FCST_LEAD</x_label>
			<y1_label>{dep1_1_stat1?map=true}</y1_label>
			<y2_label>ens-mean ACOV</y2_label>
		</tmpl>		
	</plot>

	<!-- base plot object for the aggregation plots -->
	<plot name="hmt_mode_24_agg_01" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100110"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_02" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100117"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_03" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100124"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_04" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100131"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_05" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100207"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_06" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100214"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_07" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100221"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_08" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100228"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_09" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100307"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_10" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100314"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_11" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100321"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_12" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100328"/></field></plot_fix></plot>
	<plot name="hmt_mode_24_agg_13" inherits="hmt_mode_24_agg"><plot_fix><field name="initdate"><date_range name="20100404"/></field></plot_fix></plot>


	<!-- 
	     APCP_24 lead_series_valid
	 -->
	 	
	<!--  base plot object for the lead_series_valid plots  -->
	<plot name="hmt_mode_24_valid" inherits="hmt_mode_base" run="false">
		
		<!-- templates -->
		<tmpl>
			<data_file>mode/lead_series_valid/{fcst_valid}V/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.data</data_file>
			<plot_file>mode/lead_series_valid/{fcst_valid}V/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.png</plot_file>
			<r_file>mode/lead_series_valid/{fcst_valid}V/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.R</r_file>
			<title>MODE {dep1_1} {dep1_1_stat1} {fcst_thr?units=in}\" - CONSTANT VALID TIME {fcst_valid}V</title>
			<x_label>FCST_LEAD</x_label>
			<y1_label>{dep1_1_stat1?map=true}</y1_label>
			<y2_label>ens-mean ACOV</y2_label>
		</tmpl>		
	</plot>
	
	<!-- lead_series_init date list -->	
<!--	<date_list name="fcst_valid_dates_01"><start>2009-12-27</start><end>2010-01-31</end><hour>12</hour><field name="fcst_valid" /></date_list>-->
	<date_list name="fcst_valid_dates_01"><start>2010-01-18</start><end>2010-01-22</end><hour>12</hour><field name="fcst_valid" /></date_list>
	<date_list name="fcst_valid_dates_02"><start>2010-02-01</start><end>2010-02-28</end><hour>12</hour><field name="fcst_valid" /></date_list>
	<date_list name="fcst_valid_dates_03"><start>2010-03-01</start><end>2010-04-04</end><hour>12</hour><field name="fcst_valid" /></date_list>
	
	<!-- plot jobs broken up by project weeks -->
	<plot name="hmt_mode_24_valid_01" inherits="hmt_mode_24_valid"><agg><field name="fcst_valid"><date_list name="fcst_valid_dates_01"/></field></agg></plot>
	<plot name="hmt_mode_24_valid_02" inherits="hmt_mode_24_valid"><agg><field name="fcst_valid"><date_list name="fcst_valid_dates_02"/></field></agg></plot>
	<plot name="hmt_mode_24_valid_03" inherits="hmt_mode_24_valid"><agg><field name="fcst_valid"><date_list name="fcst_valid_dates_03"/></field></agg></plot>
	
	
	<!-- 
	    APCP_24 lead_series_init
	 -->

	<plot name="hmt_mode_24_init" inherits="hmt_mode_base" run="false">
		<!-- templates -->
		<tmpl>
			<data_file>mode/lead_series_init/{initdate}/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.data</data_file>
			<plot_file>mode/lead_series_init/{initdate}/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.png</plot_file>
			<r_file>mode/lead_series_init/{initdate}/{dep1_1}_{dep1_1_stat1}_{fcst_thr?symbol=letters;units=in}.R</r_file>
			<title>MODE {dep1_1} {dep1_1_stat1} {fcst_thr?units=in}\" - CONSTANT INIT TIME {initdate}</title>
			<x_label>FCST_LEAD</x_label>
			<y1_label>{dep1_1_stat1?map=true}</y1_label>
			<y2_label>ens-mean ACOV</y2_label>
		</tmpl>		
	</plot>
	
	<!-- lead_series_init date list -->	
	<date_list name="fcst_init_dates_01"><start>2009-12-27</start><end>2010-01-31</end><hour>12</hour><field name="fcst_init" /></date_list>
	<date_list name="fcst_init_dates_02"><start>2010-02-01</start><end>2010-02-28</end><hour>12</hour><field name="fcst_init" /></date_list>
	<date_list name="fcst_init_dates_03"><start>2010-03-01</start><end>2010-04-04</end><hour>12</hour><field name="fcst_init" /></date_list>

	<!-- plot jobs broken up by project weeks -->
	<plot name="hmt_mode_24_init_01" inherits="hmt_mode_24_init"><agg><field name="initdate"><date_list name="fcst_init_dates_01"/></field></agg></plot>
	<plot name="hmt_mode_24_init_02" inherits="hmt_mode_24_init"><agg><field name="initdate"><date_list name="fcst_init_dates_02"/></field></agg></plot>
	<plot name="hmt_mode_24_init_03" inherits="hmt_mode_24_init"><agg><field name="initdate"><date_list name="fcst_init_dates_03"/></field></agg></plot>

</plot_spec>